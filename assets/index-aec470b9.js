import{j as p,F as E}from"./@emotion-63839449.js";import{r as e}from"./react-4fd50329.js";import{a as b,u as x}from"./react-redux-896b353b.js";import{a as N,l as r,b1 as S,h as g}from"./index-c2ded735.js";import{u as k}from"./index-687ba9e6.js";import"./lodash-88fe09e6.js";import{h as o}from"./moment-a468e1f9.js";import"./file-saver-40cf32a9.js";import"./@firebase-43527ee1.js";import{g as L,u as P}from"./residentForm.actions-733a7807.js";import{F as I}from"./index-7e2c90ab.js";import{d as T,u as U}from"./react-router-a4308f7b.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./@babel-b64fd0f9.js";import"./stylis-79144faa.js";import"./classnames-4ba1ba1a.js";import"./react-dom-40621ea0.js";import"./scheduler-765c72db.js";import"./use-sync-external-store-5d1b6592.js";import"./redux-10bbab4c.js";import"./react-router-dom-2a8f5f6d.js";import"./history-a1882333.js";import"./resolve-pathname-e210f2ac.js";import"./tiny-invariant-dd7d57d2.js";import"./@redux-saga-8bafe09b.js";import"./antd-f9eae174.js";import"./rc-pagination-c1e6a0ac.js";import"./rc-picker-2e3d5fe5.js";import"./rc-util-0bc219f3.js";import"./rc-trigger-570b13ec.js";import"./rc-motion-ae889c42.js";import"./rc-align-e5d7b12e.js";import"./dom-align-ecb06dd6.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-resize-observer-b9ad4e29.js";import"./@ant-design-cba9d434.js";import"./@ctrl-fb5a5473.js";import"./rc-tabs-dfd19a56.js";import"./rc-dropdown-5378dd0a.js";import"./rc-menu-b15ebfe9.js";import"./rc-overflow-6be96612.js";import"./rc-select-564caf01.js";import"./rc-virtual-list-8a7b82a6.js";import"./rc-collapse-11b7d3c4.js";import"./shallowequal-4542d6f7.js";import"./rc-drawer-317f0b4d.js";import"./@rc-component-5a112e55.js";import"./rc-field-form-ef5549aa.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./rc-image-e0357917.js";import"./rc-dialog-b1d1f07b.js";import"./rc-input-number-8bc068f7.js";import"./rc-rate-c64cf0d5.js";import"./rc-steps-2d1924c7.js";import"./rc-switch-b4e96de7.js";import"./rc-table-191ecc42.js";import"./rc-checkbox-018e8052.js";import"./rc-tree-67773537.js";import"./rc-tree-select-cb7eccc3.js";import"./copy-to-clipboard-64585c8c.js";import"./toggle-selection-93f4ad84.js";import"./rc-textarea-d01adcbb.js";import"./rc-input-02c2c2ba.js";import"./rc-upload-3ab0f08a.js";import"./rc-notification-d13dc43b.js";import"./rc-progress-4f1a7096.js";import"./rc-tooltip-08fa4217.js";import"./redux-logger-e1c9ca90.js";import"./dompurify-8e338605.js";import"./prop-types-1172f4d5.js";import"./query-string-f5cca1e7.js";import"./decode-uri-component-4138e85d.js";import"./split-on-first-4f1167c8.js";import"./filter-obj-2ed190f4.js";import"./oidc-client-7da0eaf7.js";import"./firebase-878887a2.js";import"./idb-cdd1a92f.js";import"./path-to-regexp-ef8d5544.js";import"./index-b17d22e5.js";import"./account-86ffff50.js";import"./index-43183512.js";import"./index-881eef42.js";import"./libphonenumber-js-0d5a9c92.js";import"./react-infinite-scroll-component-e33646cb.js";function ui(){var f;const t=b(i=>i.residentForm.info),m=x(),D=T(),{idResident:s,idBuilding:d}=U(),{setTitlePage:n,setVisibleSearchBox:c}=e.useContext(N);e.useEffect(()=>(n(r.update_resident),c(!1),()=>{n(""),c(!0)}),[]);const[R,u]=e.useState({isFetching:!1}),[a,l]=e.useState({code:void 0,codeLanguage:void 0,isFetching:!1});e.useEffect(()=>{u({isFetching:!0}),m(L({idBuilding:d,idResident:s,refreshState:()=>{u({isFetching:!1})}}))},[s]);function h(i){l({code:void 0,codeLanguage:void 0,isFetching:!0}),m(P({idBuilding:d,idResident:t.id,resident:{...i,birthday:i.birthday?o(i.birthday).toDate():void 0,idDate:i.idDate?o(i.idDate).toDate():void 0,visaExpiredDay:i.visaExpiredDay?o(i.visaExpiredDay).toDate():void 0,addedToFamilyRegisterDay:i.addedToFamilyRegisterDay?o(i.addedToFamilyRegisterDay).toDate():void 0,temporaryRegistrationDate:i.temporaryRegistrationDate?o(i.temporaryRegistrationDate).toDate():void 0,temporaryRegistrationEnd:i.temporaryRegistrationEnd?o(i.temporaryRegistrationEnd).toDate():void 0},refreshState:({code:F,codeLanguage:v})=>{l({code:F,codeLanguage:v,isFetching:!1})}}))}function y(){D.goBack()}return k(a.code,a.codeLanguage,{message:r.success,description:r.update_data_success},()=>{y()}),p(E,{children:R.isFetching||!t?p(S,{isLoading:!0}):p(I,{isFetching:a.isFetching,title:r.label.update_resident,id:t.id,fullName:t.fullName,birthday:t.birthday,phone:t==null?void 0:t.phone,phoneCode:(t==null?void 0:t.phoneCode)||g,phoneNotUseApp:t==null?void 0:t.phoneNotUseApp,phoneNotUseAppCode:(t==null?void 0:t.phoneNotUseAppCode)||g,email:t.email,backupEmail:t.backupEmail,gender:t.gender,address:t.address,identifier:t.identifier,idPlace:t.idPlace,idDate:t.idDate,unitId:t.unitId,unitName:((f=t==null?void 0:t.unit)==null?void 0:f.name)??"",role:t.role,rentDate:t.rentDate,rentDuedate:t.rentDuedate,occupation:t.occupation,company:t.company,taxCode:t.taxCode,relationship:t.relationship,note:t.note,nationality:t.nationality,visa:t.visa,visaExpiredDay:t.visaExpiredDay,temporaryRegistrationNumber:t.temporaryRegistrationNumber,addedToFamilyRegisterDay:t.addedToFamilyRegisterDay,temporaryRegistrationDate:t.temporaryRegistrationDate,temporaryRegistrationEnd:t.temporaryRegistrationEnd,landsoftId:t.landsoftId,contractLandsoftId:t.contractLandsoftId,onClickCancel:y,onClickConfirm:h})})}export{ui as default};
