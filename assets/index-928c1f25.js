import{j as t,u as ze,a as N,F as ge}from"./@emotion-63839449.js";import{r as I}from"./react-4fd50329.js";import{B as pe}from"./index-881eef42.js";import{F as te,u as _e}from"./index-687ba9e6.js";import{a3 as Pe,dq as Ye,a5 as he,I as K,l as n,dP as qe,Y as $e,a as ke,c6 as G,bH as He,E as We,S as Xe,eb as R,ch as Ke,ci as Je,cj as Qe,ck as Ze,cl as et,s as U,K as ue,b0 as tt,av as at,at as ot,bv as it,ec as nt,cd as we,b1 as rt}from"./index-c2ded735.js";import"./lodash-88fe09e6.js";import{h as fe}from"./moment-a468e1f9.js";import"./file-saver-40cf32a9.js";import"./react-redux-896b353b.js";import{u as st}from"./useService-37d60dc0.js";import"./@firebase-43527ee1.js";import{a as ct,i as lt,d as dt,g as Oe,b as mt}from"./contract-2ad66738.js";import{c as Re,E as pt,S as ut,L as ft}from"./exportContract-a49a1d75.js";import{P as e}from"./prop-types-1172f4d5.js";import{P as Ne,T as Ae,k as gt,a as Te,p as W,q as X}from"./index-b17d22e5.js";import{B as ae,T as ht,b as V,R as Be,n as Tt,P as yt}from"./antd-f9eae174.js";import{S as Fe,I as It}from"./index-43183512.js";import{I as St}from"./index-0335a746.js";import{d as xt}from"./downloadFileFromUrl-79614833.js";import{e as vt}from"./exportExcel-837be6ed.js";import{u as Le}from"./react-router-a4308f7b.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./@babel-b64fd0f9.js";import"./stylis-79144faa.js";import"./classnames-4ba1ba1a.js";import"./redux-10bbab4c.js";import"./react-router-dom-2a8f5f6d.js";import"./history-a1882333.js";import"./resolve-pathname-e210f2ac.js";import"./tiny-invariant-dd7d57d2.js";import"./react-dom-40621ea0.js";import"./scheduler-765c72db.js";import"./@redux-saga-8bafe09b.js";import"./redux-logger-e1c9ca90.js";import"./dompurify-8e338605.js";import"./query-string-f5cca1e7.js";import"./decode-uri-component-4138e85d.js";import"./split-on-first-4f1167c8.js";import"./filter-obj-2ed190f4.js";import"./oidc-client-7da0eaf7.js";import"./firebase-878887a2.js";import"./rc-pagination-c1e6a0ac.js";import"./rc-picker-2e3d5fe5.js";import"./rc-util-0bc219f3.js";import"./rc-trigger-570b13ec.js";import"./rc-motion-ae889c42.js";import"./rc-align-e5d7b12e.js";import"./dom-align-ecb06dd6.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-resize-observer-b9ad4e29.js";import"./@ant-design-cba9d434.js";import"./@ctrl-fb5a5473.js";import"./rc-tabs-dfd19a56.js";import"./rc-dropdown-5378dd0a.js";import"./rc-menu-b15ebfe9.js";import"./rc-overflow-6be96612.js";import"./rc-select-564caf01.js";import"./rc-virtual-list-8a7b82a6.js";import"./rc-collapse-11b7d3c4.js";import"./shallowequal-4542d6f7.js";import"./rc-drawer-317f0b4d.js";import"./@rc-component-5a112e55.js";import"./rc-field-form-ef5549aa.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./rc-image-e0357917.js";import"./rc-dialog-b1d1f07b.js";import"./rc-input-number-8bc068f7.js";import"./rc-rate-c64cf0d5.js";import"./rc-steps-2d1924c7.js";import"./rc-switch-b4e96de7.js";import"./rc-table-191ecc42.js";import"./rc-checkbox-018e8052.js";import"./rc-tree-67773537.js";import"./rc-tree-select-cb7eccc3.js";import"./copy-to-clipboard-64585c8c.js";import"./toggle-selection-93f4ad84.js";import"./rc-textarea-d01adcbb.js";import"./rc-input-02c2c2ba.js";import"./rc-upload-3ab0f08a.js";import"./rc-notification-d13dc43b.js";import"./rc-progress-4f1a7096.js";import"./rc-tooltip-08fa4217.js";import"./use-sync-external-store-5d1b6592.js";import"./idb-cdd1a92f.js";import"./path-to-regexp-ef8d5544.js";import"./account-86ffff50.js";import"./libphonenumber-js-0d5a9c92.js";import"./react-infinite-scroll-component-e33646cb.js";import"./regex-deefadac.js";import"./xlsx-0fb7ed70.js";import"./uuid-4a60fe23.js";const ye=({hiddenAction:u,totalItem:p,showFormImportContract:g,showFormExportContract:h,servicePermissionExport:s,servicePermissionWrite:y})=>{const b=Pe(),[C]=$e(),c=()=>{h()},a=()=>{g()},o=[!u.includes("EXPORT")&&s&&t(ae,{style:{marginRight:C.marginSm},type:"primary",ghost:!0,onClick:()=>{b({action:Ye,label:he}),c()},icon:t(K,{name:"icon-download-outlined"}),children:n.export},"export")||null,!u.includes("IMPORT")&&y&&t(ae,{type:"primary",icon:t(K,{name:"icon-upload-outlined"}),onClick:()=>{b({action:qe,label:he}),a()},children:n.import},"import")||null].filter(Boolean);return t(Ne.ActionBox,{actions:o,total:p})};ye.propTypes={totalItem:e.number,showFormImportContract:e.func,showFormExportContract:e.func,hiddenAction:e.arrayOf(e.string),servicePermissionExport:e.bool,servicePermissionWrite:e.bool};ye.defaultProps={totalItem:0,showFormImportContract:()=>{},showFormExportContract:()=>{},hiddenAction:[],servicePermissionExport:!1,servicePermissionWrite:!1};const Ie=({editing:u,dataIndex:p,title:g,inputType:h,record:s,index:y,children:b,...C})=>{const c=(s==null?void 0:s.contractTemplates)??[],a=h==="select"?t(Fe,{size:"small",fluid:!0,children:c.map(o=>t(Fe.Option,{style:{wordBreak:"break-word"},value:o.id,children:t(ht,{title:o.name,children:t("span",{children:o.name})})},o.id))}):t(gt,{size:"small",style:{textAlign:"right"},formatter:o=>G(o),min:"0",defaultValue:0});return t("td",{...C,children:u?t(te.Item,{name:p,style:{margin:0},rules:[{required:!0}],children:a}):b})};Ie.propTypes={editing:e.bool,dataIndex:e.string,title:e.string,inputType:e.string,record:e.objectOf(e.any),index:e.number,children:e.node};Ie.defaultProps={editing:!1,dataIndex:"",title:"",inputType:"",record:void 0,index:0,children:t("div",{})};const Se=({loading:u,idBuilding:p,filterObj:g,totalItem:h,apartments:s,tablePage:y,tablePageSize:b,handleTablePageChange:C,triggerGetContracts:c,triggerGetTotalPayment:a,showFormDetailContractTemplate:o,totalPayment:S,hiddenAction:L,servicePermissionWrite:F})=>{const x=Pe(),{layoutScrollRef:f}=I.useContext(ke),T=ze(),[v]=te.useForm(),[E,w]=I.useState(""),[m,A]=I.useState(!1),[P,j]=I.useState({code:void 0,codeLanguage:void 0});_e(P.code,P.codeLanguage,{message:n.success,description:n.update_data_success});const J=i=>{w(i.key),v.setFieldsValue({oldIndex:0,newIndex:0,norm:0,...i,contractTemplate:i.contractTemplateId||""})},oe=()=>{m?Te.confirm({cancelText:n.cancel,okText:n.confirm,title:n.confirm,content:`${n.do_you_want_to_cancel_edit}?`,onOk:()=>{A(!1),w("")}}):w("")},B=async()=>{if(m&&(v.setFieldsValue({...We(v.getFieldsValue(),{})}),await v.validateFields())){j({code:void 0,codeLanguage:void 0});const l={contractTemplateId:v.getFieldValue("contractTemplate"),totalNumberUse:Number(v.getFieldValue("usage")),unitId:v.getFieldValue("key")};try{const _=await ct({idBuilding:p,contracts:[l]});j({code:_.code}),Xe.includes(_.code)&&(w(""),A(!1),await c(g,y,b),await a({...g}))}catch(_){j({code:_.code,codeLanguage:_.codeLanguage})}}},ie=(i,l)=>{C(i,l)},Q=()=>{m||A(!0)},ne=i=>{o({contractTemplate:i})},Z=[{title:n.unit,key:"apartment",fixed:"left",width:150,children:[{title:n.total,key:"apartment",dataIndex:"apartment",fixed:"left",width:150}]},{title:n.tariff,key:"contractTemplate",width:250,children:[{title:"",key:"contractTemplate",dataIndex:"contractTemplate",width:250,ellipsis:!0,editable:!0,render:(i,l)=>i?t(ae,{type:"link",style:{padding:0},onClick:()=>ne(l.contractTemplateObj),color:"success",children:i}):null}]},{title:n.paid_until_at,key:"paidUntilAt",width:150,children:[{title:"",key:"paidUntilAt",dataIndex:"paidUntilAt",width:150}]},{title:n.usage,key:"usage",align:"right",width:100,children:[{title:G((S==null?void 0:S.totalNumberUse)??0),key:"usage",dataIndex:"usage",width:100,editable:!0,align:"right"}]},{title:n.total_payment,key:"totalPayment",align:"right",fixed:"right",width:150,children:[{title:G(Math.round((S==null?void 0:S.totalPayment)??0)),key:"totalPayment",dataIndex:"totalPayment",align:"right",fixed:"right",width:150}]},F?{title:n.actions,key:"actions",dataIndex:"actions",align:"center",fixed:"right",width:100,render:(i,l)=>t(ge,{children:l.key===E?N(ge,{children:[t(ae,{htmlType:"submit",type:"link",style:{marginRight:T.margin.xs,padding:0},disabled:!m,icon:t(K,{title:n.save,style:{fontSize:T.iconSize},name:"icon-check-outlined"})}),t(K,{title:n.delete,style:{fontSize:T.iconSize},name:"icon-close-outlined",onClick:oe})]}):!L.includes("EDIT")&&t(K,{title:n.update,style:{fontSize:T.iconSize},name:"icon-edit-outlined",onClick:()=>{x({action:He,label:he}),J(l)},disabled:!!(E&&l.key!==E)})||null})}:null].filter(Boolean).map(i=>{if(i.children&&i.children.length>0){const l=i.children[0];return l.editable?{...i,children:[{...l,onCell:_=>({record:_,inputType:l.dataIndex==="contractTemplate"?"select":"number",dataIndex:l.dataIndex,title:l.title,editing:_.key===E})}]}:i}return i.editable?{...i,onCell:l=>({record:l,inputType:i.dataIndex==="contractTemplate"?"select":"number",dataIndex:i.dataIndex,title:i.title,editing:l.key===E})}:i}),re=s.map(i=>{var _;const l=(_=i==null?void 0:i.contracts)==null?void 0:_[0];if(l){const{contractTemplateId:le,contractTemplate:z,totalNumberUse:ee,paidUntilAt:M}=l,{formula:Y}=z,de=Y?Re({formula:Y.formula,formulaType:Y.formulaType,norm:1,ratio:1,totalNumberUse:ee}):0;return{key:i.id,apartment:i.name,contractTemplate:z.name,usage:ee||0,totalPayment:G(Math.round(de)),contractTemplateId:le,paidUntilAt:M,contractTemplates:i.contractTemplates,contractTemplateObj:z}}return{key:i.id,apartment:i.name,contractTemplate:"",usage:0,totalPayment:0,contractTemplateId:void 0,paidUntilAt:"",contractTemplates:i.contractTemplates,contractTemplateObj:void 0}}),se={pageSize:b,defaultCurrent:1,current:y,total:h,showQuickJumper:!0,showSizeChanger:!0,hideOnSinglePage:!0,onChange:ie},ce={x:Z.reduce((i,l)=>i+ +l.width,0),scrollToFirstRowOnChange:!0};return t(te,{onFinish:B,onValuesChange:Q,form:v,name:"formEditRow",children:t(Ae,{bordered:!0,components:{body:{cell:Ie}},loading:u,columns:Z,dataSource:re,pagination:se,scroll:ce,sticky:{offsetScroll:T.offsetScrollX,getContainer:()=>f.current}})})};Se.propTypes={loading:e.bool,idBuilding:e.oneOfType([e.number,e.string]),filterObj:e.objectOf(e.any),totalItem:e.number,apartments:e.arrayOf(e.any),tablePage:e.number,tablePageSize:e.number,handleTablePageChange:e.func,triggerGetContracts:e.func,triggerGetTotalPayment:e.func,showFormDetailContractTemplate:e.func,totalPayment:e.objectOf(e.any),hiddenAction:e.arrayOf(e.string),servicePermissionWrite:e.bool};Se.defaultProps={loading:!1,idBuilding:0,filterObj:void 0,totalItem:0,apartments:[],tablePage:0,tablePageSize:0,handleTablePageChange:()=>{},triggerGetContracts:()=>{},triggerGetTotalPayment:e.func,showFormDetailContractTemplate:()=>{},totalPayment:void 0,hiddenAction:[],servicePermissionWrite:!1};const xe=({handleFilterChange:u,contractTemplates:p,formFilter:g})=>{const h=y=>{u({...y})},s=I.useMemo(()=>[{label:n.unit,key:"apartment",component:t(It,{placeholder:n.unit}),visible:!0}],[p]);return t(Ne.FilterBox,{formData:g,defaultFilter:{...R},onSearch:h,layout:"vertical",filters:s})};xe.propTypes={handleFilterChange:e.func,contractTemplates:e.arrayOf(e.any),formFilter:e.objectOf(e.any)};xe.defaultProps={handleFilterChange:()=>{},contractTemplates:[],formFilter:void 0};const ve=u=>{const{idBuilding:p,onHide:g,refreshContracts:h,feeNotificationPeriod:s,opening:y,closing:b,idService:C,serviceType:c,contractTemplates:a}=u,[o,S]=I.useState({isFetching:!1,code:void 0,codeLanguage:void 0,success:0,failed:0,errors:[],data:void 0});_e(o.code,o.codeLanguage,{message:n.success,description:n.import_data_success},()=>{h()});const L=async f=>{var T,v,E,w;S({isFetching:!0,code:void 0,codeLanguage:void 0,success:0,failed:0,errors:[],data:void 0});try{const m=await lt({idBuilding:p,file:f,dataAttach:{createdFor:fe(s).format("YYYYMM"),startDate:fe(y),endDate:fe(b)}}),A=((v=(T=m==null?void 0:m.data)==null?void 0:T.errors)==null?void 0:v.map(P=>({index:P==null?void 0:P.index,code:(P==null?void 0:P.code)??500,message:P.message})))??[];S({isFetching:!1,code:m.code,codeLanguage:m.codeLanguage,success:((E=m==null?void 0:m.data)==null?void 0:E.success)??0,failed:A.length,errors:A,data:((w=m==null?void 0:m.data)==null?void 0:w.data)??void 0})}catch(m){S({isFetching:!1,code:m.code,codeLanguage:m.codeLanguage,success:0,failed:0,errors:[],data:void 0})}},F=async()=>{const f=await dt({idBuilding:p,idService:C,serviceType:c}),T=(f==null?void 0:f.data)??"";xt(T,document,"mau-thong-tin-dich-vu-luu-so-su-dung.xlsx")},x=[{name:"#",rules:{type:"number",required:!0}},{name:"Căn hộ",rules:{type:"string",required:!0,max:255}},{name:"Số lượng",rules:{type:"number",validator(f,T,v,E,w){return T==null||T===""?new Error(n.status.data_require):T<0?new Error(n.index_must_greater_or_equal_than_min.replace("{min}",0)):Number.isNaN(+T)?new Error(n.index_must_be_number):!0}}},{name:"Biểu phí",rules:a&&a.length?{required:!0,type:"enum",enum:a.map(({name:f})=>f)}:{type:"string",required:!0,max:255}}];return t(St,{headers:x,onClose:g,onOk:L,visible:!0,code:o.code,codeLanguage:o.codeLanguage,loading:o.isFetching,numberSuccess:o.success,numberFail:o.failed,problemResponseServerDataSource:o.errors,errorFile:o.data,onDownloadTemplateFile:F})};ve.propTypes={idBuilding:e.oneOfType([e.number,e.string]),onHide:e.func,refreshContracts:e.func,feeNotificationPeriod:e.number,opening:e.string,closing:e.string,idService:e.oneOfType([e.number,e.string]),serviceType:e.string,contractTemplates:e.arrayOf(e.any)};ve.defaultProps={idBuilding:0,onHide:()=>{},refreshContracts:()=>{},feeNotificationPeriod:0,opening:void 0,closing:void 0,idService:0,serviceType:"",contractTemplates:[]};const Ce=({contractTemplate:u,hideModal:p})=>{const{formula:g,surcharges:h,promotions:s}=u,y=[],b=[],C=[];if(g){const{formulaType:c,formula:a}=g;if(c===Ke)y.push({formula:a.name||n.formula,price:G(a.price)});else if(c===Je)for(let o=0;o<a.length;o+=1)y.push({formula:`${a[o].from}${a[o].to?` - ${a[o].to}`:""}`,price:G(a[o].price)});else if(c===Qe)for(let o=0;o<a.length;o+=1)y.push({formula:a[o].name,price:G(a[o].price)})}if(h&&h.length)for(let c=0;c<h.length;c+=1)b.push({formula:h[c].name,price:`${h[c].price} ${h[c].type===Ze?"(%)":""}`});return s&&s.length&&C.push({formula:s[0].name,price:`${s[0].price} (%)`}),t(Te,{title:n.detail_tariff,footer:!1,onCancel:p,open:!0,children:N(Be,{gutter:[12,12],children:[N(V,{span:"12",children:[t(W,{children:n.tariff}),t(X,{children:u.name||"-"})]}),N(V,{span:"12",children:[t(W,{children:n.english_name}),t(X,{children:u.enName||"-"})]}),N(V,{span:"12",children:[t(W,{children:n.deferred_interest}),t(X,{children:u.deferredInterest||"-"})]}),N(V,{span:"12",children:[t(W,{children:n.pay_time}),t(X,{children:u.payTime||"-"})]}),t(V,{span:"24",children:g&&N(ge,{children:[t(W,{children:n.formula}),N(X,{children:[g.name," - ",et[g.formulaType].label]}),t(Ae,{bordered:!0,size:"small",pagination:!1,columns:[{title:n.formula,key:"formula",dataIndex:"formula"},{title:n.price,key:"price",dataIndex:"price"}],dataSource:y})]})||null})]})})};Ce.propTypes={hideModal:e.func,contractTemplate:e.objectOf(e.any)};Ce.defaultProps={hideModal:()=>{},contractTemplate:{}};const Ct=({hideModalExportData:u,filter:p,totalItem:g,serviceName:h})=>{const{idBuilding:s}=Le(),[y,b]=I.useState(0);return I.useEffect(()=>{(async()=>{var o;const C=[];let c=1;const a=Math.ceil(g/U);for(pt({idBuilding:s,filter:{...p,onlyLogging:!0,serviceName:h}});c<=a;){b(Math.ceil(c/a*100));const S=await Oe({idBuilding:s,filter:{serviceId:p.serviceId,serviceType:p.serviceType,unitName:p.apartment,unitGroupId:s,contractTemplateId:p.contractTemplateId?p.contractTemplateId:void 0},page:c,limit:U});if(S.data.length>0){const L=C.length;for(let F=0;F<S.data.length;F+=1){const x=[L+F+1],f=S.data[F],T=(o=f==null?void 0:f.contracts)==null?void 0:o[0];if(T){const{contractTemplate:v,totalNumberUse:E,paidUntilAt:w}=T,{formula:m}=v,A=m?Re({formula:m.formula,formulaType:m.formulaType,norm:1,ratio:1,totalNumberUse:E}):0;x.push((f==null?void 0:f.name)??""),x.push(E||0),x.push((v==null?void 0:v.name)??""),x.push(w||""),x.push(A||0)}else x.push(f.name),x.push(0),x.push(""),x.push(""),x.push(0);C.push(x)}c+=1}else c=0}C.unshift(["#","Căn hộ","Số lượng","Biểu phí","Đã thanh toán đến","Thành tiền"]),setTimeout(()=>{vt(C,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8","thong-tin-dich-vu-luu-so-su-dung",".xlsx"),Tt.success({description:n.success,message:n.export_data_success}),u()},3e3)})()},[]),[y]},be=({hideModalExportData:u,filter:p,totalItem:g,serviceName:h})=>{const[s]=Ct({hideModalExportData:u,filter:p,totalItem:g,serviceName:h});return t(Te,{open:!0,closable:!1,footer:!1,children:t(yt,{strokeColor:{from:"#108ee9",to:"#87d068"},percent:s,status:"active",css:y=>({marginTop:y.margin.xs})})})};be.propTypes={hideModalExportData:e.func,filter:e.objectOf(e.any),totalItem:e.number,serviceName:e.string};be.defaultProps={hideModalExportData:()=>{},filter:void 0,totalItem:0,serviceName:""};const mo=()=>{const{setVisibleSearchBox:u,setTitlePage:p,setVisibleFilterBox:g}=I.useContext(ke),h=Le(),{idBuilding:s}=h,{serviceInUses:y,getServiceInUses:b}=st(),[C,c]=I.useState(""),[a,o]=I.useState({...R}),[S,L]=I.useState(1),[F,x]=I.useState(U),[f,T]=I.useState([]),[v,E]=I.useState([]),[w,m]=I.useState(0),[A,P]=I.useState(),[j,J]=I.useState(!1),[oe,B]=I.useState(!1),[ie,Q]=I.useState(""),[ne,Z,re]=ue(),[se,ce,i]=ue(),[l,_,le]=ue(),[z]=te.useForm(),{getPermissionByModuleCode:ee}=tt(),M=ee(at),Y=(M==null?void 0:M[ot])??!1,de=(M==null?void 0:M[it])??!1,H=async r=>{const d=await mt({idBuilding:s,filter:{serviceId:r.serviceId,serviceType:r.serviceType,unitName:r.apartment,unitGroupId:s,contractTemplateId:r.contractTemplateId?r.contractTemplateId:void 0}});return P(d==null?void 0:d.data),d},q=async(r,d,D)=>{const k=await Oe({idBuilding:s,filter:{serviceId:r.serviceId,serviceType:r.serviceType,unitName:r.apartment,unitGroupId:s,contractTemplateId:r.contractTemplateId?r.contractTemplateId:void 0},page:d,limit:D});return E((k==null?void 0:k.data)??[]),m((k==null?void 0:k.totalRecord)??0),k},Me=async()=>{var D,k;J(!0);const r=await b({idBuilding:s,filter:{serviceType:nt}}),d=(r==null?void 0:r.data)??[];if(d.length>0){const $=((k=(D=r==null?void 0:r.data)==null?void 0:D[0])==null?void 0:k.id)??"",O=d.find(je=>je.id===$);Q((O==null?void 0:O.name)??""),c($),o({...R,serviceId:$,serviceType:O==null?void 0:O.serviceType});const me=await we({idBuilding:s,filter:{serviceId:$}});T(me==null?void 0:me.data),await q({...R,serviceId:$,serviceType:O==null?void 0:O.serviceType},S,F),await H({...R,serviceId:$,serviceType:O==null?void 0:O.serviceType})}J(!1)};I.useEffect(()=>(u(!0),g(!0),p(n.save_number_use),(async()=>await Me())(),()=>{u(!1),g(!1),p("")}),[]);const De=async r=>{if(r!==C){B(!0);const d=y.find(k=>k.id===r);Q((d==null?void 0:d.name)??""),c(r),o({...R,serviceId:r,serviceType:d==null?void 0:d.serviceType}),L(1),x(U);const D=await we({idBuilding:s,filter:{serviceId:r}});T(D==null?void 0:D.data),await q({...R,serviceId:r,serviceType:d==null?void 0:d.serviceType},1,U),await H({...R,serviceId:r,serviceType:d==null?void 0:d.serviceType}),z.resetFields(),B(!1)}},Ue=async r=>{B(!0),o({...a,...r}),await q({...a,...r},S,F),await H({...a,...r}),B(!1)},Ve=async(r,d)=>{B(!0),r!==S&&L(r),d!==F&&x(d),await q({...a},r,d),B(!1)},Ge=async()=>{B(!0),o({...R,...a}),L(1),x(U),await q({...R,serviceId:a.serviceId,serviceType:a.serviceType},1,U),await H({...R,serviceId:a.serviceId,serviceType:a.serviceType}),B(!1)},Ee=f.length===0?["IMPORT","EXPORT","EDIT"]:[];return j?t(rt,{isLoading:j}):N(Be,{style:{flex:1,height:"100%"},children:[t(V,{style:{flex:1},span:"3",children:t(ut,{menuActiveKey:C,handleSelectService:De,services:y})}),N(V,{style:{flex:1,display:"flex",flexDirection:"column",position:"relative"},span:"21",children:[f.length===0?t(ft,{}):null,t(xe,{formFilter:z,contractTemplates:f,handleFilterChange:Ue}),N(pe,{style:{flex:1},children:[t(pe.Header,{children:t(ye,{totalItem:w,showFormImportContract:Z,hiddenAction:Ee,showFormExportContract:ce,servicePermissionWrite:Y,servicePermissionExport:de})}),t(pe.Content,{fluid:!0,children:t(Se,{totalPayment:A,totalItem:w,idBuilding:s,filterObj:a,handleTablePageChange:Ve,loading:oe,apartments:v,tablePage:S,tablePageSize:F,triggerGetContracts:q,triggerGetTotalPayment:H,showFormDetailContractTemplate:_,hiddenAction:Ee,servicePermissionWrite:Y})})]}),ne.isShow&&t(ve,{idBuilding:s,onHide:re,refreshContracts:Ge,feeNotificationPeriod:a.feeNotificationPeriod,opening:a.opening,closing:a.closing,idService:a.serviceId,serviceType:a.serviceType,contractTemplates:f}),l.isShow&&t(Ce,{contractTemplate:l.data.contractTemplate,hideModal:le}),se.isShow?t(be,{hideModalExportData:i,filter:a,totalItem:w,serviceName:ie}):null]})]})};export{mo as default};
