import{e as un,g as zn}from"./@babel-b64fd0f9.js";import{c as Vn}from"./redux-10bbab4c.js";var k=function(n){return"@@redux-saga/"+n},Qn=k("CANCEL_PROMISE"),fn=k("CHANNEL_END"),sn=k("IO"),tn=k("MATCH"),ln=k("MULTICAST"),vn=k("SAGA_ACTION"),dn=k("SELF_CANCELLATION"),Yn=k("TASK"),O=k("TASK_CANCEL"),gn=k("TERMINATE"),Zn=k("LOCATION"),hn=function(n){return n==null},P=function(n){return n!=null},y=function(n){return typeof n=="function"},z=function(n){return typeof n=="string"},R=Array.isArray,K=function(n){return n&&y(n.then)},V=function(n){return n&&y(n.next)&&y(n.throw)},rn=function e(n){return n&&(z(n)||pn(n)||y(n)||R(n)&&n.every(e))},Q=function(n){return n&&y(n.take)&&y(n.close)},En=function(n){return y(n)&&n.hasOwnProperty("toString")},pn=function(n){return!!n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype},$n=function(n){return Q(n)&&n[ln]},Jn=function(n){return function(){return n}},_n=Jn(!0),m=function(){},ne=function(n){return n},Y=function(n,t){un(n,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(function(r){n[r]=t[r]})},ee=function(n,t){var r;return(r=[]).concat.apply(r,t.map(n))};function H(e,n){var t=e.indexOf(n);t>=0&&e.splice(t,1)}function te(e){var n=!1;return function(){n||(n=!0,e())}}var re=function(n){throw n},ae=function(n){return{value:n,done:!0}};function X(e,n,t){n===void 0&&(n=re),t===void 0&&(t="iterator");var r={meta:{name:t},next:e,throw:n,return:ae,isSagaIterator:!0};return typeof Symbol<"u"&&(r[Symbol.iterator]=function(){return r}),r}function oe(e,n){var t=n.sagaStack;console.error(e),console.error(t)}var Sn=function(n){return Array.apply(null,new Array(n))},ce=function(n){return function(t){return n(Object.defineProperty(t,vn,{value:!0}))}},mn=function(n){return n===gn},yn=function(n){return n===O},An=function(n){return mn(n)||yn(n)};function Cn(e,n){var t=Object.keys(e),r=t.length,c=0,f,u=R(e)?Sn(r):{},o={};function a(){c===r&&(f=!0,n(u))}return t.forEach(function(i){var s=function(v,d){f||(d||An(v)?(n.cancel(),n(v,d)):(u[i]=v,c++,a()))};s.cancel=m,o[i]=s}),n.cancel=function(){f||(f=!0,t.forEach(function(i){return o[i].cancel()}))},o}function Z(e){return{name:e.name||"anonymous",location:Tn(e)}}function Tn(e){return e[Zn]}var ue="Channel's Buffer overflow!",fe=1,ie=3,xn=4;function se(e,n){e===void 0&&(e=10);var t=new Array(e),r=0,c=0,f=0,u=function(s){t[c]=s,c=(c+1)%e,r++},o=function(){if(r!=0){var s=t[f];return t[f]=null,r--,f=(f+1)%e,s}},a=function(){for(var s=[];r;)s.push(o());return s};return{isEmpty:function(){return r==0},put:function(s){if(r<e)u(s);else{var l;switch(n){case fe:throw new Error(ue);case ie:t[c]=s,c=(c+1)%e,f=c;break;case xn:l=2*e,t=a(),r=t.length,c=t.length,f=0,t.length=l,e=l,u(s);break}}},take:o,flush:a}}var le=function(n){return se(n,xn)},U="TAKE",kn="PUT",Nn="ALL",ve="RACE",Ln="CALL",de="CPS",Rn="FORK",ge="JOIN",wn="CANCEL",he="SELECT",Ee="ACTION_CHANNEL",pe="CANCELLED",Se="FLUSH",me="GET_CONTEXT",ye="SET_CONTEXT",L=function(n,t){var r;return r={},r[sn]=!0,r.combinator=!1,r.type=n,r.payload=t,r};function Ae(e,n){if(e===void 0&&(e="*"),rn(e))return P(n)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),L(U,{pattern:e});if($n(e)&&P(n)&&rn(n))return L(U,{channel:e,pattern:n});if(Q(e))return P(n)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),L(U,{channel:e})}function ft(e,n){return hn(n)&&(n=e,e=void 0),L(kn,{channel:e,action:n})}function it(e){var n=L(Nn,e);return n.combinator=!0,n}function In(e,n){var t=null,r;return y(e)?r=e:(R(e)?(t=e[0],r=e[1]):(t=e.context,r=e.fn),t&&z(r)&&y(t[r])&&(r=t[r])),{context:t,fn:r,args:n}}function st(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return L(Ln,In(e,t))}function Mn(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return L(Rn,In(e,t))}function Ce(e){return e===void 0&&(e=dn),L(wn,e)}function Te(){var e={};return e.promise=new Promise(function(n,t){e.resolve=n,e.reject=t}),e}var On=[],b=0;function xe(e){try{$(),e()}finally{qn()}}function jn(e){On.push(e),b||($(),Pn())}function Fn(e){try{return $(),e()}finally{Pn()}}function $(){b++}function qn(){b--}function Pn(){qn();for(var e;!b&&(e=On.shift())!==void 0;)xe(e)}var ke=function(n){return function(t){return n.some(function(r){return J(r)(t)})}},Ne=function(n){return function(t){return n(t)}},an=function(n){return function(t){return t.type===String(n)}},Le=function(n){return function(t){return t.type===n}},Un=function(){return _n};function J(e){var n=e==="*"?Un:z(e)?an:R(e)?ke:En(e)?an:y(e)?Ne:pn(e)?Le:null;if(n===null)throw new Error("invalid pattern: "+e);return n(e)}var j={type:fn},_=function(n){return n&&n.type===fn};function Re(e){e===void 0&&(e=le());var n=!1,t=[];function r(o){if(!n){if(t.length===0)return e.put(o);var a=t.shift();a(o)}}function c(o){n&&e.isEmpty()?o(j):e.isEmpty()?(t.push(o),o.cancel=function(){H(t,o)}):o(e.take())}function f(o){if(n&&e.isEmpty()){o(j);return}o(e.flush())}function u(){if(!n){n=!0;var o=t;t=[];for(var a=0,i=o.length;a<i;a++){var s=o[a];s(j)}}}return{take:c,put:r,flush:f,close:u}}function we(){var e,n=!1,t=[],r=t,c=function(){r===t&&(r=t.slice())},f=function(){n=!0;var o=t=r;r=[],o.forEach(function(a){a(j)})};return e={},e[ln]=!0,e.put=function(o){if(!n){if(_(o)){f();return}for(var a=t=r,i=0,s=a.length;i<s;i++){var l=a[i];l[tn](o)&&(l.cancel(),l(o))}}},e.take=function(o,a){if(a===void 0&&(a=Un),n){o(j);return}o[tn]=a,c(),r.push(o),o.cancel=te(function(){c(),H(r,o)})},e.close=f,e}function Dn(){var e=we(),n=e.put;return e.put=function(t){if(t[vn]){n(t);return}jn(function(){n(t)})},e}var M=0,N=1,D=2,Kn=3;function nn(e,n){var t=e[Qn];y(t)&&(n.cancel=t),e.then(n,function(r){n(r,!0)})}var q=0,Hn=function(){return++q},S;function Ie(e,n){return e.isSagaIterator?{name:e.meta.name}:Z(n)}function Me(e){var n=e.context,t=e.fn,r=e.args;try{var c=t.apply(n,r);if(V(c))return c;var f=!1,u=function(a){return f?{value:a,done:!0}:(f=!0,{value:c,done:!K(c)})};return X(u)}catch(o){return X(function(){throw o})}}function Oe(e,n,t){var r=n.channel,c=n.action,f=n.resolve;jn(function(){var u;try{u=(r?r.put:e.dispatch)(c)}catch(o){t(o,!0);return}f&&K(u)?nn(u,t):t(u)})}function je(e,n,t){var r=n.channel,c=r===void 0?e.channel:r,f=n.pattern,u=n.maybe,o=function(i){if(i instanceof Error){t(i,!0);return}if(_(i)&&!u){t(gn);return}t(i)};try{c.take(o,P(f)?J(f):null)}catch(a){t(a,!0);return}t.cancel=o.cancel}function Fe(e,n,t,r){var c=n.context,f=n.fn,u=n.args,o=r.task;try{var a=f.apply(c,u);if(K(a)){nn(a,t);return}if(V(a)){W(e,a,o.context,q,Z(f),!1,t);return}t(a)}catch(i){t(i,!0)}}function qe(e,n,t){var r=n.context,c=n.fn,f=n.args;try{var u=function(a,i){hn(a)?t(i):t(a,!0)};c.apply(r,f.concat(u)),u.cancel&&(t.cancel=u.cancel)}catch(o){t(o,!0)}}function Pe(e,n,t,r){var c=n.context,f=n.fn,u=n.args,o=n.detached,a=r.task,i=Me({context:c,fn:f,args:u}),s=Ie(i,f);Fn(function(){var l=W(e,i,a.context,q,s,o,void 0);o?t(l):l.isRunning()?(a.queue.addTask(l),t(l)):l.isAborted()?a.queue.abort(l.error()):t(l)})}function Ue(e,n,t,r){var c=r.task,f=function(a,i){if(a.isRunning()){var s={task:c,cb:i};i.cancel=function(){a.isRunning()&&H(a.joiners,s)},a.joiners.push(s)}else a.isAborted()?i(a.error(),!0):i(a.result())};if(R(n)){if(n.length===0){t([]);return}var u=Cn(n,t);n.forEach(function(o,a){f(o,u[a])})}else f(n,t)}function G(e){e.isRunning()&&e.cancel()}function De(e,n,t,r){var c=r.task;n===dn?G(c):R(n)?n.forEach(G):G(n),t()}function Ke(e,n,t,r){var c=r.digestEffect,f=q,u=Object.keys(n);if(u.length===0){t(R(n)?[]:{});return}var o=Cn(n,t);u.forEach(function(a){c(n[a],f,o[a],a)})}function He(e,n,t,r){var c=r.digestEffect,f=q,u=Object.keys(n),o=R(n)?Sn(u.length):{},a={},i=!1;u.forEach(function(s){var l=function(d,p){i||(p||An(d)?(t.cancel(),t(d,p)):(t.cancel(),i=!0,o[s]=d,t(o)))};l.cancel=m,a[s]=l}),t.cancel=function(){i||(i=!0,u.forEach(function(s){return a[s].cancel()}))},u.forEach(function(s){i||c(n[s],f,a[s],s)})}function be(e,n,t){var r=n.selector,c=n.args;try{var f=r.apply(void 0,[e.getState()].concat(c));t(f)}catch(u){t(u,!0)}}function We(e,n,t){var r=n.pattern,c=n.buffer,f=Re(c),u=J(r),o=function i(s){_(s)||e.channel.take(i,u),f.put(s)},a=f.close;f.close=function(){o.cancel(),a()},e.channel.take(o,u),t(f)}function Ge(e,n,t,r){var c=r.task;t(c.isCancelled())}function Be(e,n,t){n.flush(t)}function Xe(e,n,t,r){var c=r.task;t(c.context[n])}function ze(e,n,t,r){var c=r.task;Y(c.context,n),t()}var Ve=(S={},S[U]=je,S[kn]=Oe,S[Nn]=Ke,S[ve]=He,S[Ln]=Fe,S[de]=qe,S[Rn]=Pe,S[ge]=Ue,S[wn]=De,S[he]=be,S[Ee]=We,S[pe]=Ge,S[Se]=Be,S[me]=Xe,S[ye]=ze,S);function Qe(e,n,t){var r=[],c,f=!1;a(e);var u=function(){return r};function o(s){n(),i(),t(s,!0)}function a(s){r.push(s),s.cont=function(l,v){f||(H(r,s),s.cont=m,v?o(l):(s===e&&(c=l),r.length||(f=!0,t(c))))}}function i(){f||(f=!0,r.forEach(function(s){s.cont=m,s.cancel()}),r=[])}return{addTask:a,cancelAll:i,abort:o,getTasks:u}}function bn(e,n){return e+"?"+n}function Ye(e){var n=Tn(e);if(n){var t=n.code,r=n.fileName,c=n.lineNumber,f=t+"  "+bn(r,c);return f}return""}function on(e){var n=e.name,t=e.location;return t?n+"  "+bn(t.fileName,t.lineNumber):n}function Ze(e){var n=ee(function(t){return t.cancelledTasks},e);return n.length?["Tasks cancelled due to error:"].concat(n).join(`
`):""}var en=null,F=[],$e=function(n){n.crashedEffect=en,F.push(n)},Wn=function(){en=null,F.length=0},Je=function(n){en=n},_e=function(){var n=F[0],t=F.slice(1),r=n.crashedEffect?Ye(n.crashedEffect):null,c="The above error occurred in task "+on(n.meta)+(r?` 
 when executing effect `+r:"");return[c].concat(t.map(function(f){return"    created by "+on(f.meta)}),[Ze(F)]).join(`
`)};function nt(e,n,t,r,c,f,u){var o;u===void 0&&(u=m);var a=M,i,s,l=null,v=[],d=Object.create(t),p=Qe(n,function(){v.push.apply(v,p.getTasks().map(function(x){return x.meta.name}))},A);function h(){a===M&&(a=N,p.cancelAll(),A(O,!1))}function A(g,x){if(!x)g===O?a=N:a!==N&&(a=Kn),i=g,l&&l.resolve(g);else{if(a=D,$e({meta:c,cancelledTasks:v}),C.isRoot){var w=_e();Wn(),e.onError(g,{sagaStack:w})}s=g,l&&l.reject(g)}C.cont(g,x),C.joiners.forEach(function(I){I.cb(g,x)}),C.joiners=null}function E(g){Y(d,g)}function T(){return l||(l=Te(),a===D?l.reject(s):a!==M&&l.resolve(i)),l.promise}var C=(o={},o[Yn]=!0,o.id=r,o.meta=c,o.isRoot=f,o.context=d,o.joiners=[],o.queue=p,o.cancel=h,o.cont=u,o.end=A,o.setContext=E,o.toPromise=T,o.isRunning=function(){return a===M},o.isCancelled=function(){return a===N||a===M&&n.status===N},o.isAborted=function(){return a===D},o.result=function(){return i},o.error=function(){return s},o);return C}function W(e,n,t,r,c,f,u){var o=e.finalizeRunEffect(d);v.cancel=m;var a={meta:c,cancel:l,status:M},i=nt(e,a,t,r,c,f,u),s={task:i,digestEffect:p};function l(){a.status===M&&(a.status=N,v(O))}return u&&(u.cancel=i.cancel),v(),i;function v(h,A){try{var E;A?(E=n.throw(h),Wn()):yn(h)?(a.status=N,v.cancel(),E=y(n.return)?n.return(O):{done:!0,value:O}):mn(h)?E=y(n.return)?n.return():{done:!0}:E=n.next(h),E.done?(a.status!==N&&(a.status=Kn),a.cont(E.value)):p(E.value,r,v)}catch(T){if(a.status===N)throw T;a.status=D,a.cont(T,!0)}}function d(h,A,E){if(K(h))nn(h,E);else if(V(h))W(e,h,i.context,A,c,!1,E);else if(h&&h[sn]){var T=Ve[h.type];T(e,h.payload,E,s)}else E(h)}function p(h,A,E,T){T===void 0&&(T="");var C=Hn();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:C,parentEffectId:A,label:T,effect:h});var g;function x(w,I){g||(g=!0,E.cancel=m,e.sagaMonitor&&(I?e.sagaMonitor.effectRejected(C,w):e.sagaMonitor.effectResolved(C,w)),I&&Je(h),E(w,I))}x.cancel=m,E.cancel=function(){g||(g=!0,x.cancel(),x.cancel=m,e.sagaMonitor&&e.sagaMonitor.effectCancelled(C))},o(h,C,x)}}function et(e,n){for(var t=e.channel,r=t===void 0?Dn():t,c=e.dispatch,f=e.getState,u=e.context,o=u===void 0?{}:u,a=e.sagaMonitor,i=e.effectMiddlewares,s=e.onError,l=s===void 0?oe:s,v=arguments.length,d=new Array(v>2?v-2:0),p=2;p<v;p++)d[p-2]=arguments[p];var h=n.apply(void 0,d),A=Hn();a&&(a.rootSagaStarted=a.rootSagaStarted||m,a.effectTriggered=a.effectTriggered||m,a.effectResolved=a.effectResolved||m,a.effectRejected=a.effectRejected||m,a.effectCancelled=a.effectCancelled||m,a.actionDispatched=a.actionDispatched||m,a.rootSagaStarted({effectId:A,saga:n,args:d}));var E;if(i){var T=Vn.apply(void 0,i);E=function(x){return function(w,I,Gn){var Bn=function(Xn){return x(Xn,I,Gn)};return T(Bn)(w)}}}else E=ne;var C={channel:r,dispatch:ce(c),getState:f,sagaMonitor:a,onError:l,finalizeRunEffect:E};return Fn(function(){var g=W(C,h,o,A,Z(n),!0,void 0);return a&&a.effectResolved(A,g),g})}function lt(e){var n=e===void 0?{}:e,t=n.context,r=t===void 0?{}:t,c=n.channel,f=c===void 0?Dn():c,u=n.sagaMonitor,o=zn(n,["context","channel","sagaMonitor"]),a;function i(s){var l=s.getState,v=s.dispatch;return a=et.bind(null,un({},o,{context:r,channel:f,dispatch:v,getState:l,sagaMonitor:u})),function(d){return function(p){u&&u.actionDispatched&&u.actionDispatched(p);var h=d(p);return f.put(p),h}}}return i.run=function(){return a.apply(void 0,arguments)},i.setContext=function(s){Y(r,s)},i}var cn=function(n){return{done:!0,value:n}},B={};function tt(e){return Q(e)?"channel":En(e)?String(e):y(e)?e.name:String(e)}function rt(e,n,t){var r,c,f,u=n;function o(a,i){if(u===B)return cn(a);if(i&&!c)throw u=B,i;r&&r(a);var s=i?e[c](i):e[u]();return u=s.nextState,f=s.effect,r=s.stateUpdater,c=s.errorState,u===B?cn(a):f}return X(o,function(a){return o(null,a)},t)}function at(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),c=2;c<t;c++)r[c-2]=arguments[c];var f={done:!1,value:Ae(e)},u=function(d){return{done:!1,value:Mn.apply(void 0,[n].concat(r,[d]))}},o=function(d){return{done:!1,value:Ce(d)}},a,i,s=function(d){return a=d},l=function(d){return i=d};return rt({q1:function(){return{nextState:"q2",effect:f,stateUpdater:l}},q2:function(){return a?{nextState:"q3",effect:o(a)}:{nextState:"q1",effect:u(i),stateUpdater:s}},q3:function(){return{nextState:"q1",effect:u(i),stateUpdater:s}}},"q1","takeLatest("+tt(e)+", "+n.name+")")}function vt(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),c=2;c<t;c++)r[c-2]=arguments[c];return Mn.apply(void 0,[at,e,n].concat(r))}export{it as a,st as c,ft as p,lt as s,vt as t};
