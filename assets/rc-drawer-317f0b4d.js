import{e as I,a as c,c as le,d as ce}from"./@babel-b64fd0f9.js";import{r as a}from"./react-4fd50329.js";import{P as Me}from"./@rc-component-5a112e55.js";import{w as be,z as ge,K as re,a as ue}from"./rc-util-0bc219f3.js";import{c as B}from"./classnames-4ba1ba1a.js";import{C as de}from"./rc-motion-ae889c42.js";var ve=a.createContext(null),Ee=function(n){var u=n.prefixCls,C=n.className,d=n.style,v=n.children,l=n.containerRef,i=n.id,s=n.onMouseEnter,N=n.onMouseOver,f=n.onMouseLeave,x=n.onClick,b=n.onKeyDown,O=n.onKeyUp,g={onMouseEnter:s,onMouseOver:N,onMouseLeave:f,onClick:x,onKeyDown:b,onKeyUp:O};return a.createElement(a.Fragment,null,a.createElement("div",I({id:i,className:B("".concat(u,"-content"),C),style:c({},d),"aria-modal":"true",role:"dialog",ref:l},g),v))};function fe(e){return typeof e=="string"&&String(Number(e))===e?(be(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var me={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function Se(e,n){var u,C,d,v,l=e.prefixCls,i=e.open,s=e.placement,N=e.inline,f=e.push,x=e.forceRender,b=e.autoFocus,O=e.keyboard,g=e.rootClassName,F=e.rootStyle,R=e.zIndex,V=e.className,A=e.id,H=e.style,h=e.motion,X=e.width,Y=e.height,j=e.children,q=e.contentWrapperStyle,G=e.mask,J=e.maskClosable,Q=e.maskMotion,Z=e.maskClassName,$=e.maskStyle,k=e.afterOpenChange,P=e.onClose,p=e.onMouseEnter,z=e.onMouseOver,ee=e.onMouseLeave,ne=e.onClick,m=e.onKeyDown,T=e.onKeyUp,y=a.useRef(),L=a.useRef(),_=a.useRef();a.useImperativeHandle(n,function(){return y.current});var ae=function(r){var K=r.keyCode,D=r.shiftKey;switch(K){case re.TAB:{if(K===re.TAB){if(!D&&document.activeElement===_.current){var te;(te=L.current)===null||te===void 0||te.focus({preventScroll:!0})}else if(D&&document.activeElement===L.current){var oe;(oe=_.current)===null||oe===void 0||oe.focus({preventScroll:!0})}}break}case re.ESC:{P&&O&&(r.stopPropagation(),P(r));break}}};a.useEffect(function(){if(i&&b){var t;(t=y.current)===null||t===void 0||t.focus({preventScroll:!0})}},[i]);var ie=a.useState(!1),E=le(ie,2),U=E[0],S=E[1],o=a.useContext(ve),W;f===!1?W={distance:0}:f===!0?W={}:W=f||{};var w=(u=(C=(d=W)===null||d===void 0?void 0:d.distance)!==null&&C!==void 0?C:o==null?void 0:o.pushDistance)!==null&&u!==void 0?u:180,ye=a.useMemo(function(){return{pushDistance:w,push:function(){S(!0)},pull:function(){S(!1)}}},[w]);a.useEffect(function(){if(i){var t;o==null||(t=o.push)===null||t===void 0||t.call(o)}else{var r;o==null||(r=o.pull)===null||r===void 0||r.call(o)}},[i]),a.useEffect(function(){return function(){var t;o==null||(t=o.pull)===null||t===void 0||t.call(o)}},[]);var Ce=G&&a.createElement(de,I({key:"mask"},Q,{visible:i}),function(t,r){var K=t.className,D=t.style;return a.createElement("div",{className:B("".concat(l,"-mask"),K,Z),style:c(c({},D),$),onClick:J&&i?P:void 0,ref:r})}),he=typeof h=="function"?h(s):h,M={};if(U&&w)switch(s){case"top":M.transform="translateY(".concat(w,"px)");break;case"bottom":M.transform="translateY(".concat(-w,"px)");break;case"left":M.transform="translateX(".concat(w,"px)");break;default:M.transform="translateX(".concat(-w,"px)");break}s==="left"||s==="right"?M.width=fe(X):M.height=fe(Y);var ke={onMouseEnter:p,onMouseOver:z,onMouseLeave:ee,onClick:ne,onKeyDown:m,onKeyUp:T},we=a.createElement(de,I({key:"panel"},he,{visible:i,forceRender:x,onVisibleChanged:function(r){k==null||k(r)},removeOnLeave:!1,leavedClassName:"".concat(l,"-content-wrapper-hidden")}),function(t,r){var K=t.className,D=t.style;return a.createElement("div",I({className:B("".concat(l,"-content-wrapper"),K),style:c(c(c({},M),D),q)},ge(e,{data:!0})),a.createElement(Ee,I({id:A,containerRef:r,prefixCls:l,className:V,style:H},ke),j))}),se=c({},F);return R&&(se.zIndex=R),a.createElement(ve.Provider,{value:ye},a.createElement("div",{className:B(l,"".concat(l,"-").concat(s),g,(v={},ce(v,"".concat(l,"-open"),i),ce(v,"".concat(l,"-inline"),N),v)),style:se,tabIndex:-1,ref:y,onKeyDown:ae},Ce,a.createElement("div",{tabIndex:0,ref:L,style:me,"aria-hidden":"true","data-sentinel":"start"}),we,a.createElement("div",{tabIndex:0,ref:_,style:me,"aria-hidden":"true","data-sentinel":"end"})))}var Ke=a.forwardRef(Se),Le=function(n){var u=n.open,C=u===void 0?!1:u,d=n.prefixCls,v=d===void 0?"rc-drawer":d,l=n.placement,i=l===void 0?"right":l,s=n.autoFocus,N=s===void 0?!0:s,f=n.keyboard,x=f===void 0?!0:f,b=n.width,O=b===void 0?378:b,g=n.mask,F=g===void 0?!0:g,R=n.maskClosable,V=R===void 0?!0:R,A=n.getContainer,H=n.forceRender,h=n.afterOpenChange,X=n.destroyOnClose,Y=n.onMouseEnter,j=n.onMouseOver,q=n.onMouseLeave,G=n.onClick,J=n.onKeyDown,Q=n.onKeyUp,Z=a.useState(!1),$=le(Z,2),k=$[0],P=$[1],p=a.useState(!1),z=le(p,2),ee=z[0],ne=z[1];ue(function(){ne(!0)},[]);var m=ee?C:!1,T=a.useRef(),y=a.useRef();ue(function(){m&&(y.current=document.activeElement)},[m]);var L=function(E){var U;if(P(E),h==null||h(E),!E&&y.current&&!(!((U=T.current)===null||U===void 0)&&U.contains(y.current))){var S;(S=y.current)===null||S===void 0||S.focus({preventScroll:!0})}};if(!H&&!k&&!m&&X)return null;var _={onMouseEnter:Y,onMouseOver:j,onMouseLeave:q,onClick:G,onKeyDown:J,onKeyUp:Q},ae=c(c({},n),{},{open:m,prefixCls:v,placement:i,autoFocus:N,keyboard:x,width:O,mask:F,maskClosable:V,inline:A===!1,afterOpenChange:L,ref:T},_);return a.createElement(Me,{open:m||H||k,autoDestroy:!1,getContainer:A,autoLock:F&&(m||k)},a.createElement(Ke,ae))};export{Le as D};
