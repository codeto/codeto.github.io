import{c as V,e as ce,_ as Ve,b as we,a as x,d as I,f as ne}from"./@babel-b64fd0f9.js";import{r as n}from"./react-4fd50329.js";import{j as $t,a as Dn,s as Ht,t as Pt,f as Ae,M as Bn,E as On,c as Bt,H as zn,x as Ot,g as Fn,p as zt,w as Ft,z as Wt}from"./rc-util-0bc219f3.js";import{c as se}from"./classnames-4ba1ba1a.js";import{s as ln}from"./shallowequal-4542d6f7.js";import{R as cn}from"./rc-resize-observer-b9ad4e29.js";function Kt(e){return null}function At(e){return null}var Dt="RC_TABLE_KEY";function Vn(e){return e==null?[]:Array.isArray(e)?e:[e]}function Un(e,t){if(!t&&typeof t!="number")return e;for(var r=Vn(t),a=e,o=0;o<r.length;o+=1){if(!a)return null;var i=r[o];a=a[i]}return a}function Ue(e){var t=[],r={};return e.forEach(function(a){for(var o=a||{},i=o.key,c=o.dataIndex,s=i||Vn(c).join("-")||Dt;r[s];)s="".concat(s,"_next");r[s]=!0,t.push(s)}),t}function rn(e){return e!=null}var Xn=n.createContext(!1);function Vt(){var e=n.createContext(null),t=function(a){var o=a.value,i=a.children,c=n.useRef(o);c.current=o;var s=n.useState(function(){return{getValue:function(){return c.current},listeners:new Set}}),l=V(s,1),d=l[0];return Dn(function(){d.listeners.forEach(function(f){f(o)})},[o]),n.createElement(e.Provider,{value:d},i)};return{Context:e,Provider:t}}function Ut(e,t){var r=$t(t),a=n.useContext(e==null?void 0:e.Context),o=a||{},i=o.listeners,c=o.getValue,s=n.useState(function(){return r(a?c():null)}),l=V(s,2),d=l[0],f=l[1];return Dn(function(){if(!a)return;function u(m){f(function(v){var p=r(m);return ln(v,p)?v:p})}return i.add(u),function(){i.delete(u)}},[a]),d}var jn=Vt(),Xe=n.createContext(null),Yn=n.createContext({renderWithProps:!1}),Xt=["colSpan","rowSpan","style","className"];function jt(e,t,r,a){var o=e+t-1;return e<=a&&o>=r}function Yt(e){return e&&Ve(e)==="object"&&!Array.isArray(e)&&!n.isValidElement(e)}function _t(e){return typeof e=="string"?!0:Ht(e)}var Gt=function(t){var r=t.ellipsis,a=t.rowType,o=t.children,i,c=r===!0?{showTitle:!0}:r;return c&&(c.showTitle||a==="header")&&(typeof o=="string"||typeof o=="number"?i=o.toString():n.isValidElement(o)&&typeof o.props.children=="string"&&(i=o.props.children)),i};function qt(e,t){var r,a,o,i=e.prefixCls,c=e.className,s=e.record,l=e.index,d=e.renderIndex,f=e.dataIndex,u=e.render,m=e.children,v=e.component,p=v===void 0?"td":v,E=e.colSpan,y=e.rowSpan,N=e.fixLeft,b=e.fixRight,O=e.firstFixLeft,D=e.lastFixLeft,L=e.firstFixRight,T=e.lastFixRight,z=e.appendNode,H=e.additionalProps,P=H===void 0?{}:H,F=e.ellipsis,W=e.align,g=e.rowType,$=e.isSticky,R=e.hovering,B=e.onHover,h="".concat(i,"-cell"),w=n.useContext(Yn),S=n.useContext(Xn),U=n.useContext(Xe),_=U.allColumnsFixedLeft,ae=n.useMemo(function(){if(rn(m))return[m];var fe=Un(s,f),M=fe,j=void 0;if(u){var ve=u(fe,s,d);Yt(ve)?(M=ve.children,j=ve.props,w.renderWithProps=!0):M=ve}return[M,j]},[w.renderWithProps?Math.random():0,m,f,w,s,u,d]),J=V(ae,2),de=J[0],Y=J[1],te=de;Ve(te)==="object"&&!Array.isArray(te)&&!n.isValidElement(te)&&(te=null),F&&(D||L)&&(te=n.createElement("span",{className:"".concat(h,"-content")},te));var Q=Y||{},pe=Q.colSpan,xe=Q.rowSpan,he=Q.style,Te=Q.className,Ee=we(Q,Xt),X=(r=pe!==void 0?pe:E)!==null&&r!==void 0?r:1,G=(a=xe!==void 0?xe:y)!==null&&a!==void 0?a:1;if(X===0||G===0)return null;var K={},q=typeof N=="number"&&S,oe=typeof b=="number"&&S;q&&(K.position="sticky",K.left=N),oe&&(K.position="sticky",K.right=b);var Z={};W&&(Z.textAlign=W);var Re=function(M){var j;s&&B(l,l+G-1),P==null||(j=P.onMouseEnter)===null||j===void 0||j.call(P,M)},Se=function(M){var j;s&&B(-1,-1),P==null||(j=P.onMouseLeave)===null||j===void 0||j.call(P,M)},Ne=Gt({rowType:g,ellipsis:F,children:de}),He=x(x(x({title:Ne},Ee),P),{},{colSpan:X!==1?X:null,rowSpan:G!==1?G:null,className:se(h,c,(o={},I(o,"".concat(h,"-fix-left"),q&&S),I(o,"".concat(h,"-fix-left-first"),O&&S),I(o,"".concat(h,"-fix-left-last"),D&&S),I(o,"".concat(h,"-fix-left-all"),D&&_&&S),I(o,"".concat(h,"-fix-right"),oe&&S),I(o,"".concat(h,"-fix-right-first"),L&&S),I(o,"".concat(h,"-fix-right-last"),T&&S),I(o,"".concat(h,"-ellipsis"),F),I(o,"".concat(h,"-with-append"),z),I(o,"".concat(h,"-fix-sticky"),(q||oe)&&$&&S),I(o,"".concat(h,"-row-hover"),!Y&&R),o),P.className,Te),style:x(x(x(x({},P.style),Z),K),he),onMouseEnter:Re,onMouseLeave:Se,ref:_t(p)?t:null});return n.createElement(p,He,z,te)}var _n=n.forwardRef(qt);_n.displayName="Cell";var Jt=["expanded","className","hovering"],Qt=n.memo(_n,function(e,t){return t.shouldCellUpdate?Jt.every(function(r){return e[r]===t[r]})&&!t.shouldCellUpdate(t.record,e.record):ln(e,t)}),Ie=n.forwardRef(function(e,t){var r=e.index,a=e.additionalProps,o=a===void 0?{}:a,i=e.colSpan,c=e.rowSpan,s=o.colSpan,l=o.rowSpan,d=i??s,f=c??l,u=Ut(jn,function(p){var E=jt(r,f||1,p==null?void 0:p.startRow,p==null?void 0:p.endRow);return{onHover:p==null?void 0:p.onHover,hovering:E}}),m=u.onHover,v=u.hovering;return n.createElement(Qt,ce({},e,{colSpan:d,rowSpan:f,hovering:v,ref:t,onHover:m}))});Ie.displayName="WrappedCell";var ue=n.createContext(null);function sn(e,t,r,a,o){var i=r[e]||{},c=r[t]||{},s,l;i.fixed==="left"?s=a.left[e]:c.fixed==="right"&&(l=a.right[t]);var d=!1,f=!1,u=!1,m=!1,v=r[t+1],p=r[e-1];if(o==="rtl"){if(s!==void 0){var E=p&&p.fixed==="left";m=!E}else if(l!==void 0){var y=v&&v.fixed==="right";u=!y}}else if(s!==void 0){var N=v&&v.fixed==="left";d=!N}else if(l!==void 0){var b=p&&p.fixed==="right";f=!b}return{fixLeft:s,fixRight:l,lastFixLeft:d,firstFixRight:f,lastFixRight:u,firstFixLeft:m,isSticky:a.isSticky}}function Gn(e){var t=e.cells,r=e.stickyOffsets,a=e.flattenColumns,o=e.rowComponent,i=e.cellComponent,c=e.onHeaderRow,s=e.index,l=n.useContext(ue),d=l.prefixCls,f=l.direction,u;c&&(u=c(t.map(function(v){return v.column}),s));var m=Ue(t.map(function(v){return v.column}));return n.createElement(o,u,t.map(function(v,p){var E=v.column,y=sn(v.colStart,v.colEnd,a,r,f),N;return E&&E.onHeaderCell&&(N=v.column.onHeaderCell(E)),n.createElement(Ie,ce({},v,{ellipsis:E.ellipsis,align:E.align,component:i,prefixCls:d,key:m[p]},y,{additionalProps:N,rowType:"header"}))}))}Gn.displayName="HeaderRow";function Zt(e){var t=[];function r(c,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;t[l]=t[l]||[];var d=s,f=c.filter(Boolean).map(function(u){var m={key:u.key,className:u.className||"",children:u.title,column:u,colStart:d},v=1,p=u.children;return p&&p.length>0&&(v=r(p,d,l+1).reduce(function(E,y){return E+y},0),m.hasSubColumns=!0),"colSpan"in u&&(v=u.colSpan),"rowSpan"in u&&(m.rowSpan=u.rowSpan),m.colSpan=v,m.colEnd=m.colStart+v-1,t[l].push(m),d+=v,v});return f}r(e,0);for(var a=t.length,o=function(s){t[s].forEach(function(l){!("rowSpan"in l)&&!l.hasSubColumns&&(l.rowSpan=a-s)})},i=0;i<a;i+=1)o(i);return t}function Wn(e){var t=e.stickyOffsets,r=e.columns,a=e.flattenColumns,o=e.onHeaderRow,i=n.useContext(ue),c=i.prefixCls,s=i.getComponent,l=n.useMemo(function(){return Zt(r)},[r]),d=s(["header","wrapper"],"thead"),f=s(["header","row"],"tr"),u=s(["header","cell"],"th");return n.createElement(d,{className:"".concat(c,"-thead")},l.map(function(m,v){var p=n.createElement(Gn,{key:v,flattenColumns:a,cells:m,stickyOffsets:t,rowComponent:f,cellComponent:u,onHeaderRow:o,index:v});return p}))}var qn=n.createContext(null);function Jn(e){var t=e.prefixCls,r=e.children,a=e.component,o=e.cellComponent,i=e.className,c=e.expanded,s=e.colSpan,l=e.isEmpty,d=n.useContext(ue),f=d.scrollbarSize,u=n.useContext(qn),m=u.fixHeader,v=u.fixColumn,p=u.componentWidth,E=u.horizonScroll;return n.useMemo(function(){var y=r;return(l?E:v)&&(y=n.createElement("div",{style:{width:p-(m?f:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(t,"-expanded-row-fixed")},p!==0&&y)),n.createElement(a,{className:i,style:{display:c?null:"none"}},n.createElement(Ie,{component:o,prefixCls:t,colSpan:s},y))},[r,a,i,c,s,l,f,p,v,m,E])}var Qn=n.createContext(null);function Zn(e){var t=e.className,r=e.style,a=e.record,o=e.index,i=e.renderIndex,c=e.rowKey,s=e.rowExpandable,l=e.expandedKeys,d=e.onRow,f=e.indent,u=f===void 0?0:f,m=e.rowComponent,v=e.cellComponent,p=e.childrenColumnName,E=n.useContext(ue),y=E.prefixCls,N=E.fixedInfoList,b=n.useContext(Xe),O=b.flattenColumns,D=b.expandableType,L=b.expandRowByClick,T=b.onTriggerExpand,z=b.rowClassName,H=b.expandedRowClassName,P=b.indentSize,F=b.expandIcon,W=b.expandedRowRender,g=b.expandIconColumnIndex,$=n.useState(!1),R=V($,2),B=R[0],h=R[1],w=l&&l.has(e.recordKey);n.useEffect(function(){w&&h(!0)},[w]);var S=D==="row"&&(!s||s(a)),U=D==="nest",_=p&&a&&a[p],ae=S||U,J=n.useRef(T);J.current=T;var de=function(){J.current.apply(J,arguments)},Y=d==null?void 0:d(a,o),te=function(G){var K;L&&ae&&de(a,G);for(var q=arguments.length,oe=new Array(q>1?q-1:0),Z=1;Z<q;Z++)oe[Z-1]=arguments[Z];Y==null||(K=Y.onClick)===null||K===void 0||K.call.apply(K,[Y,G].concat(oe))},Q;typeof z=="string"?Q=z:typeof z=="function"&&(Q=z(a,o,u));var pe=Ue(O),xe=n.createElement(m,ce({},Y,{"data-row-key":c,className:se(t,"".concat(y,"-row"),"".concat(y,"-row-level-").concat(u),Q,Y&&Y.className),style:x(x({},r),Y?Y.style:null),onClick:te}),O.map(function(X,G){var K=X.render,q=X.dataIndex,oe=X.className,Z=pe[G],Re=N[G],Se;G===(g||0)&&U&&(Se=n.createElement(n.Fragment,null,n.createElement("span",{style:{paddingLeft:"".concat(P*u,"px")},className:"".concat(y,"-row-indent indent-level-").concat(u)}),F({prefixCls:y,expanded:w,expandable:_,record:a,onExpand:de})));var Ne;return X.onCell&&(Ne=X.onCell(a,o)),n.createElement(Ie,ce({className:oe,ellipsis:X.ellipsis,align:X.align,component:v,prefixCls:y,key:Z,record:a,index:o,renderIndex:i,dataIndex:q,render:K,shouldCellUpdate:X.shouldCellUpdate,expanded:Se&&w},Re,{appendNode:Se,additionalProps:Ne}))})),he;if(S&&(B||w)){var Te=W(a,o,u+1,w),Ee=H&&H(a,o,u);he=n.createElement(Jn,{expanded:w,className:se("".concat(y,"-expanded-row"),"".concat(y,"-expanded-row-level-").concat(u+1),Ee),prefixCls:y,component:m,cellComponent:v,colSpan:O.length,isEmpty:!1},Te)}return n.createElement(n.Fragment,null,xe,he)}Zn.displayName="BodyRow";function et(e,t,r,a,o,i){var c=[];c.push({record:e,indent:t,index:i});var s=o(e),l=a==null?void 0:a.has(s);if(e&&Array.isArray(e[r])&&l)for(var d=0;d<e[r].length;d+=1){var f=et(e[r][d],t+1,r,a,o,d);c.push.apply(c,ne(f))}return c}function er(e,t,r,a){var o=n.useMemo(function(){if(r!=null&&r.size){for(var i=[],c=0;c<(e==null?void 0:e.length);c+=1){var s=e[c];i.push.apply(i,ne(et(s,0,t,r,a,c)))}return i}return e==null?void 0:e.map(function(l,d){return{record:l,indent:0,index:d}})},[e,t,r,a]);return o}function nr(e){var t=e.columnKey,r=e.onColumnResize,a=n.useRef();return n.useEffect(function(){a.current&&r(t,a.current.offsetWidth)},[]),n.createElement(cn,{data:t},n.createElement("td",{ref:a,style:{padding:0,border:0,height:0}},n.createElement("div",{style:{height:0,overflow:"hidden"}},"Â ")))}function tr(e){var t=e.prefixCls,r=e.columnsKey,a=e.onColumnResize;return n.createElement("tr",{"aria-hidden":"true",className:"".concat(t,"-measure-row"),style:{height:0,fontSize:0}},n.createElement(cn.Collection,{onBatchResize:function(i){i.forEach(function(c){var s=c.data,l=c.size;a(s,l.offsetWidth)})}},r.map(function(o){return n.createElement(nr,{key:o,columnKey:o,onColumnResize:a})})))}function rr(e){var t=e.data,r=e.getRowKey,a=e.measureColumnWidth,o=e.expandedKeys,i=e.onRow,c=e.rowExpandable,s=e.emptyNode,l=e.childrenColumnName,d=n.useContext(Qn),f=d.onColumnResize,u=n.useContext(ue),m=u.prefixCls,v=u.getComponent,p=n.useContext(Xe),E=p.flattenColumns,y=er(t,l,o,r),N=n.useRef({renderWithProps:!1}),b=n.useState(-1),O=V(b,2),D=O[0],L=O[1],T=n.useState(-1),z=V(T,2),H=z[0],P=z[1],F=n.useCallback(function(g,$){L(g),P($)},[]),W=n.useMemo(function(){var g=v(["body","wrapper"],"tbody"),$=v(["body","row"],"tr"),R=v(["body","cell"],"td"),B;t.length?B=y.map(function(w,S){var U=w.record,_=w.indent,ae=w.index,J=r(U,S);return n.createElement(Zn,{key:J,rowKey:J,record:U,recordKey:J,index:S,renderIndex:ae,rowComponent:$,cellComponent:R,expandedKeys:o,onRow:i,getRowKey:r,rowExpandable:c,childrenColumnName:l,indent:_})}):B=n.createElement(Jn,{expanded:!0,className:"".concat(m,"-placeholder"),prefixCls:m,component:$,cellComponent:R,colSpan:E.length,isEmpty:!0},s);var h=Ue(E);return n.createElement(g,{className:"".concat(m,"-tbody")},a&&n.createElement(tr,{prefixCls:m,columnsKey:h,onColumnResize:f}),B)},[t,m,i,a,o,r,v,s,E,l,f,c,y]);return n.createElement(Yn.Provider,{value:N.current},n.createElement(jn.Provider,{value:{startRow:D,endRow:H,onHover:F}},W))}var nt=n.memo(rr);nt.displayName="Body";var ar=["expandable"],tt="RC_TABLE_INTERNAL_COL_DEFINE";function or(e){var t=e.expandable,r=we(e,ar),a;return"expandable"in e?a=x(x({},r),t):a=r,a.showExpandColumn===!1&&(a.expandIconColumnIndex=-1),a}var ge={},lr=["children"],ir=["fixed"];function rt(e){return Pt(e).filter(function(t){return n.isValidElement(t)}).map(function(t){var r=t.key,a=t.props,o=a.children,i=we(a,lr),c=x({key:r},i);return o&&(c.children=rt(o)),c})}function an(e){return e.reduce(function(t,r){var a=r.fixed,o=a===!0?"left":a,i=r.children;return i&&i.length>0?[].concat(ne(t),ne(an(i).map(function(c){return x({fixed:o},c)}))):[].concat(ne(t),[x(x({},r),{},{fixed:o})])},[])}function cr(e){return e.map(function(t){var r=t.fixed,a=we(t,ir),o=r;return r==="left"?o="right":r==="right"&&(o="left"),x({fixed:o},a)})}function sr(e,t){var r=e.prefixCls,a=e.columns,o=e.children,i=e.expandable,c=e.expandedKeys,s=e.columnTitle,l=e.getRowKey,d=e.onTriggerExpand,f=e.expandIcon,u=e.rowExpandable,m=e.expandIconColumnIndex,v=e.direction,p=e.expandRowByClick,E=e.columnWidth,y=e.fixed,N=n.useMemo(function(){return a||rt(o)},[a,o]),b=n.useMemo(function(){if(i){var L,T=N.slice();if(!T.includes(ge)){var z=m||0;z>=0&&T.splice(z,0,ge)}var H=T.indexOf(ge);T=T.filter(function(g,$){return g!==ge||$===H});var P=N[H],F;(y==="left"||y)&&!m?F="left":(y==="right"||y)&&m===N.length?F="right":F=P?P.fixed:null;var W=(L={},I(L,tt,{className:"".concat(r,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),I(L,"title",s),I(L,"fixed",F),I(L,"className","".concat(r,"-row-expand-icon-cell")),I(L,"width",E),I(L,"render",function($,R,B){var h=l(R,B),w=c.has(h),S=u?u(R):!0,U=f({prefixCls:r,expanded:w,expandable:S,record:R,onExpand:d});return p?n.createElement("span",{onClick:function(ae){return ae.stopPropagation()}},U):U}),L);return T.map(function(g){return g===ge?W:g})}return N.filter(function(g){return g!==ge})},[i,N,l,c,f,v]),O=n.useMemo(function(){var L=b;return t&&(L=t(L)),L.length||(L=[{render:function(){return null}}]),L},[t,b,v]),D=n.useMemo(function(){return v==="rtl"?cr(an(O)):an(O)},[O,v]);return[O,D]}function at(e){var t=n.useRef(e),r=n.useState({}),a=V(r,2),o=a[1],i=n.useRef(null),c=n.useRef([]);function s(l){c.current.push(l);var d=Promise.resolve();i.current=d,d.then(function(){if(i.current===d){var f=c.current,u=t.current;c.current=[],f.forEach(function(m){t.current=m(t.current)}),i.current=null,u!==t.current&&o({})}})}return n.useEffect(function(){return function(){i.current=null}},[]),[t.current,s]}function ur(e){var t=n.useRef(e||null),r=n.useRef();function a(){window.clearTimeout(r.current)}function o(c){t.current=c,a(),r.current=window.setTimeout(function(){t.current=null,r.current=void 0},100)}function i(){return t.current}return n.useEffect(function(){return a},[]),[o,i]}function dr(e,t,r){var a=n.useMemo(function(){for(var o=[],i=[],c=0,s=0,l=0;l<t;l+=1)if(r==="rtl"){i[l]=s,s+=e[l]||0;var d=t-l-1;o[d]=c,c+=e[d]||0}else{o[l]=c,c+=e[l]||0;var f=t-l-1;i[f]=s,s+=e[f]||0}return{left:o,right:i}},[e,t,r]);return a}var fr=["columnType"];function ot(e){for(var t=e.colWidths,r=e.columns,a=e.columCount,o=[],i=a||r.length,c=!1,s=i-1;s>=0;s-=1){var l=t[s],d=r&&r[s],f=d&&d[tt];if(l||f||c){var u=f||{};u.columnType;var m=we(u,fr);o.unshift(n.createElement("col",ce({key:s,style:{width:l}},m))),c=!0}}return n.createElement("colgroup",null,o)}function Kn(e){var t=e.className,r=e.children;return n.createElement("div",{className:t},r)}var lt=n.createContext({});function vr(e){var t=e.className,r=e.index,a=e.children,o=e.colSpan,i=o===void 0?1:o,c=e.rowSpan,s=e.align,l=n.useContext(ue),d=l.prefixCls,f=l.direction,u=n.useContext(lt),m=u.scrollColumnIndex,v=u.stickyOffsets,p=u.flattenColumns,E=r+i-1,y=E+1===m?i+1:i,N=sn(r,r+y-1,p,v,f);return n.createElement(Ie,ce({className:t,index:r,component:"td",prefixCls:d,record:null,dataIndex:null,align:s,colSpan:y,rowSpan:c,render:function(){return a}},N))}var mr=["children"];function pr(e){var t=e.children,r=we(e,mr);return n.createElement("tr",r,t)}function je(e){var t=e.children;return t}je.Row=pr;je.Cell=vr;function De(e){var t=e.children,r=e.stickyOffsets,a=e.flattenColumns,o=n.useContext(ue),i=o.prefixCls,c=a.length-1,s=a[c],l=n.useMemo(function(){return{stickyOffsets:r,flattenColumns:a,scrollColumnIndex:s!=null&&s.scrollbar?c:null}},[s,a,c,r]);return n.createElement(lt.Provider,{value:l},n.createElement("tfoot",{className:"".concat(i,"-summary")},t))}var xr=je;function Cr(e){var t,r=e.prefixCls,a=e.record,o=e.onExpand,i=e.expanded,c=e.expandable,s="".concat(r,"-row-expand-icon");if(!c)return n.createElement("span",{className:se(s,"".concat(r,"-row-spaced"))});var l=function(f){o(a,f),f.stopPropagation()};return n.createElement("span",{className:se(s,(t={},I(t,"".concat(r,"-row-expanded"),i),I(t,"".concat(r,"-row-collapsed"),!i),t)),onClick:l})}function yr(e,t,r){var a=[];function o(i){(i||[]).forEach(function(c,s){a.push(t(c,s)),o(c[r])})}return o(e),a}var hr=function(t,r){var a,o,i=t.scrollBodyRef,c=t.onScroll,s=t.offsetScroll,l=t.container,d=n.useContext(ue),f=d.prefixCls,u=((a=i.current)===null||a===void 0?void 0:a.scrollWidth)||0,m=((o=i.current)===null||o===void 0?void 0:o.clientWidth)||0,v=u&&m*(m/u),p=n.useRef(),E=at({scrollLeft:0,isHiddenScrollBar:!1}),y=V(E,2),N=y[0],b=y[1],O=n.useRef({delta:0,x:0}),D=n.useState(!1),L=V(D,2),T=L[0],z=L[1],H=function(){z(!1)},P=function(R){R.persist(),O.current.delta=R.pageX-N.scrollLeft,O.current.x=0,z(!0),R.preventDefault()},F=function(R){var B,h=R||((B=window)===null||B===void 0?void 0:B.event),w=h.buttons;if(!T||w===0){T&&z(!1);return}var S=O.current.x+R.pageX-O.current.x-O.current.delta;S<=0&&(S=0),S+v>=m&&(S=m-v),c({scrollLeft:S/m*(u+2)}),O.current.x=R.pageX},W=function(){if(i.current){var R=On(i.current).top,B=R+i.current.offsetHeight,h=l===window?document.documentElement.scrollTop+window.innerHeight:On(l).top+l.clientHeight;B-Bn()<=h||R>=h-s?b(function(w){return x(x({},w),{},{isHiddenScrollBar:!0})}):b(function(w){return x(x({},w),{},{isHiddenScrollBar:!1})})}},g=function(R){b(function(B){return x(x({},B),{},{scrollLeft:R/u*m||0})})};return n.useImperativeHandle(r,function(){return{setScrollLeft:g}}),n.useEffect(function(){var $=Ae(document.body,"mouseup",H,!1),R=Ae(document.body,"mousemove",F,!1);return W(),function(){$.remove(),R.remove()}},[v,T]),n.useEffect(function(){var $=Ae(l,"scroll",W,!1),R=Ae(window,"resize",W,!1);return function(){$.remove(),R.remove()}},[l]),n.useEffect(function(){N.isHiddenScrollBar||b(function($){var R=i.current;return R?x(x({},$),{},{scrollLeft:R.scrollLeft/R.scrollWidth*R.clientWidth}):$})},[N.isHiddenScrollBar]),u<=m||!v||N.isHiddenScrollBar?null:n.createElement("div",{style:{height:Bn(),width:m,bottom:s},className:"".concat(f,"-sticky-scroll")},n.createElement("div",{onMouseDown:P,ref:p,className:se("".concat(f,"-sticky-scroll-bar"),I({},"".concat(f,"-sticky-scroll-bar-active"),T)),style:{width:"".concat(v,"px"),transform:"translate3d(".concat(N.scrollLeft,"px, 0, 0)")}}))};const Rr=n.forwardRef(hr);var An=Bt()?window:null;function Sr(e,t){var r=Ve(e)==="object"?e:{},a=r.offsetHeader,o=a===void 0?0:a,i=r.offsetSummary,c=i===void 0?0:i,s=r.offsetScroll,l=s===void 0?0:s,d=r.getContainer,f=d===void 0?function(){return An}:d,u=f()||An;return n.useMemo(function(){var m=!!e;return{isSticky:m,stickyClassName:m?"".concat(t,"-sticky-holder"):"",offsetHeader:o,offsetSummary:c,offsetScroll:l,container:u}},[l,o,c,t,u])}var gr=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];function wr(e,t){return n.useMemo(function(){for(var r=[],a=0;a<t;a+=1){var o=e[a];if(o!==void 0)r[a]=o;else return null}return r},[e.join("_"),t])}var on=n.forwardRef(function(e,t){var r=e.className,a=e.noData,o=e.columns,i=e.flattenColumns,c=e.colWidths,s=e.columCount,l=e.stickyOffsets,d=e.direction,f=e.fixHeader,u=e.stickyTopOffset,m=e.stickyBottomOffset,v=e.stickyClassName,p=e.onScroll,E=e.maxContentScroll,y=e.children,N=we(e,gr),b=n.useContext(ue),O=b.prefixCls,D=b.scrollbarSize,L=b.isSticky,T=L&&!f?0:D,z=n.useRef(null),H=n.useCallback(function(h){zn(t,h),zn(z,h)},[]);n.useEffect(function(){var h;function w(S){var U=S.currentTarget,_=S.deltaX;_&&(p({currentTarget:U,scrollLeft:U.scrollLeft+_}),S.preventDefault())}return(h=z.current)===null||h===void 0||h.addEventListener("wheel",w),function(){var S;(S=z.current)===null||S===void 0||S.removeEventListener("wheel",w)}},[]);var P=n.useMemo(function(){return i.every(function(h){return h.width>=0})},[i]),F=i[i.length-1],W={fixed:F?F.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(O,"-cell-scrollbar")}}},g=n.useMemo(function(){return T?[].concat(ne(o),[W]):o},[T,o]),$=n.useMemo(function(){return T?[].concat(ne(i),[W]):i},[T,i]),R=n.useMemo(function(){var h=l.right,w=l.left;return x(x({},l),{},{left:d==="rtl"?[].concat(ne(w.map(function(S){return S+T})),[0]):w,right:d==="rtl"?h:[].concat(ne(h.map(function(S){return S+T})),[0]),isSticky:L})},[T,l,L]),B=wr(c,s);return n.createElement("div",{style:x({overflow:"hidden"},L?{top:u,bottom:m}:{}),ref:H,className:se(r,I({},v,!!v))},n.createElement("table",{style:{tableLayout:"fixed",visibility:a||B?null:"hidden"}},(!a||!E||P)&&n.createElement(ot,{colWidths:B?[].concat(ne(B),[T]):[],columCount:s+1,columns:$}),y(x(x({},N),{},{stickyOffsets:R,columns:g,flattenColumns:$}))))});on.displayName="FixedHolder";var Er=[],Nr={},tn="rc-table-internal-hook",br=n.memo(function(e){var t=e.children;return t},function(e,t){return ln(e.props,t.props)?e.pingLeft!==t.pingLeft||e.pingRight!==t.pingRight:!1});function $e(e){var t,r=e.prefixCls,a=e.className,o=e.rowClassName,i=e.style,c=e.data,s=e.rowKey,l=e.scroll,d=e.tableLayout,f=e.direction,u=e.title,m=e.footer,v=e.summary,p=e.id,E=e.showHeader,y=e.components,N=e.emptyText,b=e.onRow,O=e.onHeaderRow,D=e.internalHooks,L=e.transformColumns,T=e.internalRefs,z=e.sticky,H=c||Er,P=!!H.length,F=n.useCallback(function(C,k){return Un(y||{},C)||k},[y]),W=n.useMemo(function(){return typeof s=="function"?s:function(C){var k=C&&C[s];return k}},[s]),g=or(e),$=g.expandIcon,R=g.expandedRowKeys,B=g.defaultExpandedRowKeys,h=g.defaultExpandAllRows,w=g.expandedRowRender,S=g.columnTitle,U=g.onExpand,_=g.onExpandedRowsChange,ae=g.expandRowByClick,J=g.rowExpandable,de=g.expandIconColumnIndex,Y=g.expandedRowClassName,te=g.childrenColumnName,Q=g.indentSize,pe=$||Cr,xe=te||"children",he=n.useMemo(function(){return w?"row":e.expandable&&D===tn&&e.expandable.__PARENT_RENDER_ICON__||H.some(function(C){return C&&Ve(C)==="object"&&C[xe]})?"nest":!1},[!!w,H]),Te=n.useState(function(){return B||(h?yr(H,W,xe):[])}),Ee=V(Te,2),X=Ee[0],G=Ee[1],K=n.useMemo(function(){return new Set(R||X||[])},[R,X]),q=n.useCallback(function(C){var k=W(C,H.indexOf(C)),A,ee=K.has(k);ee?(K.delete(k),A=ne(K)):A=[].concat(ne(K),[k]),G(A),U&&U(!ee,C),_&&_(A)},[W,K,H,U,_]),oe=n.useState(0),Z=V(oe,2),Re=Z[0],Se=Z[1],Ne=sr(x(x(x({},e),g),{},{expandable:!!w,columnTitle:S,expandedKeys:K,getRowKey:W,onTriggerExpand:q,expandIcon:pe,expandIconColumnIndex:de,direction:f}),D===tn?L:null),He=V(Ne,2),fe=He[0],M=He[1],j=n.useMemo(function(){return{columns:fe,flattenColumns:M}},[fe,M]),ve=n.useRef(),un=n.useRef(),le=n.useRef(),dn=n.useRef(),fn=n.useRef(),it=n.useState(!1),vn=V(it,2),mn=vn[0],Pe=vn[1],ct=n.useState(!1),pn=V(ct,2),xn=pn[0],Be=pn[1],st=at(new Map),Cn=V(st,2),ut=Cn[0],dt=Cn[1],ft=Ue(M),yn=ft.map(function(C){return ut.get(C)}),hn=n.useMemo(function(){return yn},[yn.join("_")]),be=dr(hn,M.length,f),re=l&&rn(l.y),ie=l&&rn(l.x)||!!g.fixed,Me=ie&&M.some(function(C){var k=C.fixed;return k}),Rn=n.useRef(),ke=Sr(z,r),Ce=ke.isSticky,vt=ke.offsetHeader,mt=ke.offsetSummary,pt=ke.offsetScroll,xt=ke.stickyClassName,Ct=ke.container,me=v==null?void 0:v(H),Oe=(re||Ce)&&n.isValidElement(me)&&me.type===je&&me.props.fixed,Ye,ze,_e;re&&(ze={overflowY:"scroll",maxHeight:l.y}),ie&&(Ye={overflowX:"auto"},re||(ze={overflowY:"hidden"}),_e={width:(l==null?void 0:l.x)===!0?"auto":l==null?void 0:l.x,minWidth:"100%"});var Sn=n.useCallback(function(C,k){Ot(ve.current)&&dt(function(A){if(A.get(C)!==k){var ee=new Map(A);return ee.set(C,k),ee}return A})},[]),yt=ur(null),gn=V(yt,2),ht=gn[0],wn=gn[1];function Fe(C,k){k&&(typeof k=="function"?k(C):k.scrollLeft!==C&&(k.scrollLeft=C))}var Le=function(k){var A=k.currentTarget,ee=k.scrollLeft,It=f==="rtl",ye=typeof ee=="number"?ee:A.scrollLeft,Pn=A||Nr;if(!wn()||wn()===Pn){var Ze;ht(Pn),Fe(ye,un.current),Fe(ye,le.current),Fe(ye,fn.current),Fe(ye,(Ze=Rn.current)===null||Ze===void 0?void 0:Ze.setScrollLeft)}if(A){var en=A.scrollWidth,nn=A.clientWidth;if(en===nn){Pe(!1),Be(!1);return}It?(Pe(-ye<en-nn),Be(-ye>0)):(Pe(ye>0),Be(ye<en-nn))}},En=function(){ie&&le.current?Le({currentTarget:le.current}):(Pe(!1),Be(!1))},Rt=function(k){var A=k.width;A!==Re&&(En(),Se(ve.current?ve.current.offsetWidth:A))},Nn=n.useRef(!1);n.useEffect(function(){Nn.current&&En()},[ie,c,fe.length]),n.useEffect(function(){Nn.current=!0},[]);var St=n.useState(0),bn=V(St,2),We=bn[0],kn=bn[1],gt=n.useState(!0),Ln=V(gt,2),wt=Ln[0],Et=Ln[1];n.useEffect(function(){le.current instanceof Element?kn(Fn(le.current).width):kn(Fn(dn.current).width),Et(zt("position","sticky"))},[]),n.useEffect(function(){D===tn&&T&&(T.body.current=le.current)});var Tn=F(["table"],"table"),Ke=n.useMemo(function(){return d||(Me?(l==null?void 0:l.x)==="max-content"?"auto":"fixed":re||Ce||M.some(function(C){var k=C.ellipsis;return k})?"fixed":"auto")},[re,Me,M,d,Ce]),Ge,qe={colWidths:hn,columCount:M.length,stickyOffsets:be,onHeaderRow:O,fixHeader:re,scroll:l},Nt=n.useMemo(function(){return P?null:typeof N=="function"?N():N},[P,N]),Mn=n.createElement(nt,{data:H,measureColumnWidth:re||ie||Ce,expandedKeys:K,rowExpandable:J,getRowKey:W,onRow:b,emptyNode:Nt,childrenColumnName:xe}),In=n.createElement(ot,{colWidths:M.map(function(C){var k=C.width;return k}),columns:M}),$n=F(["body"]);if(re||Ce){var Je;typeof $n=="function"?(Je=$n(H,{scrollbarSize:We,ref:le,onScroll:Le}),qe.colWidths=M.map(function(C,k){var A=C.width,ee=k===fe.length-1?A-We:A;return typeof ee=="number"&&!Number.isNaN(ee)?ee:(Ft(!1,"When use `components.body` with render props. Each column should have a fixed `width` value."),0)})):Je=n.createElement("div",{style:x(x({},Ye),ze),onScroll:Le,ref:le,className:se("".concat(r,"-body"))},n.createElement(Tn,{style:x(x({},_e),{},{tableLayout:Ke})},In,Mn,!Oe&&me&&n.createElement(De,{stickyOffsets:be,flattenColumns:M},me)));var Hn=x(x(x({noData:!H.length,maxContentScroll:ie&&l.x==="max-content"},qe),j),{},{direction:f,stickyClassName:xt,onScroll:Le});Ge=n.createElement(n.Fragment,null,E!==!1&&n.createElement(on,ce({},Hn,{stickyTopOffset:vt,className:"".concat(r,"-header"),ref:un}),function(C){return n.createElement(n.Fragment,null,n.createElement(Wn,C),Oe==="top"&&n.createElement(De,C,me))}),Je,Oe&&Oe!=="top"&&n.createElement(on,ce({},Hn,{stickyBottomOffset:mt,className:"".concat(r,"-summary"),ref:fn}),function(C){return n.createElement(De,C,me)}),Ce&&n.createElement(Rr,{ref:Rn,offsetScroll:pt,scrollBodyRef:le,onScroll:Le,container:Ct}))}else Ge=n.createElement("div",{style:x(x({},Ye),ze),className:se("".concat(r,"-content")),onScroll:Le,ref:le},n.createElement(Tn,{style:x(x({},_e),{},{tableLayout:Ke})},In,E!==!1&&n.createElement(Wn,ce({},qe,j)),Mn,me&&n.createElement(De,{stickyOffsets:be,flattenColumns:M},me)));var bt=Wt(e,{aria:!0,data:!0}),Qe=n.createElement("div",ce({className:se(r,a,(t={},I(t,"".concat(r,"-rtl"),f==="rtl"),I(t,"".concat(r,"-ping-left"),mn),I(t,"".concat(r,"-ping-right"),xn),I(t,"".concat(r,"-layout-fixed"),d==="fixed"),I(t,"".concat(r,"-fixed-header"),re),I(t,"".concat(r,"-fixed-column"),Me),I(t,"".concat(r,"-scroll-horizontal"),ie),I(t,"".concat(r,"-has-fix-left"),M[0]&&M[0].fixed),I(t,"".concat(r,"-has-fix-right"),M[M.length-1]&&M[M.length-1].fixed==="right"),t)),style:i,id:p,ref:ve},bt),n.createElement(br,{pingLeft:mn,pingRight:xn,props:x(x({},e),{},{stickyOffsets:be,mergedExpandedKeys:K})},u&&n.createElement(Kn,{className:"".concat(r,"-title")},u(H)),n.createElement("div",{ref:dn,className:"".concat(r,"-container")},Ge),m&&n.createElement(Kn,{className:"".concat(r,"-footer")},m(H))));ie&&(Qe=n.createElement(cn,{onResize:Rt},Qe));var kt=n.useMemo(function(){return{prefixCls:r,getComponent:F,scrollbarSize:We,direction:f,fixedInfoList:M.map(function(C,k){return sn(k,k,M,be,f)}),isSticky:Ce}},[r,F,We,f,M,be,Ce]),Lt=n.useMemo(function(){return x(x({},j),{},{tableLayout:Ke,rowClassName:o,expandedRowClassName:Y,expandIcon:pe,expandableType:he,expandRowByClick:ae,expandedRowRender:w,onTriggerExpand:q,expandIconColumnIndex:de,indentSize:Q,allColumnsFixedLeft:j.flattenColumns.every(function(C){return C.fixed==="left"})})},[j,Ke,o,Y,pe,he,ae,w,q,de,Q]),Tt=n.useMemo(function(){return{componentWidth:Re,fixHeader:re,fixColumn:Me,horizonScroll:ie}},[Re,re,Me,ie]),Mt=n.useMemo(function(){return{onColumnResize:Sn}},[Sn]);return n.createElement(Xn.Provider,{value:wt},n.createElement(ue.Provider,{value:kt},n.createElement(Xe.Provider,{value:Lt},n.createElement(qn.Provider,{value:Tt},n.createElement(Qn.Provider,{value:Mt},Qe)))))}$e.EXPAND_COLUMN=ge;$e.Column=At;$e.ColumnGroup=Kt;$e.Summary=xr;$e.defaultProps={rowKey:"key",prefixCls:"rc-table",emptyText:function(){return"No Data"}};export{xr as F,tt as I,$e as T,tn as a,rt as c};
