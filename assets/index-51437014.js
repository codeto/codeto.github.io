import{j as e,a as P}from"./@emotion-63839449.js";import{dd as Z,de as we,Y as Fe,i as pe,A as fe,M as Pe,X as be,j as Ie,b0 as ve,an as Q,at as Ce,ag as xe,l as a,E as oe,b1 as re,I as D,df as te,dg as ie,a as Te}from"./index-c2ded735.js";import{P as ae}from"./prop-types-1172f4d5.js";import{r as u}from"./react-4fd50329.js";import"./react-redux-896b353b.js";import"./lodash-88fe09e6.js";import"./moment-a468e1f9.js";import"./file-saver-40cf32a9.js";import"./@firebase-43527ee1.js";import{M as Ee,b as ee,k as Re,w as V,U as W,a as ce}from"./index-b17d22e5.js";import{g as Ue,R as z,b as h,B as se}from"./antd-f9eae174.js";import{F as g,u as le}from"./index-687ba9e6.js";import{B as $}from"./index-881eef42.js";import{I as R}from"./index-43183512.js";import{u as ke}from"./react-router-a4308f7b.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./@babel-b64fd0f9.js";import"./stylis-79144faa.js";import"./redux-10bbab4c.js";import"./react-router-dom-2a8f5f6d.js";import"./history-a1882333.js";import"./resolve-pathname-e210f2ac.js";import"./tiny-invariant-dd7d57d2.js";import"./react-dom-40621ea0.js";import"./classnames-4ba1ba1a.js";import"./scheduler-765c72db.js";import"./@redux-saga-8bafe09b.js";import"./redux-logger-e1c9ca90.js";import"./dompurify-8e338605.js";import"./query-string-f5cca1e7.js";import"./decode-uri-component-4138e85d.js";import"./split-on-first-4f1167c8.js";import"./filter-obj-2ed190f4.js";import"./oidc-client-7da0eaf7.js";import"./firebase-878887a2.js";import"./rc-pagination-c1e6a0ac.js";import"./rc-picker-2e3d5fe5.js";import"./rc-util-0bc219f3.js";import"./rc-trigger-570b13ec.js";import"./rc-motion-ae889c42.js";import"./rc-align-e5d7b12e.js";import"./dom-align-ecb06dd6.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-resize-observer-b9ad4e29.js";import"./@ant-design-cba9d434.js";import"./@ctrl-fb5a5473.js";import"./rc-tabs-dfd19a56.js";import"./rc-dropdown-5378dd0a.js";import"./rc-menu-b15ebfe9.js";import"./rc-overflow-6be96612.js";import"./rc-select-564caf01.js";import"./rc-virtual-list-8a7b82a6.js";import"./rc-collapse-11b7d3c4.js";import"./shallowequal-4542d6f7.js";import"./rc-drawer-317f0b4d.js";import"./@rc-component-5a112e55.js";import"./rc-field-form-ef5549aa.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./rc-image-e0357917.js";import"./rc-dialog-b1d1f07b.js";import"./rc-input-number-8bc068f7.js";import"./rc-rate-c64cf0d5.js";import"./rc-steps-2d1924c7.js";import"./rc-switch-b4e96de7.js";import"./rc-table-191ecc42.js";import"./rc-checkbox-018e8052.js";import"./rc-tree-67773537.js";import"./rc-tree-select-cb7eccc3.js";import"./copy-to-clipboard-64585c8c.js";import"./toggle-selection-93f4ad84.js";import"./rc-textarea-d01adcbb.js";import"./rc-input-02c2c2ba.js";import"./rc-upload-3ab0f08a.js";import"./rc-notification-d13dc43b.js";import"./rc-progress-4f1a7096.js";import"./rc-tooltip-08fa4217.js";import"./use-sync-external-store-5d1b6592.js";import"./idb-cdd1a92f.js";import"./path-to-regexp-ef8d5544.js";import"./account-86ffff50.js";import"./libphonenumber-js-0d5a9c92.js";import"./react-infinite-scroll-component-e33646cb.js";const me=({activeMenuItem:c,handleSelectMenuItem:l})=>{const[o]=Fe();return e(Ue,{mode:"inline",style:{height:"100%",padding:o.padding,borderRadius:o.borderRadius},selectedKeys:[c],children:we.map(s=>e(Ee,{onClick:()=>l(s.value),className:c===s.value?"selected":"",children:e("span",{children:s.label})},s.value))})};me.propTypes={activeMenuItem:ae.string,handleSelectMenuItem:ae.func};me.defaultProps={activeMenuItem:Z,handleSelectMenuItem:()=>{}};const ye=`${Ie}/unit-group-template/configs`,Ae=ye,Be=ye;async function Ve({idBuilding:c,type:l}){return await pe({type:fe,payload:{apiUrl:Be,method:Pe.GET,options:{params:{type:l},headers:{[be]:c}}}})}async function We(c,l){return await pe({type:fe,payload:{apiUrl:Ae,method:Pe.POST,body:{...l},options:{headers:{[be]:c}}}})}const ue=async(c,l)=>{const{type:o,bankName:s,bankBranch:S,beneficiaryQR:N,managementLogo:m,PMSignature:n,numberDayPaymentDueDate:b,PMName:C,beneficiaryName:L,beneficiaryAccountNumber:x,bankNameEn:y,bankBranchEn:M,accountantSignature:w,accountantName:d}=l;return await We(c,{type:o,bankName:s,bankBranch:S,beneficiaryQR:N,managementLogo:m,PMSignature:n,numberDayPaymentDueDate:b,PMName:C,beneficiaryName:L,beneficiaryAccountNumber:x,bankNameEn:y,bankBranchEn:M,accountantSignature:w,accountantName:d})},ge=async({idBuilding:c,type:l})=>{try{const{data:o}=await Ve({idBuilding:c,type:l});return{data:o}}catch(o){return o}},ne=u.createContext({configTemplatePermissionWrite:!1,configTemplatePermissionRead:!1,idBuilding:0}),de=({children:c})=>{const{getPermissionByModuleCode:l}=ve(),{idBuilding:o}=ke(),s=l(Q),S=(s==null?void 0:s[Ce])??!1,N=(s==null?void 0:s[xe])??!1,m={configTemplatePermissionWrite:S,configTemplatePermissionRead:N,idBuilding:o};return e(ne.Provider,{value:m,children:c})};de.propTypes={children:ae.node};de.defaultProps={children:e("div",{})};const Oe=de,O=c=>{var l,o,s;return((s=(o=(l=c==null?void 0:c[0])==null?void 0:l.response)==null?void 0:o.data)==null?void 0:s.url)||null},r=c=>c?[{uid:"-1",name:"image.png",status:"done",url:c}]:[];function Qe(){const{idBuilding:c,configTemplatePermissionWrite:l}=u.useContext(ne),[o]=g.useForm(),[s,S]=u.useState({isFetching:!1,code:void 0,codeLanguage:void 0}),[N,m]=u.useState({isFetching:!1}),[n,b]=u.useState(),[C,L]=u.useState({isPreview:!1,photoPreview:""}),[x,y]=u.useState(r(n==null?void 0:n.managementLogo)),[M,w]=u.useState(r(n==null?void 0:n.beneficiaryQR)),[d,U]=u.useState(r(n==null?void 0:n.PMSignature)),[p,Y]=u.useState(r(n==null?void 0:n.accountantSignature));u.useEffect(()=>{(async()=>{try{m({isFetching:!0});const{data:t}=await ge({idBuilding:c,type:Z});b(t??{}),y(r(t==null?void 0:t.managementLogo)),w(r(t==null?void 0:t.beneficiaryQR)),U(r(t==null?void 0:t.PMSignature)),Y(r(t==null?void 0:t.accountantSignature));const F={managementLogo:r(t==null?void 0:t.managementLogo),PMSignature:r(t==null?void 0:t.PMSignature),beneficiaryQR:r(t==null?void 0:t.beneficiaryQR),numberDayPaymentDueDate:t==null?void 0:t.numberDayPaymentDueDate,PMName:t==null?void 0:t.PMName,beneficiaryName:t==null?void 0:t.beneficiaryName,beneficiaryAccountNumber:t==null?void 0:t.beneficiaryAccountNumber,bankName:t==null?void 0:t.bankName,bankNameEn:t==null?void 0:t.bankNameEn,bankBranch:t==null?void 0:t.bankBranch,bankBranchEn:t==null?void 0:t.bankBranchEn,accountantName:t==null?void 0:t.accountantName,accountantSignature:r(t==null?void 0:t.accountantSignature)};o.setFieldsValue(F),m({isFetching:!1})}catch{m({isFetching:!1})}})()},[]);const G=t=>F=>{F.file.status==="removed"&&t([]),(F.file.status==="done"||F.file.status==="uploading")&&t(F.fileList)},X=G(w),q=G(y),H=G(U),K=G(Y),J=t=>{var F,_;L({isPreview:!0,photoPreview:((_=(F=t==null?void 0:t.response)==null?void 0:F.data)==null?void 0:_.url)??t.url})},i=()=>{L({isPreview:!1,photoPreview:""})};le(s.code,s.codeLanguage,{message:a.success,description:a.update_data_success});const f=async t=>{var _,I,v,j;if(o.setFieldsValue({...oe(o.getFieldsValue(),{})}),await o.validateFields()){const{managementLogo:k,PMSignature:A,beneficiaryQR:B,accountantSignature:E}=t,Se=O(k==null?void 0:k.fileList)||((_=k==null?void 0:k[0])==null?void 0:_.url),Me=O(A==null?void 0:A.fileList)||((I=A==null?void 0:A[0])==null?void 0:I.url),_e=O(B==null?void 0:B.fileList)||((v=B==null?void 0:B[0])==null?void 0:v.url),Ne=O(E==null?void 0:E.fileList)||((j=E==null?void 0:E[0])==null?void 0:j.url),Le={type:Z,managementLogo:Se,beneficiaryQR:_e,PMSignature:Me,numberDayPaymentDueDate:t.numberDayPaymentDueDate,PMName:t.PMName,beneficiaryName:t.beneficiaryName,beneficiaryAccountNumber:t.beneficiaryAccountNumber,bankName:t.bankName,bankNameEn:t.bankNameEn,bankBranch:t.bankBranch,bankBranchEn:t.bankBranchEn,accountantName:t==null?void 0:t.accountantName,accountantSignature:Ne};S({code:void 0,codeLanguage:void 0,isFetching:!0});const he=await ue(c,Le);S({code:he.code,codeLanguage:he.codeLanguage,isFetching:!1})}},T={beneficiaryQR:{fileList:r(n==null?void 0:n.beneficiaryQR)},managementLogo:{fileList:r(n==null?void 0:n.managementLogo)},PMSignature:{fileList:r(n==null?void 0:n.PMSignature)},numberDayPaymentDueDate:n==null?void 0:n.numberDayPaymentDueDate,PMName:n==null?void 0:n.PMName,beneficiaryName:n==null?void 0:n.beneficiaryName,beneficiaryAccountNumber:n==null?void 0:n.beneficiaryAccountNumber,bankName:n==null?void 0:n.bankName,bankNameEn:n==null?void 0:n.bankNameEn,bankBranch:n==null?void 0:n.bankBranch,bankBranchEn:n==null?void 0:n.bankBranchEn,accountantName:n==null?void 0:n.accountantName,accountantSignature:{fileList:r(n==null?void 0:n.accountantSignature)}};return{formUpdateInvoice:o,onFinish:f,initialValues:T,isFetchingUpdateInvoice:s.isFetching,isFetchingInvoice:N.isFetching,configTemplatePermissionWrite:l,beneficiaryQR:M,managementLogo:x,PMSignature:d,onChangeBeneficicaryQR:X,onChangeManagementLogo:q,onChangePMSignature:H,previewPhoto:C,onPreviewPhoto:J,onClosePreviewPhoto:i,accountantSignature:p,onChangeAccountantSignature:K}}function $e(){const{formUpdateInvoice:c,onFinish:l,initialValues:o,isFetchingUpdateInvoice:s,isFetchingInvoice:S,configTemplatePermissionWrite:N,beneficiaryQR:m,managementLogo:n,PMSignature:b,onChangeBeneficicaryQR:C,onChangeManagementLogo:L,onChangePMSignature:x,previewPhoto:y,onPreviewPhoto:M,onClosePreviewPhoto:w,accountantSignature:d,onChangeAccountantSignature:U}=Qe();return S?e(re,{isLoading:!0}):e(g,{name:"invoiceForm",scrollToFirstError:!0,layout:"vertical",onFinish:l,form:c,initialValues:o,style:{display:"flex",flexDirection:"column",flex:1,height:"100%"},children:P($,{style:{flex:1},children:[P($.Content,{scrollY:!0,children:[P("div",{children:[P("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[e(D,{name:"icon-info-circle-filled",css:p=>({fontSize:p.iconSize,marginRight:p.margin.xs,color:p.color.primary})}),e(ee,{css:p=>({color:p.color.primary,fontWeight:p.fontWeight.bold}),children:a.building_info})]}),e("div",{children:P(z,{gutter:16,children:[e(h,{span:8,children:e(g.Item,{name:"accountantName",label:a.accountant_name,children:e(R,{placeholder:a.accountant_name})})}),e(h,{span:8,children:e(g.Item,{name:"PMName",label:a.pm_name,children:e(R,{placeholder:a.pm_name})})}),e(h,{span:8,children:e(g.Item,{name:"numberDayPaymentDueDate",label:a.number_of_days_within_the_payment_due_date,children:e(Re,{placeholder:a.number_of_days_within_the_payment_due_date,min:"0",max:"365"})})}),e(h,{xs:24,sm:12,md:8,lg:8,children:e(g.Item,{name:"accountantSignature",label:a.accountant_signature,children:e(V,{fileList:d,listType:"picture-card",accept:"image/*",onChange:U,onPreview:M,children:(d==null?void 0:d.length)>=1?null:e(W,{})})})}),e(h,{xs:24,sm:12,md:8,lg:8,children:e(g.Item,{name:"PMSignature",label:a.management_board_signature,children:e(V,{fileList:b,listType:"picture-card",accept:"image/*",onChange:x,onPreview:M,module:Q,children:(b==null?void 0:b.length)>=1?null:e(W,{})})})}),e(h,{xs:24,sm:12,md:8,lg:8,children:e(g.Item,{name:"managementLogo",label:a.management_board_logo,children:e(V,{fileList:n,listType:"picture-card",accept:"image/*",onChange:L,onPreview:M,module:Q,children:(n==null?void 0:n.length)>=1?null:e(W,{})})})})]})})]}),P("div",{children:[P("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[e(D,{name:"icon-info-circle-filled",css:p=>({fontSize:p.iconSize,marginRight:p.margin.xs,color:p.color.primary})}),e(ee,{css:p=>({color:p.color.primary,fontWeight:p.fontWeight.bold}),children:a.payment_info})]}),P("div",{children:[P(z,{gutter:16,children:[P(h,{flex:"1 0 0",style:{width:"100%"},children:[P(z,{gutter:16,children:[e(h,{span:12,children:e(g.Item,{name:"beneficiaryName",label:a.beneficicary_name,children:e(R,{placeholder:a.beneficicary_name})})}),e(h,{span:12,children:e(g.Item,{name:"beneficiaryAccountNumber",label:a.beneficicary_account_number,children:e(R,{placeholder:a.beneficicary_account_number})})})]}),P(z,{gutter:16,children:[e(h,{span:12,children:e(g.Item,{name:"bankName",label:a.bank_name,children:e(R,{placeholder:a.bank_name})})}),e(h,{span:12,children:e(g.Item,{name:"bankNameEn",label:`${a.bank_name} (${a.english})`,children:e(R,{placeholder:`${a.bank_name} (${a.english})`})})})]})]}),e(h,{children:e(g.Item,{name:"beneficiaryQR",label:a.qr_image,children:e(V,{fileList:m,listType:"picture-card",accept:"image/*",onChange:C,onPreview:M,module:Q,children:(m==null?void 0:m.length)>=1?null:e(W,{})})})})]}),P(z,{gutter:16,children:[e(h,{span:12,children:e(g.Item,{name:"bankBranch",label:a.bank_branch,children:e(R,{placeholder:a.bank_branch})})}),e(h,{span:12,children:e(g.Item,{name:"bankBranchEn",label:`${a.bank_branch} (${a.english})`,children:e(R,{placeholder:`${a.bank_branch} (${a.english})`})})})]})]})]})]}),N?e($.Footer,{borderTop:!0,style:{textAlign:"right"},children:e(se,{htmlType:"submit",loading:s,type:"primary",children:a.label.confirm})}):null,y!=null&&y.isPreview?e(ce,{open:!0,title:a.detail,footer:null,onCancel:w,children:e("img",{alt:"example",style:{width:"100%"},src:y.photoPreview})}):null]})})}function Ge(){const{idBuilding:c,configTemplatePermissionWrite:l}=u.useContext(ne),[o]=g.useForm(),[s,S]=u.useState({isFetching:!1,code:void 0,codeLanguage:void 0}),[N,m]=u.useState({isFetching:!1}),[n,b]=u.useState(),[C,L]=u.useState({isPreview:!1,photoPreview:""}),[x,y]=u.useState(r(n==null?void 0:n.managementLogo)),[M,w]=u.useState(r(n==null?void 0:n.accountantSignature)),[d,U]=u.useState(r(n==null?void 0:n.PMSignature));u.useEffect(()=>{(async()=>{try{m({isFetching:!0});const{data:i}=await ge({idBuilding:c,type:te});b(i??{}),y(r(i==null?void 0:i.managementLogo)),w(r(i==null?void 0:i.accountantSignature)),U(r(i==null?void 0:i.PMSignature));const f={managementLogo:r(i==null?void 0:i.managementLogo),PMSignature:r(i==null?void 0:i.PMSignature),accountantSignature:r(i==null?void 0:i.accountantSignature),PMName:i==null?void 0:i.PMName,accountantName:i==null?void 0:i.accountantName};o.setFieldsValue(f),m({isFetching:!1})}catch{m({isFetching:!1})}})()},[]);const p=i=>f=>{f.file.status==="removed"&&i([]),(f.file.status==="done"||f.file.status==="uploading")&&i(f.fileList)},Y=p(w),G=p(y),X=p(U),q=i=>{var f,T;L({isPreview:!0,photoPreview:((T=(f=i==null?void 0:i.response)==null?void 0:f.data)==null?void 0:T.url)??i.url})},H=()=>{L({isPreview:!1,photoPreview:""})};le(s.code,s.codeLanguage,{message:a.success,description:a.update_data_success});const K=async i=>{var T,t,F;if(o.setFieldsValue({...oe(o.getFieldsValue(),{})}),await o.validateFields()){const{managementLogo:_,PMSignature:I,accountantSignature:v}=i,j=O(_==null?void 0:_.fileList)||((T=_==null?void 0:_[0])==null?void 0:T.url),k=O(I==null?void 0:I.fileList)||((t=I==null?void 0:I[0])==null?void 0:t.url),A=O(v==null?void 0:v.fileList)||((F=v==null?void 0:v[0])==null?void 0:F.url),B={type:te,accountantSignature:A,managementLogo:j,PMSignature:k,PMName:i.PMName,accountantName:i.accountantName};S({code:void 0,codeLanguage:void 0,isFetching:!0});const E=await ue(c,B);S({code:E.code,codeLanguage:E.codeLanguage,isFetching:!1})}},J={accountantSignature:{fileList:r(n==null?void 0:n.accountantSignature)},managementLogo:{fileList:r(n==null?void 0:n.managementLogo)},PMSignature:{fileList:r(n==null?void 0:n.PMSignature)},PMName:n==null?void 0:n.PMName,accountantName:n==null?void 0:n.PMName};return{formUpdateReceipt:o,onFinish:K,initialValues:J,isFetchingUpdateReceipt:s.isFetching,isFetchingReceipt:N.isFetching,configTemplatePermissionWrite:l,managementLogo:x,PMSignature:d,previewPhoto:C,onPreviewPhoto:q,onClosePreviewPhoto:H,onChangeAccountantSignature:Y,onChangeManagementLogo:G,onChangePMSignature:X,accountantSignature:M}}function ze(){const{formUpdateReceipt:c,onFinish:l,initialValues:o,isFetchingUpdateReceipt:s,isFetchingReceipt:S,configTemplatePermissionWrite:N,accountantSignature:m,managementLogo:n,PMSignature:b,onChangeAccountantSignature:C,onChangeManagementLogo:L,onChangePMSignature:x,previewPhoto:y,onPreviewPhoto:M,onClosePreviewPhoto:w}=Ge();return S?e(re,{isLoading:!0}):e(g,{name:"receiptForm",scrollToFirstError:!0,layout:"vertical",onFinish:l,form:c,initialValues:o,style:{display:"flex",flexDirection:"column",flex:1,height:"100%"},children:P($,{style:{flex:1},children:[e($.Content,{scrollY:!0,children:P("div",{children:[P("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[e(D,{name:"icon-info-circle-filled",css:d=>({fontSize:d.iconSize,marginRight:d.margin.xs,color:d.color.primary})}),e(ee,{css:d=>({color:d.color.primary,fontWeight:d.fontWeight.bold}),children:a.receipt_info})]}),e("div",{children:P(z,{gutter:16,children:[e(h,{span:12,children:e(g.Item,{name:"PMName",label:a.management_board_name,children:e(R,{placeholder:a.management_board_name})})}),e(h,{span:12,children:e(g.Item,{name:"accountantName",label:a.accountant_name,children:e(R,{placeholder:a.accountant_name})})}),e(h,{xs:24,sm:12,md:6,lg:6,children:e(g.Item,{name:"managementLogo",label:a.management_board_logo,children:e(V,{fileList:n,listType:"picture-card",accept:"image/*",onChange:L,onPreview:M,module:Q,children:(n==null?void 0:n.length)>=1?null:e(W,{})})})}),e(h,{xs:24,sm:12,md:6,lg:6,children:e(g.Item,{name:"PMSignature",label:a.management_board_signature,children:e(V,{fileList:b,listType:"picture-card",accept:"image/*",onChange:x,onPreview:M,module:Q,children:(b==null?void 0:b.length)>=1?null:e(W,{})})})}),e(h,{xs:24,sm:12,md:6,lg:6,children:e(g.Item,{name:"accountantSignature",label:a.accountant_signature,children:e(V,{fileList:m,listType:"picture-card",accept:"image/*",onChange:C,onPreview:M,module:Q,children:(m==null?void 0:m.length)>=1?null:e(W,{})})})})]})})]})}),N?e($.Footer,{borderTop:!0,style:{textAlign:"right"},children:e(se,{htmlType:"submit",loading:s,type:"primary",children:a.label.confirm})}):null,y.isPreview?e(ce,{open:!0,title:a.detail,footer:null,onCancel:w,children:e("img",{alt:"example",style:{width:"100%"},src:y.photoPreview})}):null]})})}function Ye(){const{idBuilding:c,configTemplatePermissionWrite:l}=u.useContext(ne),[o]=g.useForm(),[s,S]=u.useState({isFetching:!1,code:void 0,codeLanguage:void 0}),[N,m]=u.useState({isFetching:!1}),[n,b]=u.useState(),[C,L]=u.useState({isPreview:!1,photoPreview:""}),[x,y]=u.useState(r(n==null?void 0:n.managementLogo)),[M,w]=u.useState(r(n==null?void 0:n.accountantSignature)),[d,U]=u.useState(r(n==null?void 0:n.PMSignature));u.useEffect(()=>{(async()=>{try{m({isFetching:!0});const{data:i}=await ge({idBuilding:c,type:ie});b(i??{}),y(r(i==null?void 0:i.managementLogo)),w(r(i==null?void 0:i.accountantSignature)),U(r(i==null?void 0:i.PMSignature));const f={managementLogo:r(i==null?void 0:i.managementLogo),PMSignature:r(i==null?void 0:i.PMSignature),accountantSignature:r(i==null?void 0:i.accountantSignature),PMName:i==null?void 0:i.PMName,accountantName:i==null?void 0:i.accountantName};o.setFieldsValue(f),m({isFetching:!1})}catch{m({isFetching:!1})}})()},[]);const p=i=>f=>{f.file.status==="removed"&&i([]),(f.file.status==="done"||f.file.status==="uploading")&&i(f.fileList)},Y=p(w),G=p(y),X=p(U),q=i=>{var f,T;L({isPreview:!0,photoPreview:((T=(f=i==null?void 0:i.response)==null?void 0:f.data)==null?void 0:T.url)??i.url})},H=()=>{L({isPreview:!1,photoPreview:""})};le(s.code,s.codeLanguage,{message:a.success,description:a.update_data_success});const K=async i=>{var T,t,F;if(o.setFieldsValue({...oe(o.getFieldsValue(),{})}),await o.validateFields()){const{managementLogo:_,PMSignature:I,accountantSignature:v}=i,j=O(_==null?void 0:_.fileList)||((T=_==null?void 0:_[0])==null?void 0:T.url),k=O(I==null?void 0:I.fileList)||((t=I==null?void 0:I[0])==null?void 0:t.url),A=O(v==null?void 0:v.fileList)||((F=v==null?void 0:v[0])==null?void 0:F.url),B={type:ie,accountantSignature:A,managementLogo:j,PMSignature:k,PMName:i.PMName,accountantName:i.accountantName};S({code:void 0,codeLanguage:void 0,isFetching:!0});const E=await ue(c,B);S({code:E.code,codeLanguage:E.codeLanguage,isFetching:!1})}},J={accountantSignature:{fileList:r(n==null?void 0:n.accountantSignature)},managementLogo:{fileList:r(n==null?void 0:n.managementLogo)},PMSignature:{fileList:r(n==null?void 0:n.PMSignature)},PMName:n==null?void 0:n.PMName,accountantName:n==null?void 0:n.PMName};return{formUpdatePayslip:o,onFinish:K,initialValues:J,isFetchingUpdatePayslip:s.isFetching,isFetchingPayslip:N.isFetching,configTemplatePermissionWrite:l,accountantSignature:M,managementLogo:x,PMSignature:d,previewPhoto:C,onPreviewPhoto:q,onClosePreviewPhoto:H,onChangeAccountantSignature:Y,onChangeManagementLogo:G,onChangePMSignature:X}}function je(){const{formUpdatePayslip:c,onFinish:l,initialValues:o,isFetchingUpdatePayslip:s,isFetchingPayslip:S,configTemplatePermissionWrite:N,accountantSignature:m,managementLogo:n,PMSignature:b,onChangeAccountantSignature:C,onChangeManagementLogo:L,onChangePMSignature:x,previewPhoto:y,onPreviewPhoto:M,onClosePreviewPhoto:w}=Ye();return S?e(re,{isLoading:!0}):e(g,{name:"payslipForm",scrollToFirstError:!0,layout:"vertical",onFinish:l,form:c,initialValues:o,style:{display:"flex",flexDirection:"column",flex:1,height:"100%"},children:P($,{style:{flex:1},children:[e($.Content,{scrollY:!0,children:P("div",{children:[P("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[e(D,{name:"icon-info-circle-filled",css:d=>({fontSize:d.iconSize,marginRight:d.margin.xs,color:d.color.primary})}),e(ee,{css:d=>({color:d.color.primary,fontWeight:d.fontWeight.bold}),children:a.payslip_info})]}),e("div",{children:P(z,{gutter:16,children:[e(h,{span:12,children:e(g.Item,{name:"PMName",label:a.management_board_name,children:e(R,{placeholder:a.management_board_name})})}),e(h,{span:12,children:e(g.Item,{name:"accountantName",label:a.accountant_name,children:e(R,{placeholder:a.accountant_name})})}),e(h,{xs:24,sm:12,md:6,lg:6,children:e(g.Item,{name:"managementLogo",label:a.management_board_logo,children:e(V,{fileList:n,listType:"picture-card",accept:"image/*",onChange:L,onPreview:M,module:Q,children:(n==null?void 0:n.length)>=1?null:e(W,{})})})}),e(h,{xs:24,sm:12,md:6,lg:6,children:e(g.Item,{name:"PMSignature",label:a.management_board_signature,children:e(V,{fileList:b,listType:"picture-card",accept:"image/*",onChange:x,onPreview:M,module:Q,children:(b==null?void 0:b.length)>=1?null:e(W,{})})})}),e(h,{xs:24,sm:12,md:6,lg:6,children:e(g.Item,{name:"accountantSignature",label:a.accountant_signature,children:e(V,{fileList:m,listType:"picture-card",accept:"image/*",onChange:C,onPreview:M,module:Q,children:(m==null?void 0:m.length)>=1?null:e(W,{})})})})]})})]})}),N?e($.Footer,{borderTop:!0,style:{textAlign:"right"},children:e(se,{htmlType:"submit",loading:s,type:"primary",children:a.label.confirm})}):null,y.isPreview?e(ce,{open:!0,title:a.detail,footer:null,onCancel:w,children:e("img",{alt:"example",style:{width:"100%"},src:y.photoPreview})}):null]})})}const Xe=()=>{const{setTitlePage:c,setVisibleSearchBox:l,setVisibleFilterBox:o}=u.useContext(Te),[s,S]=u.useState(Z);return u.useEffect(()=>(c(a.configs_templates),l(!1),()=>{c(""),l(!1),o(!1)}),[]),{handleSelectMenuItem:m=>{o(!1),S(m)},activeMenuItem:s}},qe=()=>{const{handleSelectMenuItem:c,activeMenuItem:l}=Xe();return e("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:P(z,{style:{flex:1},gutter:[12,0],children:[e(h,{span:4,children:e(me,{activeMenuItem:l,handleSelectMenuItem:c})}),P(h,{style:{display:"flex",flexDirection:"column",flex:1},span:20,children:[l===Z?e($e,{}):null,l===te?e(ze,{}):null,l===ie?e(je,{}):null]})]})})},It=()=>e(Oe,{children:e(qe,{})});export{It as default};
