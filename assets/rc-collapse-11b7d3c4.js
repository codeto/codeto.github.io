import{c as z,d as f,h as U,i as j,j as D,k as F,b as B,e as M,f as G,_ as J}from"./@babel-b64fd0f9.js";import{c as g}from"./classnames-4ba1ba1a.js";import{t as Q}from"./rc-util-0bc219f3.js";import{r as d}from"./react-4fd50329.js";import{s as S}from"./shallowequal-4542d6f7.js";import{C as V}from"./rc-motion-ae889c42.js";var T=d.forwardRef(function(p,v){var i,t=p.prefixCls,e=p.forceRender,o=p.className,r=p.style,n=p.children,a=p.isActive,l=p.role,s=d.useState(a||e),c=z(s,2),h=c[0],C=c[1];return d.useEffect(function(){(e||a)&&C(!0)},[e,a]),h?d.createElement("div",{ref:v,className:g("".concat(t,"-content"),(i={},f(i,"".concat(t,"-content-active"),a),f(i,"".concat(t,"-content-inactive"),!a),i),o),style:r,role:l},d.createElement("div",{className:"".concat(t,"-content-box")},n)):null});T.displayName="PanelContent";var X=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],q=function(p){U(i,p);var v=j(i);function i(){var t;D(this,i);for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return t=v.call.apply(v,[this].concat(o)),t.onItemClick=function(){var n=t.props,a=n.onItemClick,l=n.panelKey;typeof a=="function"&&a(l)},t.handleKeyPress=function(n){(n.key==="Enter"||n.keyCode===13||n.which===13)&&t.onItemClick()},t.renderIcon=function(){var n=t.props,a=n.showArrow,l=n.expandIcon,s=n.prefixCls,c=n.collapsible;if(!a)return null;var h=typeof l=="function"?l(t.props):d.createElement("i",{className:"arrow"});return h&&d.createElement("div",{className:"".concat(s,"-expand-icon"),onClick:c==="header"||c==="icon"?t.onItemClick:null},h)},t.renderTitle=function(){var n=t.props,a=n.header,l=n.prefixCls,s=n.collapsible;return d.createElement("span",{className:"".concat(l,"-header-text"),onClick:s==="header"?t.onItemClick:null},a)},t}return F(i,[{key:"shouldComponentUpdate",value:function(e){return!S(this.props,e)}},{key:"render",value:function(){var e,o,r=this.props,n=r.className,a=r.id,l=r.style,s=r.prefixCls,c=r.headerClass,h=r.children,C=r.isActive,K=r.destroyInactivePanel,P=r.accordion,k=r.forceRender,w=r.openMotion,u=r.extra,y=r.collapsible,x=B(r,X),N=y==="disabled",b=y==="header",I=y==="icon",A=g((e={},f(e,"".concat(s,"-item"),!0),f(e,"".concat(s,"-item-active"),C),f(e,"".concat(s,"-item-disabled"),N),e),n),_=g("".concat(s,"-header"),(o={},f(o,c,c),f(o,"".concat(s,"-header-collapsible-only"),b),f(o,"".concat(s,"-icon-collapsible-only"),I),o)),m={className:_,"aria-expanded":C,"aria-disabled":N,onKeyPress:this.handleKeyPress};!b&&!I&&(m.onClick=this.onItemClick,m.role=P?"tab":"button",m.tabIndex=N?-1:0);var E=u!=null&&typeof u!="boolean";return delete x.header,delete x.panelKey,delete x.onItemClick,delete x.showArrow,delete x.expandIcon,d.createElement("div",M({},x,{className:A,style:l,id:a}),d.createElement("div",m,this.renderIcon(),this.renderTitle(),E&&d.createElement("div",{className:"".concat(s,"-extra")},u)),d.createElement(V,M({visible:C,leavedClassName:"".concat(s,"-content-hidden")},w,{forceRender:k,removeOnLeave:K}),function($,H){var L=$.className,W=$.style;return d.createElement(T,{ref:H,prefixCls:s,className:L,style:W,isActive:C,forceRender:k,role:P?"tabpanel":null},h)}))}}]),i}(d.Component);q.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};function O(p){var v=p;if(!Array.isArray(v)){var i=J(v);v=i==="number"||i==="string"?[v]:[]}return v.map(function(t){return String(t)})}var R=function(p){U(i,p);var v=j(i);function i(t){var e;D(this,i),e=v.call(this,t),e.onClickItem=function(a){var l=e.state.activeKey;if(e.props.accordion)l=l[0]===a?[]:[a];else{l=G(l);var s=l.indexOf(a),c=s>-1;c?l.splice(s,1):l.push(a)}e.setActiveKey(l)},e.getNewChild=function(a,l){if(!a)return null;var s=e.state.activeKey,c=e.props,h=c.prefixCls,C=c.openMotion,K=c.accordion,P=c.destroyInactivePanel,k=c.expandIcon,w=c.collapsible,u=a.key||String(l),y=a.props,x=y.header,N=y.headerClass,b=y.destroyInactivePanel,I=y.collapsible,A=!1;K?A=s[0]===u:A=s.indexOf(u)>-1;var _=I??w,m={key:u,panelKey:u,header:x,headerClass:N,isActive:A,prefixCls:h,destroyInactivePanel:b??P,openMotion:C,accordion:K,children:a.props.children,onItemClick:_==="disabled"?null:e.onClickItem,expandIcon:k,collapsible:_};return typeof a.type=="string"?a:(Object.keys(m).forEach(function(E){typeof m[E]>"u"&&delete m[E]}),d.cloneElement(a,m))},e.getItems=function(){var a=e.props.children;return Q(a).map(e.getNewChild)},e.setActiveKey=function(a){"activeKey"in e.props||e.setState({activeKey:a}),e.props.onChange(e.props.accordion?a[0]:a)};var o=t.activeKey,r=t.defaultActiveKey,n=r;return"activeKey"in t&&(n=o),e.state={activeKey:O(n)},e}return F(i,[{key:"shouldComponentUpdate",value:function(e,o){return!S(this.props,e)||!S(this.state,o)}},{key:"render",value:function(){var e,o=this.props,r=o.prefixCls,n=o.className,a=o.style,l=o.accordion,s=g((e={},f(e,r,!0),f(e,n,!!n),e));return d.createElement("div",{className:s,style:a,role:l?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var o={};return"activeKey"in e&&(o.activeKey=O(e.activeKey)),o}}]),i}(d.Component);R.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1};R.Panel=q;R.Panel;export{R as C};
