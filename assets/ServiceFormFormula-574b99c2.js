import{j as e,a as p,F as D,c as pe}from"./@emotion-63839449.js";import{P as c}from"./prop-types-1172f4d5.js";import{I as k,S as L}from"./index-43183512.js";import{F as m}from"./index-687ba9e6.js";import"./lodash-88fe09e6.js";import"./moment-a468e1f9.js";import{l as r,bZ as ye,bM as ue,b_ as ge,b$ as X,c0 as be,c1 as xe,c2 as Z,I as Y,Y as F,c3 as J,c4 as V,bU as fe,c5 as te,c6 as ee,bS as ne,c7 as re,c8 as le,c9 as $,ca as _e,cb as Ie}from"./index-c2ded735.js";import"./file-saver-40cf32a9.js";import{k as A,d as ie}from"./index-b17d22e5.js";import{R as C,b as l,c as N,B as U,S as M,I as Ce}from"./antd-f9eae174.js";import"./react-4fd50329.js";import"./react-redux-896b353b.js";import"./@firebase-43527ee1.js";import{f as j}from"./formatNumberWithPrecision-689b8fea.js";import{M as q}from"./currency-cb786ed8.js";function ae({isEdit:o=!1,isDefaultService:n=!1,isShowCheckbox:d=!1,isParking:i,form:I}){return e(D,{children:e(C,{children:p(l,{xs:24,sm:23,children:[p(C,{gutter:16,children:[e(l,{xs:24,sm:12,children:e(m.Item,{name:"name",rules:[{required:!0,transform:t=>t&&t.toString().trim()}],label:`${r.label.service_name} *`,children:e(k,{placeholder:r.label.service_name,maxLength:50,allowClear:!0})})}),p(l,{style:{display:"flex",flexDirection:"row"},xs:24,sm:12,children:[e(m.Item,{label:e("div",{}),name:"status",valuePropName:"checked",children:e(N,{children:r.status.staff_status_active})}),e(m.Item,{style:{display:d?"flex":"none"},label:e("div",{}),name:"isSaveNumberUseInMonth",valuePropName:"checked",children:e(N,{children:r.save_number_use_in_month})}),e(m.Item,{style:{display:d?"flex":"none"},label:e("div",{}),valuePropName:"checked",name:"isUsageFactor",disabled:o,children:e(N,{children:r.utilize_coefficient})}),!n||n&&i?e(m.Item,{style:{display:"flex"},label:e("div",{}),valuePropName:"checked",name:"isServiceParking",disabled:o||n&&i,children:e(N,{children:r.service_parking})}):null]}),e(l,{xs:24,sm:12,children:e(m.Item,{name:"enName",label:`${r.label.en_name}`,rules:[{transform:t=>t&&t.toString().trim()}],children:e(k,{placeholder:r.label.en_name,maxLength:50,allowClear:!0})})}),e(l,{xs:24,sm:12,children:e(m.Item,{name:"identifier",rules:[{required:!0,transform:t=>t&&t.toString().trim()}],label:`${r.label.service_code} *`,children:e(k,{placeholder:r.label.service_code,maxLength:50,style:{textTransform:"uppercase"},disabled:n})})}),e(l,{xs:24,sm:12,children:e(m.Item,{name:"serviceType",rules:[{required:!0,transform:t=>t&&t.toString().trim()}],label:`${r.label.type_of_service} *`,children:e(L,{fluid:"true",placeholder:r.label.type_of_service,disabled:o,children:ye.map(t=>e(L.Option,{value:t.id,children:t.name},t.id))})})}),e(l,{xs:24,sm:12,children:e(m.Item,{name:"measureUnit",rules:[{required:!0,transform:t=>t&&t.toString().trim()}],label:`${r.label.measure_unit} *`,children:e(k,{placeholder:r.label.measure_unit,allowClear:!0,maxLength:50})})})]}),p(C,{gutter:16,children:[e(l,{xs:24,sm:12,children:e(m.Item,{name:"feePeriodType",rules:[{required:!0}],label:`${r.fee_collection_period} *`,children:e(L,{fluid:"true",allowClear:!1,placeholder:r.label.type_of_service,children:ue.map(t=>e(L.Option,{value:t.id,children:t.name},t.id))})})}),e(l,{xs:24,sm:12,children:e(m.Item,{name:"paymentPeriodType",label:r.payment_period_type,children:e(L,{fluid:"true",allowClear:!1,placeholder:r.payment_period_type,children:ge.map(t=>e(L.Option,{value:t.id,children:t.name},t.id))})})}),e(l,{xs:24,sm:24,children:e(m.Item,{noStyle:!0,shouldUpdate:(t,y)=>t.paymentPeriodType!==y.paymentPeriodType,children:({getFieldValue:t})=>{const y=t("paymentPeriodType");let x="";return y===X?x=r.in_quarter:y===be&&(x=r.in_year),e(m.Item,{label:r.payment_expire,className:"site-input-group-wrapper",children:p(k.Group,{compact:!0,children:[e(m.Item,{name:["paymentExpired","date"],noStyle:!0,children:e(A,{style:{width:"calc(50% - 120px)"},placeholder:r.date,min:"1",max:"31"})}),e(k,{style:{width:120,pointerEvents:"none",backgroundColor:"#fafafa",textAlign:"center"},value:r.month1}),e(m.Item,{name:["paymentExpired","month"],noStyle:!0,children:e(A,{style:{width:"calc(50% - 120px)"},type:"number",placeholder:r.month,disabled:y===xe,min:"1",max:y===X?3:12})}),e(k,{style:{width:120,pointerEvents:"none",backgroundColor:"#fafafa",textAlign:"center"},value:x})]})})}})})]}),e(C,{gutter:16,children:e(l,{xs:24,sm:24,children:e(m.Item,{name:"description",label:r.description,rules:[{transform:t=>t&&t.toString().trim()}],children:e(k.TextArea,{autoSize:{minRows:4,maxRows:4},placeholder:r.description,maxLength:1055,allowClear:!0})})})})]})})})}ae.propTypes={isEdit:c.bool,isDefaultService:c.bool,isShowCheckbox:c.bool,form:c.objectOf(c.any),isParking:c.bool};ae.defaultProps={isEdit:!1,isDefaultService:!1,isShowCheckbox:!1,form:{},isParking:!1};const Te=(o,n)=>({getFieldValue:d})=>({validator(i,I){if(I){const t=d(n);if(t!=null&&t.some((y,x)=>{var u;return((u=y==null?void 0:y.key)==null?void 0:u.trim())===(I==null?void 0:I.trim())&&x!==o.name}))return Promise.reject(r.status.key_exist)}return Promise.resolve()}}),ce=(o,n)=>({getFieldValue:d})=>({validator(i,I){if(I){const t=d(n);if(t!=null&&t.some((y,x)=>{var u;return((u=y==null?void 0:y.name)==null?void 0:u.trim())===(I==null?void 0:I.trim())&&x!==o.name}))return Promise.reject(r.status.name_already_exists)}return Promise.resolve()}});function se({form:o,name:n,isEdit:d=!1,isParking:i=!1}){const[I]=F();return e(C,{gutter:16,children:e(l,{xs:24,sm:24,children:e(m.List,{name:n,children:(t,{add:y,remove:x})=>p("div",{children:[t.map((u,a)=>p(C,{children:[e(l,{xs:24,sm:23,children:p(C,{children:[e(l,{xs:24,sm:8,children:e(m.Item,{name:[u.name,"key"],fieldKey:[u.fieldKey,"key"],label:`${r.label.key} *`,rules:[Te(u,n),{required:!0,transform:s=>s&&s.toString().trim()}],children:e(k,{placeholder:r.label.key,disabled:i,maxLength:50,allowClear:!0})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{name:[u.name,"name"],fieldKey:[u.fieldKey,"name"],label:`${r.label.name} *`,rules:[{required:!0,transform:s=>s&&s.toString().trim()}],children:e(k,{placeholder:r.label.name,disabled:i,maxLength:50,allowClear:!0})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{name:[u.name,"type"],fieldKey:[u.fieldKey,"type"],label:`${r.label.type} *`,rules:[{required:!0}],children:e(L,{fluid:"true",placeholder:r.label.type,disabled:i,children:Z.map(s=>e(L.Option,{value:s.id,children:s.name},s.id))})})})]})}),!i&&e(l,{xs:24,sm:1,children:e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e(Y,{onClick:()=>{x(u.name)},style:{fontSize:I.fontSizeLargeIcon},name:"icon-minus-circle-outlined"})})})]},u.key)),!i&&e("div",{children:p(U,{style:{padding:0},type:"link",onClick:()=>{var u,a;y({type:(a=(u=Z)==null?void 0:u[0])==null?void 0:a.id})},children:["+ ",r.label.add," ",r.label.information_require]})})]})})})})}se.propTypes={form:c.objectOf(c.any),isEdit:c.bool,isParking:c.bool,name:c.string};se.defaultProps={form:{},isEdit:!1,isParking:!1,name:""};function me({form:o,name:n,onDeleteSurcharge:d,isLoadingDelete:i}){const[I]=F(),t=y=>o==null?void 0:o.getFieldValue([n,y,"id"]);return e(C,{gutter:16,children:e(l,{xs:24,sm:24,children:e(m.List,{name:n,children:(y,{add:x,remove:u})=>p("div",{children:[y.map((a,s)=>p(C,{children:[e(l,{xs:24,sm:23,children:p(C,{children:[e(l,{xs:24,sm:8,children:e(m.Item,{name:[a.name,"name"],fieldKey:[a.fieldKey,"name"],label:`${r.label.name} *`,rules:[ce(a,n),{required:!0,transform:g=>g&&g.toString().trim()}],children:e(k,{placeholder:r.label.name,maxLength:50,allowClear:!0})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{name:[a.name,"type"],fieldKey:[a.fieldKey,"type"],label:`${r.label.type} *`,rules:[{required:!0}],children:e(L,{fluid:"true",placeholder:r.label.type,children:J.map(g=>e(L.Option,{value:g.id,children:g.name},g.id))})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{shouldUpdate:(g,h)=>{var b,S,T,f;return((S=(b=g==null?void 0:g[n])==null?void 0:b[a.name])==null?void 0:S.type)!==((f=(T=h==null?void 0:h[n])==null?void 0:T[a.name])==null?void 0:f.type)},style:{margin:0},children:({getFieldValue:g})=>e(m.Item,{name:[a.name,"price"],fieldKey:[a.fieldKey,"price"],label:`${r.label.value} *`,rules:[{required:!0,type:"number",max:q,min:0}],children:e(A,{min:0,placeholder:r.label.value,formatter:j,precision:2,allowClear:!0})})})})]})}),e(l,{xs:24,sm:1,children:e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:i?e(M,{}):e(Y,{onClick:()=>{t(a.name)&&d?d(t(a.name),u,a.name):u(a.name)},style:{fontSize:I.fontSizeLargeIcon},name:"icon-minus-circle-outlined"})})})]},a.key)),e("div",{children:p(U,{style:{padding:0},type:"link",onClick:()=>{var a;x({type:(a=J[0])==null?void 0:a.id})},children:["+ ",r.label.add," ",r.label.surcharge]})})]})})})})}me.propTypes={form:c.objectOf(c.any),name:c.string,onDeleteSurcharge:c.func,isLoadingDelete:c.bool};me.defaultProps={form:{},name:"",onDeleteSurcharge:()=>{},isLoadingDelete:!1};function oe({form:o,name:n,onDeletePromotion:d,isLoadingDelete:i}){const[I]=F(),t=y=>o==null?void 0:o.getFieldValue([n,y,"id"]);return e(C,{gutter:16,children:e(l,{xs:24,sm:24,children:e(m.List,{name:n,children:(y,{add:x,remove:u})=>p("div",{children:[y.map((a,s)=>p(C,{children:[e(l,{xs:24,sm:23,children:p(C,{children:[e(l,{xs:24,sm:8,children:e(m.Item,{name:[a.name,"name"],fieldKey:[a.fieldKey,"name"],label:`${r.label.name} *`,rules:[ce(a,n),{required:!0,transform:g=>g&&g.toString().trim()}],children:e(k,{placeholder:r.label.name,maxLength:50,allowClear:!0})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{name:[a.name,"type"],fieldKey:[a.fieldKey,"type"],label:`${r.label.type} *`,rules:[{required:!0}],children:e(L,{fluid:"true",placeholder:r.label.type,children:V.map(g=>e(L.Option,{value:g.id,children:g.name},g.id))})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{name:[a.name,"price"],fieldKey:[a.fieldKey,"price"],label:`${r.label.value} *`,rules:[{required:!0,type:"number",min:0,max:q}],children:e(A,{min:0,placeholder:r.label.value,formatter:j,precision:2,allowClear:!0})})})]})}),e(l,{xs:24,sm:1,children:e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:i?e(M,{}):e(Y,{onClick:()=>{t(a.name)&&d?d(t(a.name),u,a.name):u(a.name)},style:{fontSize:I.fontSizeLargeIcon},name:"icon-minus-circle-outlined"})})})]},a.key)),e("div",{children:p(U,{style:{padding:0},type:"link",onClick:()=>{var a;x({type:(a=V[0])==null?void 0:a.id})},children:["+ ",r.label.add," ",r.label.promotion]})})]})})})})}oe.propTypes={form:c.objectOf(c.any),name:c.string,onDeletePromotion:c.func,isLoadingDelete:c.bool};oe.defaultProps={form:{},name:"",onDeletePromotion:()=>{},isLoadingDelete:!1};const Se=pe(Ce,{target:"e1xd0m580"})("cursor:pointer;padding:6px;&:hover{background-color:",o=>o.theme.primaryColor,";}border:",o=>o.selected?`1px solid ${o.theme.primaryColor}`:"none",";");function de({form:o,name:n,isLoading:d,icons:i}){const[I]=F(),t=y=>()=>{o.setFieldsValue({[n]:y})};return e(D,{children:d?e(M,{}):e(m.Item,{shouldUpdate:(y,x)=>y.icon!==x.icon,style:{margin:0},children:({getFieldValue:y})=>e(m.Item,{name:n,children:e("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:i&&i.length>0&&i.map(x=>e("div",{style:{margin:"3px"},children:e(Se,{theme:I,preview:!1,alt:"Icon service",onClick:t(x),width:60,height:60,selected:x===y("icon"),src:x})},x))})})})})}de.propTypes={form:c.objectOf(c.any),name:c.string,isLoading:c.bool,icons:c.arrayOf(c.any)};de.defaultProps={form:{},name:"",isLoading:!1,icons:[]};const w=(o,n,d,i)=>({getFieldValue:I})=>({validator(t,y){if(y){const x=I([i,o.name,d]);if(x!=null&&x.some((u,a)=>{var s;return((s=u==null?void 0:u.name)==null?void 0:s.trim())===(y==null?void 0:y.trim())&&a!==n.name}))return Promise.reject(r.formula_name_same)}return Promise.resolve()}}),Ee=(o,n,d,i)=>({getFieldValue:I})=>({validator(t,y){var u;const x=I([i,o.name,d,n.name-1,"to"]);return x&&y&&y<x+2?Promise.reject((u=r.error.show_error_formula_accumulated)==null?void 0:u.replace("{total}",x+1)):Promise.resolve()}}),Le=(o,n,d,i,I)=>({getFieldValue:t})=>({validator(y,x){const u=t([i,o.name,d])||[];return(u==null?void 0:u.reduce((s,g)=>{const h=g!=null&&g.percent?j(g==null?void 0:g.percent.toString()):0;return s=(g!=null&&g.percent?Number(h):0)+Number(s),s},0))!==100?Promise.reject(r.error.show_error_formula_percent):Promise.resolve()}}),z=({form:o,fieldParent:n,fieldParentName:d,name:i,onDeleteFormula:I})=>{const[t]=F(),y=x=>o==null?void 0:o.getFieldValue([d,n.name,i,x,"id"]);return e(C,{gutter:16,children:p(l,{xs:24,sm:24,children:[e(C,{children:e(l,{xs:24,sm:23,children:p(C,{children:[e(l,{xs:24,sm:12,children:e("div",{className:"ant-form-item-label",children:p("label",{htmlFor:"name",children:[r.label.name," *"]})})}),e(l,{xs:24,sm:12,style:{paddingLeft:10},children:e("div",{className:"ant-form-item-label",children:p("label",{htmlFor:"price",children:[r.label.unit_price," *"]})})})]})})}),e(m.List,{name:[n==null?void 0:n.name,i],children:(x,{add:u,remove:a})=>p("div",{children:[x.map((s,g)=>p(C,{style:{margin:0},children:[e(l,{xs:24,sm:23,children:p(C,{children:[e(l,{xs:24,sm:12,children:e(m.Item,{shouldUpdate:(h,b)=>h.serviceType!==b.serviceType,style:{margin:0},children:({getFieldValue:h})=>e(D,{children:h("serviceType")===fe?e(m.Item,{name:[s.name,"name"],rules:[w(n,s,i,d),{required:!0}],children:e(L,{fluid:"true",placeholder:r.label.name,children:te.map(b=>e(L.Option,{value:b.id,children:b.name},b.id))})}):e(m.Item,{name:[s.name,"name"],rules:[w(n,s,i,d),{required:!0,transform:b=>b&&b.toString().trim()}],children:e(k,{placeholder:r.label.name,maxLength:50,allowClear:!0})})})})}),e(l,{xs:24,sm:12,style:{paddingLeft:10},children:e(m.Item,{name:[s.name,"price"],rules:[{required:!0,type:"number",min:0,max:q}],children:e(A,{min:0,placeholder:r.label.rent_price,formatter:j,precision:4})})})]})}),e(l,{xs:24,sm:1,children:e(m.Item,{shouldUpdate:(h,b)=>{var S,T,f,E,_,O;return((f=(T=(S=h==null?void 0:h[d])==null?void 0:S[n.name])==null?void 0:T[i])==null?void 0:f.length)!==((O=(_=(E=b==null?void 0:b[d])==null?void 0:E[n.name])==null?void 0:_[i])==null?void 0:O.length)},style:{margin:0},children:({getFieldValue:h})=>{var b;return((b=h([d,n.name,i]))==null?void 0:b.length)!==1?e(m.Item,{style:{margin:0},children:e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e(Y,{onClick:()=>{y(s.name)&&I?I(y(s.name),a,s.name):a(s.name)},style:{fontSize:t.fontSizeLargeIcon},name:"icon-minus-circle-outlined"})})}):null}})})]},s.key)),e("div",{children:p(U,{style:{padding:0},type:"link",onClick:()=>{u()},children:["+ ",r.label.add]})})]})})]})})};z.propTypes={fieldParent:c.objectOf(c.any),fieldParentName:c.string,form:c.objectOf(c.any),name:c.string,onDeleteFormula:c.func};z.defaultProps={fieldParent:{},fieldParentName:"",form:{},name:"",onDeleteFormula:void 0};const P=({form:o,fieldParent:n,fieldParentName:d,name:i})=>{const[I]=F(),t=()=>()=>{o.validateFields()};return e(C,{gutter:16,children:p(l,{xs:24,sm:24,children:[e(C,{children:e(l,{xs:24,sm:23,children:p(C,{children:[e(l,{xs:24,sm:12,children:e("div",{className:"ant-form-item-label",children:p("label",{htmlFor:"name",children:[r.label.name," *"]})})}),e(l,{xs:24,sm:6,style:{paddingLeft:10},children:e("div",{className:"ant-form-item-label",children:p("label",{htmlFor:"percent",children:[r.label.norm," *"]})})}),e(l,{xs:24,sm:6,style:{paddingLeft:10},children:e("div",{className:"ant-form-item-label",children:p("label",{htmlFor:"price",children:[r.label.unit_price," *"]})})})]})})}),e(m.List,{name:[n==null?void 0:n.name,i],children:(y,{add:x,remove:u})=>p("div",{children:[y.map((a,s)=>p(C,{style:{margin:0},children:[e(l,{xs:24,sm:23,children:p(C,{children:[e(l,{xs:24,sm:12,children:e(m.Item,{name:[a.name,"name"],rules:[w(n,a,i,d),{required:!0,transform:g=>g&&g.toString().trim()}],style:{margin:0},children:e(k,{placeholder:r.label.name,maxLength:50,allowClear:!0})})}),e(l,{xs:24,sm:6,style:{paddingLeft:10},children:e(m.Item,{name:[a.name,"percent"],rules:[Le(n,a,i,d),{required:!0,type:"number",min:0,max:100}],validateTrigger:["onChange","onBlur"],children:e(A,{min:0,max:100,placeholder:r.label.norm,formatter:j,precision:2,onChange:ie(t())})})}),e(l,{xs:24,sm:6,style:{paddingLeft:10},children:e(m.Item,{name:[a.name,"price"],rules:[{required:!0,type:"number",min:0,max:q}],children:e(A,{min:0,placeholder:r.label.rent_price,formatter:j,precision:2})})})]})}),e(l,{xs:24,sm:1,children:e(m.Item,{shouldUpdate:(g,h)=>{var b,S,T,f,E,_;return((T=(S=(b=g==null?void 0:g[d])==null?void 0:b[n.name])==null?void 0:S[i])==null?void 0:T.length)!==((_=(E=(f=h==null?void 0:h[d])==null?void 0:f[n.name])==null?void 0:E[i])==null?void 0:_.length)},style:{margin:0},children:({getFieldValue:g})=>{var h;return((h=g([d,n.name,i]))==null?void 0:h.length)!==1?e(m.Item,{style:{margin:0},children:e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e(Y,{onClick:()=>{u(a.name)},style:{fontSize:I.fontSizeLargeIcon},name:"icon-minus-circle-outlined"})})}):null}})})]},a.key)),e("div",{children:p(U,{style:{padding:0,marginBottom:15},type:"link",onClick:()=>{x()},children:["+ ",r.label.add]})})]})})]})})};P.propTypes={fieldParent:c.objectOf(c.any),fieldParentName:c.string,form:c.objectOf(c.any),name:c.string};P.defaultProps={fieldParent:{},fieldParentName:"",form:{},name:""};const B=({form:o,fieldParent:n,fieldParentName:d,name:i})=>{const[I]=F(),t=(x,u)=>()=>{var s,g,h,b,S;const a=o.getFieldValue([d,n.name,i])||[];if(a.length===2){const T=o.getFieldValue(d);T[n.name][i]=[{from:0,to:void 0,price:(s=a==null?void 0:a[0])==null?void 0:s.price}],o.setFieldsValue({[d]:T})}else{const T=o.getFieldValue(d),f=a.filter((E,_)=>_!==u);f[0]={from:0,to:(g=f==null?void 0:f[0])==null?void 0:g.to,price:(h=f==null?void 0:f[0])==null?void 0:h.price},f[(f==null?void 0:f.length)-1]={from:((b=f==null?void 0:f[(f==null?void 0:f.length)-2])==null?void 0:b.to)+1,to:void 0,price:(S=f==null?void 0:f[(f==null?void 0:f.length)-1])==null?void 0:S.price},T[n.name][i]=f,o.setFieldsValue({[d]:T})}},y=x=>u=>{if((o.getFieldValue([d,n.name,i])||[]).length>1){const s=o.getFieldValue(d);s[n.name][i][x+1]?s[n.name][i][x+1].from=u+1:s[n.name][i][x+1]={from:u+1},o.setFieldsValue({[d]:s})}};return e(C,{gutter:16,children:p(l,{xs:24,sm:24,children:[e(C,{children:e(l,{xs:24,sm:23,children:p(C,{children:[e(l,{xs:24,sm:8,children:e("div",{className:"ant-form-item-label",children:p("label",{htmlFor:"from",children:[r.label.from," *"]})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e("div",{className:"ant-form-item-label",children:e("label",{htmlFor:"to",children:r.label.to})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e("div",{className:"ant-form-item-label",children:p("label",{htmlFor:"price",children:[r.label.unit_price," *"]})})})]})})}),e(m.List,{name:[n==null?void 0:n.name,i],children:(x,{add:u,remove:a})=>p("div",{children:[x.map((s,g)=>p(C,{style:{margin:0},children:[e(l,{xs:24,sm:23,children:p(C,{gutter:16,children:[e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{name:[s.name,"from"],rules:[{required:!0}],children:e(A,{placeholder:r.label.from,formatter:h=>ee(h),disabled:!0})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{shouldUpdate:(h,b)=>{var S,T,f,E,_,O;return((f=(T=(S=h==null?void 0:h[d])==null?void 0:S[n==null?void 0:n.name])==null?void 0:T[i])==null?void 0:f.length)!==((O=(_=(E=b==null?void 0:b[d])==null?void 0:E[n==null?void 0:n.name])==null?void 0:_[i])==null?void 0:O.length)},style:{margin:0},children:({getFieldValue:h})=>{const b=h([d,n.name,i])||[];return e(m.Item,{name:[s.name,"to"],rules:[Ee(n,s,i,d),s.name===b.length-1?{required:!1,type:"integer",min:0,max:q}:{required:!0,type:"integer",min:0,max:q}],children:e(A,{min:0,placeholder:r.label.to,formatter:S=>ee(S),disabled:b.length-1===s.name,onChange:ie(y(g))})})}})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{name:[s.name,"price"],rules:[{required:!0,type:"number",min:0,max:q}],children:e(A,{min:0,placeholder:r.label.rent_price,formatter:j,precision:2})})})]})}),e(l,{xs:24,sm:1,children:e(m.Item,{shouldUpdate:(h,b)=>{var S,T,f,E,_,O;return((f=(T=(S=h==null?void 0:h[d])==null?void 0:S[n.name])==null?void 0:T[i])==null?void 0:f.length)!==((O=(_=(E=b==null?void 0:b[d])==null?void 0:E[n.name])==null?void 0:_[i])==null?void 0:O.length)},style:{margin:0},children:({getFieldValue:h})=>{var b;return((b=h([d,n.name,i]))==null?void 0:b.length)!==1?e(m.Item,{style:{margin:0},children:e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e(Y,{onClick:t(a,s.name),style:{fontSize:I.fontSizeLargeIcon},name:"icon-minus-circle-outlined"})})}):null}})})]},s.key)),e("div",{children:p(U,{style:{padding:0},type:"link",onClick:()=>{u()},children:["+ ",r.label.add]})})]})})]})})};B.propTypes={fieldParent:c.objectOf(c.any),fieldParentName:c.string,form:c.objectOf(c.any),name:c.string};B.defaultProps={fieldParent:{},fieldParentName:"",form:{},name:""};const H=({form:o,fieldParent:n,fieldParentName:d,name:i,onDeleteFormula:I})=>{const[t]=F(),y=x=>o==null?void 0:o.getFieldValue([d,n.name,i,x,"id"]);return e(C,{gutter:16,children:p(l,{xs:24,sm:24,children:[e(C,{children:e(l,{xs:24,sm:23,children:p(C,{children:[e(l,{xs:24,sm:8,children:e("div",{className:"ant-form-item-label",children:p("label",{htmlFor:"name",children:[r.label.name," *"]})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e("div",{className:"ant-form-item-label",children:p("label",{htmlFor:"parkingType",children:[r.label.parking_type," *"]})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e("div",{className:"ant-form-item-label",children:p("label",{htmlFor:"price",children:[r.label.unit_price," *"]})})})]})})}),e(m.List,{name:[n==null?void 0:n.name,i],children:(x,{add:u,remove:a})=>p("div",{children:[x.map((s,g)=>p(C,{style:{margin:0},children:[e(l,{xs:24,sm:23,children:p(C,{children:[e(l,{xs:24,sm:8,children:e(m.Item,{name:[s.name,"name"],rules:[w(n,s,i,d),{required:!0,transform:h=>h&&h.toString().trim()}],children:e(k,{placeholder:r.label.name,maxLength:50,allowClear:!0})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{name:[s.name,"parkingType"],rules:[{required:!0}],children:e(L,{fluid:"true",placeholder:r.label.name,children:te.map(h=>e(L.Option,{value:h.id,children:h.name},h.id))})})}),e(l,{xs:24,sm:8,style:{paddingLeft:10},children:e(m.Item,{name:[s.name,"price"],rules:[{required:!0,type:"number",min:0,max:q}],children:e(A,{min:0,placeholder:r.label.rent_price,formatter:j,precision:2})})})]})}),e(l,{xs:24,sm:1,children:e(m.Item,{shouldUpdate:(h,b)=>{var S,T,f,E,_,O;return((f=(T=(S=h==null?void 0:h[d])==null?void 0:S[n.name])==null?void 0:T[i])==null?void 0:f.length)!==((O=(_=(E=b==null?void 0:b[d])==null?void 0:E[n.name])==null?void 0:_[i])==null?void 0:O.length)},style:{margin:0},children:({getFieldValue:h})=>{var b;return((b=h([d,n.name,i]))==null?void 0:b.length)!==1?e(m.Item,{style:{margin:0},children:e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e(Y,{onClick:()=>{y(s.name)&&I?I(y(s.name),a,s.name):a(s.name)},style:{fontSize:t.fontSizeLargeIcon},name:"icon-minus-circle-outlined"})})}):null}})})]},s.key)),e("div",{children:p(U,{style:{padding:0},type:"link",onClick:()=>{u()},children:["+ ",r.label.add]})})]})})]})})};H.propTypes={fieldParent:c.objectOf(c.any),fieldParentName:c.string,form:c.objectOf(c.any),name:c.string,onDeleteFormula:c.func};H.defaultProps={fieldParent:{},fieldParentName:"",form:{},name:"",onDeleteFormula:()=>{}};c.objectOf(c.any),c.objectOf(c.any),c.func;function he({form:o,name:n,onChangeFormulaType:d,isParking:i=!1,onDeleteFormula:I,isLoadingDelete:t}){var g,h,b,S;const[y]=F(),x=T=>o==null?void 0:o.getFieldValue([n,T,"id"]),u=T=>o.getFieldValue([n,T,"formulaType"])!==$,a={formulaType:o.getFieldValue("serviceType")===ne?(h=(g=re)==null?void 0:g[0])==null?void 0:h.id:(S=(b=le)==null?void 0:b[0])==null?void 0:S.id,formula:[{from:0}]},s=T=>o==null?void 0:o.getFieldValue([n,T,"id"]);return e(D,{children:e(m.List,{name:n,children:(T,{add:f,remove:E})=>p("div",{children:[T.map((_,O)=>e(C,{children:e(l,{xs:24,sm:23,children:p("div",{style:{border:"1px solid #d9d9d9",borderRadius:4,padding:8,marginBottom:16},children:[p(C,{children:[e(l,{xs:24,sm:23,children:e(m.Item,{shouldUpdate:(R,v)=>R.type!==v.type,style:{margin:0},children:({getFieldValue:R})=>{let v=le;return R("serviceType")===ne&&(v=re),e(m.Item,{label:`${r.label.price_formula} *`,name:[_.name,"formulaType"],fieldKey:[_.fieldKey,"formulaType"],rules:[{required:!0}],children:e(L,{fluid:"true",placeholder:r.label.price_formula,onChange:d(_.name),disabled:x(_.name)||i,children:v.map(K=>e(L.Option,{value:K.id,children:K.name},K.id))})})}})}),e(l,{xs:24,sm:1,children:e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:t?e(M,{}):e(Y,{onClick:()=>{s(_.name)&&I?I(s(_.name),E,_.name):E(_.name)},style:{fontSize:y.fontSizeLargeIcon},name:"icon-minus-circle-outlined"})})})]}),e(C,{gutter:16,children:e(l,{xs:24,sm:23,children:u(_.name)&&e(m.Item,{name:[_.name,"name"],fieldKey:[_.fieldKey,"name"],label:`${r.label.formula_name} *`,rules:[{required:!0,transform:R=>R&&R.toString().trim()}],children:e(k,{placeholder:r.label.formula_name,allowClear:!0,maxLength:50})})})}),e(C,{gutter:16,children:e(l,{xs:24,sm:24,children:e(m.Item,{style:{margin:0},shouldUpdate:(R,v)=>{var K,G,W,Q;return((G=(K=R==null?void 0:R[n])==null?void 0:K[_.name])==null?void 0:G.formulaType)!==((Q=(W=v==null?void 0:v[n])==null?void 0:W[_.name])==null?void 0:Q.formulaType)},children:({getFieldValue:R})=>p(D,{children:[R([n,_.name,"formulaType"])===$&&!i&&e(z,{form:o,fieldParent:_,name:"formula",fieldParentName:n}),R([n,_.name,"formulaType"])===_e&&e(P,{form:o,fieldParent:_,name:"formula",fieldParentName:n}),R([n,_.name,"formulaType"])===Ie&&e(B,{form:o,fieldParent:_,name:"formula",fieldParentName:n}),R([n,_.name,"formulaType"])===$&&i&&e(H,{form:o,fieldParent:_,name:"formula",fieldParentName:n,onDeleteFormula:I})]})})})})]},_.name)})},_.name)),e("div",{children:p(U,{style:{padding:0},type:"link",onClick:()=>{f(a)},children:["+ ",r.label.add," ",r.label.formula]})})]})})})}he.propTypes={form:c.objectOf(c.any),isParking:c.bool,name:c.string,onChangeFormulaType:c.func,onDeleteFormula:c.func,isLoadingDelete:c.bool};he.defaultProps={form:{},isParking:!1,name:"",isLoadingDelete:!1,onChangeFormulaType:()=>{},onDeleteFormula:void 0};export{ae as S,he as a,me as b,oe as c,se as d,de as e};
