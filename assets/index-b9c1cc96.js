import{j as e,a as C,u as Pe,F as ue}from"./@emotion-63839449.js";import{r as S}from"./react-4fd50329.js";import{P as k}from"./prop-types-1172f4d5.js";import{s as pe,K as te,b0 as Ee,ak as Ae,at as Ue,ag as De,cd as Ve,l as t,a3 as he,a as fe,ce as Be,a5 as W,I as H,cf as me,bH as Le,bI as we,cg as Ne,bG as Re,ch as ge,c6 as z,ci as Ce,cj as ve,ck as Ie,cl as Te,Y as Se,E as ye,cm as $e,cn as Me}from"./index-c2ded735.js";import"./react-redux-896b353b.js";import"./lodash-88fe09e6.js";import"./moment-a468e1f9.js";import"./file-saver-40cf32a9.js";import{u as ze}from"./useService-37d60dc0.js";import"./@firebase-43527ee1.js";import{u as Oe}from"./react-router-a4308f7b.js";import{B as ae}from"./index-881eef42.js";import{I as ie,S as V}from"./index-43183512.js";import{P as Ge,T as R,a as J,k as G,p as B,q as N}from"./index-b17d22e5.js";import{u as ne,F as _}from"./index-687ba9e6.js";import{w as re,B as qe,R as oe,b as T}from"./antd-f9eae174.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./@babel-b64fd0f9.js";import"./stylis-79144faa.js";import"./classnames-4ba1ba1a.js";import"./redux-10bbab4c.js";import"./react-router-dom-2a8f5f6d.js";import"./history-a1882333.js";import"./resolve-pathname-e210f2ac.js";import"./tiny-invariant-dd7d57d2.js";import"./react-dom-40621ea0.js";import"./scheduler-765c72db.js";import"./@redux-saga-8bafe09b.js";import"./redux-logger-e1c9ca90.js";import"./dompurify-8e338605.js";import"./query-string-f5cca1e7.js";import"./decode-uri-component-4138e85d.js";import"./split-on-first-4f1167c8.js";import"./filter-obj-2ed190f4.js";import"./oidc-client-7da0eaf7.js";import"./firebase-878887a2.js";import"./rc-pagination-c1e6a0ac.js";import"./rc-picker-2e3d5fe5.js";import"./rc-util-0bc219f3.js";import"./rc-trigger-570b13ec.js";import"./rc-motion-ae889c42.js";import"./rc-align-e5d7b12e.js";import"./dom-align-ecb06dd6.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-resize-observer-b9ad4e29.js";import"./@ant-design-cba9d434.js";import"./@ctrl-fb5a5473.js";import"./rc-tabs-dfd19a56.js";import"./rc-dropdown-5378dd0a.js";import"./rc-menu-b15ebfe9.js";import"./rc-overflow-6be96612.js";import"./rc-select-564caf01.js";import"./rc-virtual-list-8a7b82a6.js";import"./rc-collapse-11b7d3c4.js";import"./shallowequal-4542d6f7.js";import"./rc-drawer-317f0b4d.js";import"./@rc-component-5a112e55.js";import"./rc-field-form-ef5549aa.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./rc-image-e0357917.js";import"./rc-dialog-b1d1f07b.js";import"./rc-input-number-8bc068f7.js";import"./rc-rate-c64cf0d5.js";import"./rc-steps-2d1924c7.js";import"./rc-switch-b4e96de7.js";import"./rc-table-191ecc42.js";import"./rc-checkbox-018e8052.js";import"./rc-tree-67773537.js";import"./rc-tree-select-cb7eccc3.js";import"./copy-to-clipboard-64585c8c.js";import"./toggle-selection-93f4ad84.js";import"./rc-textarea-d01adcbb.js";import"./rc-input-02c2c2ba.js";import"./rc-upload-3ab0f08a.js";import"./rc-notification-d13dc43b.js";import"./rc-progress-4f1a7096.js";import"./rc-tooltip-08fa4217.js";import"./use-sync-external-store-5d1b6592.js";import"./idb-cdd1a92f.js";import"./path-to-regexp-ef8d5544.js";import"./account-86ffff50.js";import"./libphonenumber-js-0d5a9c92.js";import"./react-infinite-scroll-component-e33646cb.js";const Ye=i=>typeof i!="number"?!1:i>=0&&i!==1/0,We={name:"",serviceId:""},$=S.createContext({services:[],getServices:({idBuilding:i})=>{},serviceInUses:[],getServiceInUses:({idBuilding:i})=>{},contractTemplates:[],getContractTemplates:({filter:i,page:s,limit:g})=>{},loading:!1,tablePage:1,handleTablePageChange:i=>{},tablePageSize:pe,handleTablePageSizeChange:i=>{},filterObj:{},handleFilterChange:i=>{},formAddContractTemplate:{},showFormAddContractTemplate:()=>{},hideFormAddContractTemplate:()=>{},formUpdateContractTemplate:{},showFormUpdateContractTemplate:()=>{},hideFormUpdateContractTemplate:()=>{},formDetailContractTemplate:{},showFormDetailContractTemplate:()=>{},hideFormDetailContractTemplate:()=>{},serviceConfigPermissionWrite:!1,serviceConfigPermissionRead:!1}),le=({children:i})=>{const s=Oe(),{idBuilding:g}=s,[v,o]=S.useState(!1),[a,n]=S.useState(We),[u,I]=S.useState(1),[c,r]=S.useState(pe),[h,m]=S.useState([]),[P,f]=S.useState([]),{serviceInUses:y,getServiceInUses:A,services:U,getServices:D}=ze(),[E,p,F]=te(),[x,Q,q]=te(),[X,Z,j]=te(),Y=async({filter:L,page:be,limit:ke})=>{o(!0);const ee=await Ve({filter:L,idBuilding:g,limit:ke,page:be});ee.data&&(m(ee.data),f(ee.totalRecord)),o(!1)},l=L=>{L!==u&&I(L)},d=L=>{L!==c&&r(L)},b=L=>{n(L)},w=()=>{Y({filter:a,page:u,limit:c})},{getPermissionByModuleCode:O}=Ee(),M=O(Ae),Fe=(M==null?void 0:M[Ue])??!1,xe=(M==null?void 0:M[De])??!1,_e={idBuilding:g,serviceInUses:y,getServiceInUses:A,services:U,getServices:D,contractTemplates:h,totalContractTemplate:P,getContractTemplates:Y,refreshContractTemplates:w,loading:v,tablePage:u,handleTablePageChange:l,tablePageSize:c,handleTablePageSizeChange:d,filterObj:a,handleFilterChange:b,formAddContractTemplate:E,showFormAddContractTemplate:p,hideFormAddContractTemplate:F,formUpdateContractTemplate:x,showFormUpdateContractTemplate:Q,hideFormUpdateContractTemplate:q,formDetailContractTemplate:X,showFormDetailContractTemplate:Z,hideFormDetailContractTemplate:j,serviceConfigPermissionWrite:Fe,serviceConfigPermissionRead:xe};return e($.Provider,{value:_e,children:i})};le.propTypes={children:k.node};le.defaultProps={children:e("div",{})};const He=()=>{const{tablePage:i,tablePageSize:s,handleFilterChange:g,getContractTemplates:v,formFilter:o,services:a}=S.useContext($),n=c=>{g(c),v({filter:c,page:i,limit:s})},u=S.useMemo(()=>[{label:t.tariff,key:"name",component:e(ie,{placeholder:t.tariff}),visible:!0},{label:t.service,key:"serviceId",component:C(V,{fluid:"true",placeholder:t.service,children:[e(V.Option,{value:"",children:t.all_service},"service_0"),a.map(c=>e(V.Option,{value:c.id,children:c.name},c.id))]}),visible:!0}],[a]),I={name:"",serviceId:""};return e(Ge.FilterBox,{filters:u,onSearch:n,defaultFilter:I,formData:o})},Je=()=>{const{loading:i,idBuilding:s,tablePage:g,tablePageSize:v,handleTablePageChange:o,handleTablePageSizeChange:a,getContractTemplates:n,filterObj:u,contractTemplates:I,totalContractTemplate:c,showFormUpdateContractTemplate:r,showFormDetailContractTemplate:h,refreshContractTemplates:m,serviceConfigPermissionRead:P,serviceConfigPermissionWrite:f}=S.useContext($),y=he(),{layoutScrollRef:A}=S.useContext(fe),[U,D]=S.useState({code:void 0,codeLanguage:void 0}),E=Pe();ne(U.code,U.codeLanguage,{message:t.success,description:t.delete_data_success},()=>{m()});const p=l=>{h({contractTemplate:l})},F=l=>{r({contractTemplate:l})},x=l=>{J.confirm({cancelText:t.cancel,okText:t.confirm,title:t.confirm,content:`${t.do_you_want_to_delete_this_tariff}?`,onOk:async()=>{D({code:void 0,codeLanguage:void 0});try{const d=await Ne({idBuilding:s,idContractTemplate:l.id});if(D({code:d.code}),d.code===200)return Promise.resolve()}catch(d){D({code:d.code,codeLanguage:d.codeLanguage})}return Promise.reject()},afterClose:()=>{D({code:void 0,codeLanguage:void 0})}})},Q=(l,d)=>{l!==g&&(o(l),n({filter:u,page:l,limit:d})),d!==v&&(a(d),n({filter:u,page:l,limit:d}))},q=[{title:t.tariff,dataIndex:"name",key:"name",width:240,fixed:"left"},{title:t.service,dataIndex:"service",key:"service",width:120},{title:t.tax,dataIndex:"tax",key:"tax",width:100},{title:t.surcharge_tax,dataIndex:"surchargeTax",key:"surchargeTax",width:100},{title:t.formula,dataIndex:"formula",key:"formula",width:240,render:(l,d)=>e(re,{color:"success",children:l})},{title:t.surcharge,dataIndex:"surcharge",key:"surcharge",width:240,render:(l,d)=>{var b;return(b=d==null?void 0:d.surcharges)==null?void 0:b.map((w,O)=>e(re,{color:"success",children:w.name},O))}},{title:t.promotion,dataIndex:"promotion",key:"promotion",width:240,render:(l,d)=>{var b;return(b=d==null?void 0:d.promotions)==null?void 0:b.map((w,O)=>e(re,{color:"success",children:w.name},O))}},[P,f].includes(!0)?{title:t.actions,dataIndex:"actions",key:"actions",width:120,fixed:"right",align:"center",render:(l,d)=>{var b,w;return C(ue,{children:[P?e(H,{title:t.detail,style:{fontSize:E.iconSize,marginRight:E.margin.xs},name:"icon-eye-outlined",onClick:()=>{y({action:Be,label:W}),p(d.contractTemplate)}}):null,((w=(b=d==null?void 0:d.contractTemplate)==null?void 0:b.service)==null?void 0:w.status)!==me&&f&&e(H,{title:t.update,style:{marginRight:E.margin.xs,fontSize:E.iconSize},name:"icon-edit-outlined",onClick:()=>{y({action:Le,label:W}),F(d.contractTemplate)}}),f?e(H,{title:t.delete,style:{fontSize:E.iconSize},name:"icon-minus-circle-outlined",onClick:()=>{y({action:we,label:W}),x(d.contractTemplate)}}):null]})}}:null].filter(Boolean),X=I.map((l,d)=>{var b;return{key:l.id,name:l.name,service:l.service.name,tax:l.vat,surchargeTax:l.vatSurcharge,formula:((b=l==null?void 0:l.formula)==null?void 0:b.name)??"",surcharges:(l==null?void 0:l.surcharges)??[],promotions:(l==null?void 0:l.promotions)??[],contractTemplate:l}}),Z={pageSize:v,defaultCurrent:1,current:g,total:c,showQuickJumper:!0,showSizeChanger:!0,onChange:Q},j={x:q.reduce((l,d)=>l+d.width)},Y=l=>{var d,b;return((b=(d=l==null?void 0:l.contractTemplate)==null?void 0:d.service)==null?void 0:b.status)===me?"disabled":""};return e(R,{scroll:j,loading:i,sticky:{offsetScroll:E.offsetScrollX,getContainer:()=>A.current},columns:q,dataSource:X,pagination:Z,rowClassName:Y})},Ke=()=>{const{showFormAddContractTemplate:i,serviceConfigPermissionWrite:s}=S.useContext($),g=he(),v=()=>{i()};return e("div",{style:{textAlign:"right"},children:s?e(qe,{icon:e(H,{name:"icon-plus-circle-outlined"}),onClick:()=>{g({action:Re,label:W}),v()},type:"primary",children:t.add}):null})},K=({services:i,onServiceChange:s,disabledItems:g,isShowFactorForm:v})=>{const[o]=Se();return C(oe,{gutter:[12,0],children:[e(T,{span:"12",children:C(oe,{gutter:[12,0],children:[e(T,{span:"12",children:e(_.Item,{rules:[{required:!0}],name:"name",label:`${t.tariff} *`,children:e(ie,{placeholder:t.tariff})})}),e(T,{span:"12",children:e(_.Item,{name:"enName",label:t.english_name,children:e(ie,{placeholder:t.english_name})})}),e(T,{span:"12",children:e(_.Item,{name:"deferredInterest",label:t.deferred_interest,children:e(G,{min:"0",placeholder:t.deferred_interest})})}),e(T,{span:"12",children:e(_.Item,{name:"payTime",label:t.pay_time,children:e(G,{min:"0",placeholder:t.pay_time})})}),e(T,{span:"12",children:e(_.Item,{rules:[{required:!0}],name:"serviceId",label:`${t.service} *`,children:e(V,{onChange:s,allowClear:!0,disabled:g.includes("serviceId"),fluid:"true",placeholder:t.service,children:i.map(a=>e(V.Option,{value:a.id,children:a.name},a.id))})})}),v?e(T,{span:"12",children:e(_.Item,{name:"factor",label:`${t.coefficient} *`,rules:[{required:!0},{validator:(a,n)=>n?Ye(n)?Promise.resolve():Promise.reject(t.coefficient_must_be_greater_than_0):Promise.resolve()}],children:e(G,{placeholder:t.coefficient})})}):null,e(T,{span:"12",children:e(_.Item,{noStyle:!0,shouldUpdate:(a,n)=>a.serviceId!==n.serviceId,children:({getFieldValue:a})=>{var c;const n=!a("serviceId")||g.includes("formulaId");let u=[];const I=a("serviceId");return u=((c=i.find(r=>r.id===I))==null?void 0:c.formulas)??[],e(_.Item,{rules:[{required:!0}],name:"formulaId",label:`${t.formula} *`,children:e(V,{allowClear:!0,fluid:"true",disabled:n,placeholder:t.formula,children:u.map(r=>e(V.Option,{value:r.id,children:r.name},r.id))})})}})}),e(T,{span:"12",children:e(_.Item,{noStyle:!0,shouldUpdate:(a,n)=>a.serviceId!==n.serviceId,children:({getFieldValue:a})=>{var c;const n=!a("serviceId");let u=[];const I=a("serviceId");return u=((c=i.find(r=>r.id===I))==null?void 0:c.surcharges)??[],e(_.Item,{name:"surchargeIds",label:t.surcharge,children:e(V,{mode:"multiple",allowClear:!0,disabled:n,fluid:"true",placeholder:t.surcharge,children:u.map(r=>e(V.Option,{value:r.id,children:r.name},r.id))})})}})}),e(T,{span:"12",children:e(_.Item,{noStyle:!0,shouldUpdate:(a,n)=>a.serviceId!==n.serviceId,children:({getFieldValue:a})=>{var c;const n=!a("serviceId");let u=[];const I=a("serviceId");return u=((c=i.find(r=>r.id===I))==null?void 0:c.promotions)??[],e(_.Item,{name:"promotionId",label:t.promotion,children:e(V,{allowClear:!0,fluid:"true",disabled:n,placeholder:t.promotion,children:u.map(r=>e(V.Option,{value:r.id,children:r.name},r.id))})})}})}),e(T,{span:"12",children:e(_.Item,{name:"vat",label:t.tax,children:e(G,{min:"0",placeholder:t.tax})})}),e(T,{span:"12",children:e(_.Item,{name:"vatSurcharge",label:t.surcharge_tax,children:e(G,{min:"0",placeholder:t.surcharge_tax})})})]})}),e(T,{span:"12",children:e(_.Item,{noStyle:!0,shouldUpdate:(a,n)=>a!==n,children:({getFieldValue:a})=>{const n=a("serviceId"),u=a("formulaId"),I=a("surchargeIds")||[],c=a("promotionId"),r=i.find(p=>p.id===n),h=(r==null?void 0:r.formulas)??[],m=(r==null?void 0:r.surcharges)??[],P=(r==null?void 0:r.promotions)??[],f=h.find(p=>p.id===u),y=m.filter(p=>I.includes(p.id)),A=P.find(p=>p.id===c),U=[],D=[],E=[];if(f){const{formulaType:p,formula:F}=f;if(p===ge)U.push({key:F.name||t.formula,formula:F.name||t.formula,price:z(F.price)});else if(p===Ce)for(let x=0;x<F.length;x+=1)U.push({key:`${F[x].from}${F[x].to?` - ${F[x].to}`:""}`,formula:`${F[x].from}${F[x].to?` - ${F[x].to}`:""}`,price:z(F[x].price)});else if(p===ve)for(let x=0;x<F.length;x+=1)U.push({key:F[x].name,formula:F[x].name,price:z(F[x].price)})}if(y&&y.length)for(let p=0;p<y.length;p+=1)D.push({key:y[p].name,formula:y[p].name,price:`${y[p].price} ${y[p].type===Ie?"(%)":""}`});return A&&E.push({key:A.name,formula:A.name,price:`${A.price} (%)`}),C(ue,{children:[f&&C("div",{style:{marginBottom:o.margin},children:[f.name," - ",Te[f.formulaType].label,e(R,{bordered:!0,size:"small",pagination:!1,columns:[{title:t.formula,key:"formula",dataIndex:"formula"},{title:t.price,key:"price",dataIndex:"price"}],dataSource:U})]})||null,y&&y.length&&C("div",{style:{marginBottom:o.margin},children:[t.surcharge,e(R,{bordered:!0,size:"small",pagination:!1,columns:[{title:t.formula,key:"formula",dataIndex:"formula"},{title:t.price,key:"price",dataIndex:"price"}],dataSource:D})]})||null,A&&C("div",{style:{marginBottom:o.margin},children:[t.promotion,e(R,{bordered:!0,size:"small",pagination:!1,columns:[{title:t.formula,key:"formula",dataIndex:"formula"},{title:t.price,key:"price",dataIndex:"price"}],dataSource:E})]})||null]})}})})]})};K.propTypes={services:k.arrayOf(k.any),disabledItems:k.arrayOf(k.any),onServiceChange:k.func,isShowFactorForm:k.bool};K.defaultProps={services:[],disabledItems:[],onServiceChange:()=>{},isShowFactorForm:!1};const se=({hideModal:i})=>{const{serviceInUses:s,idBuilding:g,refreshContractTemplates:v}=S.useContext($),[o]=_.useForm(),[a,n]=S.useState({isFetching:!1,code:void 0,codeLanguage:void 0});ne(a.code,a.codeLanguage,{message:t.success,description:t.add_data_success},()=>{i(),v()});const u=async()=>{var h;if(o.setFieldsValue({...ye(o.getFieldsValue(),{})}),await o.validateFields()){n({isFetching:!0,code:void 0,codeLanguage:void 0});const m={name:o.getFieldValue("name"),enName:o.getFieldValue("enName"),deferredInterest:o.getFieldValue("deferredInterest"),factor:o.getFieldValue("factor"),payTime:o.getFieldValue("payTime"),serviceId:o.getFieldValue("serviceId"),serviceType:"",formulaId:o.getFieldValue("formulaId"),surcharges:(h=o.getFieldValue("surchargeIds"))==null?void 0:h.map(f=>({id:f})),promotions:o.getFieldValue("promotionId")?[{id:o.getFieldValue("promotionId")}]:[],vat:o.getFieldValue("vat"),vatSurcharge:o.getFieldValue("vatSurcharge")},P=s.find(f=>f.id===m.serviceId);m.serviceType=P.serviceType;try{const f=await $e({idBuilding:g,contractTemplate:m});n({isFetching:!1,code:f.code,codeLanguage:void 0})}catch(f){throw n({isFetching:!1,code:f.code,codeLanguage:f.codeLanguage}),f}}},I=()=>{i()},c=()=>{o.setFieldsValue({formulaId:void 0,surchargeIds:[],promotionId:void 0})};return e(J,{width:"calc(100vh - 5%)",title:t.add_tariff,open:!0,onOk:u,onCancel:I,okText:t.confirm,cancelText:t.cancel,okButtonProps:{disabled:a.isFetching,loading:a.isFetching},children:e(_,{initialValues:{name:"",englishName:"",deferredInterest:0,vat:0,vatSurcharge:0},layout:"vertical",form:o,name:"formAddContractTemplate",hideRequiredMark:!0,children:e(K,{onServiceChange:c,services:s,isShowFactorForm:!1})})})};se.propTypes={hideModal:k.func};se.defaultProps={hideModal:()=>{}};const de=({hideModal:i,contractTemplate:s})=>{var r,h,m;const{serviceInUses:g,idBuilding:v,refreshContractTemplates:o}=S.useContext($),[a]=_.useForm(),[n,u]=S.useState({isFetching:!1,code:void 0,codeLanguage:void 0});ne(n.code,n.codeLanguage,{message:t.success,description:t.update_data_success},()=>{i(),o()});const I=async()=>{var f;if(a.setFieldsValue({...ye(a.getFieldsValue(),{})}),await a.validateFields()){u({isFetching:!0,code:void 0,codeLanguage:void 0});const{id:y,serviceType:A,serviceId:U,formulaId:D}=s,E={name:a.getFieldValue("name"),enName:a.getFieldValue("enName"),deferredInterest:a.getFieldValue("deferredInterest"),factor:a.getFieldValue("factor"),payTime:a.getFieldValue("payTime"),serviceId:U,serviceType:A,formulaId:D,surcharges:(f=a.getFieldValue("surchargeIds"))==null?void 0:f.map(p=>({id:p})),promotions:a.getFieldValue("promotionId")?[{id:a.getFieldValue("promotionId")}]:[],vat:a.getFieldValue("vat"),vatSurcharge:a.getFieldValue("vatSurcharge")};try{const p=await Me({idBuilding:v,idContractTemplate:y,contractTemplate:E});u({isFetching:!1,code:p.code,codeLanguage:void 0})}catch(p){throw u({isFetching:!1,code:p.code,codeLanguage:p.codeLanguage}),p}}},c=()=>{i()};return e(J,{width:"calc(100vh - 5%)",title:t.update_tariff,open:!0,onOk:I,onCancel:c,okText:t.confirm,cancelText:t.cancel,okButtonProps:{disabled:n.isFetching,loading:n.isFetching},children:e(_,{initialValues:{name:s.name,enName:s.enName,deferredInterest:s.deferredInterest||0,factor:s.factor,payTime:s.payTime,serviceId:s.serviceId,formulaId:s.formulaId,surchargeIds:((r=s==null?void 0:s.surcharges)==null?void 0:r.map(P=>Number(P.id)))??[],promotionId:((m=(h=s==null?void 0:s.promotions)==null?void 0:h[0])==null?void 0:m.id)??void 0,vat:s.vat||0,vatSurcharge:s.vatSurcharge||0},layout:"vertical",form:a,name:"formUpdateContractTemplate",hideRequiredMark:!0,children:e(K,{disabledItems:["serviceId","formulaId"],services:g,isShowFactorForm:!1})})})};de.propTypes={hideModal:k.func,contractTemplate:k.objectOf(k.any)};de.defaultProps={hideModal:()=>{},contractTemplate:{}};const ce=({contractTemplate:i,hideModal:s})=>{var c;const[g]=Se(),{formula:v,surcharges:o,promotions:a}=i,n=[],u=[],I=[];if(v){const{formulaType:r,formula:h}=v;if(r===ge)n.push({key:h.name||t.formula,formula:h.name||t.formula,price:z(h.price)});else if(r===Ce)for(let m=0;m<h.length;m+=1)n.push({key:`${h[m].from}${h[m].to?` - ${h[m].to}`:""}`,formula:`${h[m].from}${h[m].to?` - ${h[m].to}`:""}`,price:z(h[m].price)});else if(r===ve)for(let m=0;m<h.length;m+=1)n.push({key:h[m].name,formula:h[m].name,price:z(h[m].price)})}if(o&&o.length)for(let r=0;r<o.length;r+=1)u.push({key:o[r].name,formula:o[r].name,price:`${o[r].price} ${o[r].type===Ie?"(%)":""}`});return a&&a.length&&I.push({key:a[0].name,formula:a[0].name,price:`${a[0].price} (%)`}),e(J,{title:t.detail_tariff,footer:!1,onCancel:s,open:!0,children:C(oe,{gutter:[12,12],children:[C(T,{span:"12",children:[e(B,{children:t.tariff}),e(N,{children:i.name||"-"})]}),C(T,{span:"12",children:[e(B,{children:t.english_name}),e(N,{children:i.enName||"-"})]}),C(T,{span:"12",children:[e(B,{children:t.deferred_interest}),e(N,{children:i.deferredInterest||"-"})]}),(c=i==null?void 0:i.service)!=null&&c.isUsageFactor?C(T,{span:"12",children:[e(B,{children:t.coefficient}),e(N,{children:i.factor||"-"})]}):null,C(T,{span:"12",children:[e(B,{children:t.pay_time}),e(N,{children:i.payTime||"-"})]}),C(T,{span:"12",children:[e(B,{children:t.tax}),e(N,{children:i.vat?`${i.vat}%`:"-"})]}),C(T,{span:"12",children:[e(B,{children:t.surcharge_tax}),e(N,{children:i.vatSurcharge?`${i.vatSurcharge}%`:"-"})]}),C(T,{span:"24",children:[v&&C("div",{style:{marginBottom:g.margin},children:[e(B,{children:t.formula}),C(N,{children:[v.name," - ",Te[v.formulaType].label]}),e(R,{bordered:!0,size:"small",pagination:!1,columns:[{title:t.formula,key:"formula",dataIndex:"formula"},{title:t.price,key:"price",dataIndex:"price"}],dataSource:n})]})||null,o&&o.length&&C("div",{style:{marginBottom:g.margin},children:[e(B,{children:t.surcharge}),e(R,{bordered:!0,size:"small",pagination:!1,columns:[{title:t.formula,key:"formula",dataIndex:"formula"},{title:t.price,key:"price",dataIndex:"price"}],dataSource:u})]})||null,a&&a.length&&C("div",{style:{marginBottom:g.margin},children:[e(B,{children:t.promotion}),e(R,{bordered:!0,size:"small",pagination:!1,columns:[{title:t.formula,key:"formula",dataIndex:"formula"},{title:t.price,key:"price",dataIndex:"price"}],dataSource:I})]})||null]})]})})};ce.propTypes={hideModal:k.func,contractTemplate:k.objectOf(k.any)};ce.defaultProps={hideModal:()=>{},contractTemplate:{}};const Qe=()=>{const{setTitlePage:i,setVisibleFilterBox:s,setVisibleSearchBox:g}=S.useContext(fe),{tablePage:v,tablePageSize:o,filterObj:a,getContractTemplates:n,getServices:u,getServiceInUses:I,idBuilding:c,formAddContractTemplate:r,hideFormAddContractTemplate:h,formUpdateContractTemplate:m,hideFormUpdateContractTemplate:P,formDetailContractTemplate:f,hideFormDetailContractTemplate:y}=S.useContext($);return S.useEffect(()=>(i(t.configs_tariffs),g(!0),u({idBuilding:c}),I({idBuilding:c}),n({filter:a,page:v,limit:o}),()=>{i(""),s(!1),g(!1)}),[]),C("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[e(He,{}),C(ae,{style:{flex:1},children:[e(ae.Header,{children:e(Ke,{})}),e(ae.Content,{fluid:!0,children:e(Je,{})})]}),r.isShow&&e(se,{hideModal:h}),m.isShow&&e(de,{contractTemplate:m.data.contractTemplate,hideModal:P}),f.isShow&&e(ce,{contractTemplate:f.data.contractTemplate,hideModal:y})]})},Ea=()=>e(le,{children:e(Qe,{})});export{Ea as default};
