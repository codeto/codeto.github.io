import{j as e,F as D,a as P,u as V}from"./@emotion-63839449.js";import{P as f}from"./index-b17d22e5.js";import{cx as E,a9 as y,s as C,b0 as U,am as W,at as O,a3 as N,bG as $,a5 as k,I as v,l as c,cy as Y,a as L,cz as w,cA as z,bH as H,Y as J}from"./index-c2ded735.js";import"./lodash-88fe09e6.js";import"./moment-a468e1f9.js";import"./file-saver-40cf32a9.js";import{r as l}from"./react-4fd50329.js";import"./react-redux-896b353b.js";import"./@firebase-43527ee1.js";import{P as Q}from"./prop-types-1172f4d5.js";import{d as X,u as j}from"./react-router-a4308f7b.js";import{B as q,I as K,r as Z}from"./antd-f9eae174.js";import{I as tt,S as _}from"./index-43183512.js";import{g as et,c as it}from"./amenitiesGroup-b7dc847e.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./@babel-b64fd0f9.js";import"./stylis-79144faa.js";import"./react-router-dom-2a8f5f6d.js";import"./history-a1882333.js";import"./resolve-pathname-e210f2ac.js";import"./tiny-invariant-dd7d57d2.js";import"./account-86ffff50.js";import"./index-687ba9e6.js";import"./index-881eef42.js";import"./libphonenumber-js-0d5a9c92.js";import"./react-infinite-scroll-component-e33646cb.js";import"./redux-10bbab4c.js";import"./react-dom-40621ea0.js";import"./classnames-4ba1ba1a.js";import"./scheduler-765c72db.js";import"./@redux-saga-8bafe09b.js";import"./redux-logger-e1c9ca90.js";import"./dompurify-8e338605.js";import"./query-string-f5cca1e7.js";import"./decode-uri-component-4138e85d.js";import"./split-on-first-4f1167c8.js";import"./filter-obj-2ed190f4.js";import"./oidc-client-7da0eaf7.js";import"./firebase-878887a2.js";import"./rc-pagination-c1e6a0ac.js";import"./rc-picker-2e3d5fe5.js";import"./rc-util-0bc219f3.js";import"./rc-trigger-570b13ec.js";import"./rc-motion-ae889c42.js";import"./rc-align-e5d7b12e.js";import"./dom-align-ecb06dd6.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-resize-observer-b9ad4e29.js";import"./@ant-design-cba9d434.js";import"./@ctrl-fb5a5473.js";import"./rc-tabs-dfd19a56.js";import"./rc-dropdown-5378dd0a.js";import"./rc-menu-b15ebfe9.js";import"./rc-overflow-6be96612.js";import"./rc-select-564caf01.js";import"./rc-virtual-list-8a7b82a6.js";import"./rc-collapse-11b7d3c4.js";import"./shallowequal-4542d6f7.js";import"./rc-drawer-317f0b4d.js";import"./@rc-component-5a112e55.js";import"./rc-field-form-ef5549aa.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./rc-image-e0357917.js";import"./rc-dialog-b1d1f07b.js";import"./rc-input-number-8bc068f7.js";import"./rc-rate-c64cf0d5.js";import"./rc-steps-2d1924c7.js";import"./rc-switch-b4e96de7.js";import"./rc-table-191ecc42.js";import"./rc-checkbox-018e8052.js";import"./rc-tree-67773537.js";import"./rc-tree-select-cb7eccc3.js";import"./copy-to-clipboard-64585c8c.js";import"./toggle-selection-93f4ad84.js";import"./rc-textarea-d01adcbb.js";import"./rc-input-02c2c2ba.js";import"./rc-upload-3ab0f08a.js";import"./rc-notification-d13dc43b.js";import"./rc-progress-4f1a7096.js";import"./rc-tooltip-08fa4217.js";import"./use-sync-external-store-5d1b6592.js";import"./idb-cdd1a92f.js";import"./path-to-regexp-ef8d5544.js";const A=l.createContext({idBuilding:0,tableData:{records:[],totalRecord:0},setTableData:()=>{},getsStatus:{isFetching:!1},setGetsStatus:()=>{},filter:{...E},setFilter:()=>{},tablePagination:{current:y,limit:C},setTablePagination:()=>{},tableSelection:()=>{},amenityConfigPermissionWrite:!1}),F=({children:a})=>{const{getPermissionByModuleCode:i}=U(),o=X(),t=j(),{idBuilding:n}=t,[r,m]=l.useState({isFetching:!1}),[g,u]=l.useState({...E}),[h,d]=l.useState({current:y,limit:C}),[s,T]=l.useState({records:[],totalRecord:0}),p=i(W),I=(p==null?void 0:p[O])??!1,G={idBuilding:n,tableData:s,setTableData:T,getsStatus:r,setGetsStatus:m,filter:g,setFilter:u,tablePagination:h,setTablePagination:d,amenityConfigPermissionWrite:I,history:o};return e(A.Provider,{value:G,children:a})};F.propTypes={children:Q.node};F.defaultProps={children:e("div",{})};const ot=F,at=()=>{const{history:a,amenityConfigPermissionWrite:i,idBuilding:o,tableData:t}=l.useContext(A);return[()=>{a.push(`/buildings/${o}/configs-amenities/add`)},i,t.totalRecord]},nt=()=>{const[a,i,o]=at(),t=N(),n=[];return i&&n.push(e(q,{type:"primary",onClick:()=>{t({action:$,label:k}),a()},icon:e(v,{name:"icon-plus-circle-outlined"}),children:c.add},"add")),e(f.ActionBox,{total:e(D,{children:o}),actions:n})},rt=async({filter:a,limit:i,page:o,idBuilding:t})=>{try{const{name:n,type:r}=a,m={name:n||void 0,type:r||void 0},{code:g,codeLanguage:u,data:h,totalRecord:d}=await et({filter:m,limit:i,page:o,idBuilding:t});return{code:g,codeLanguage:u,data:h.map(s=>it(s)),totalRecord:d}}catch({code:n,codeLanguage:r}){return{code:n,codeLanguage:r,data:[],totalRecord:0}}},B=()=>{const{setTableData:a,setGetsStatus:i}=l.useContext(A);return[async({filter:t,limit:n,page:r,idBuilding:m})=>{i({isFetching:!0});const{data:g,totalRecord:u}=await rt({filter:t,limit:n,page:r,idBuilding:m});a({records:g,totalRecord:u}),i({isFetching:!1})}]},st=()=>{const{setFilter:a,setTablePagination:i,idBuilding:o}=l.useContext(A),[t]=B();return[async r=>{a(r),i({current:y,limit:C}),t({filter:{...r},idBuilding:o,limit:C,page:y})},E]},ct=()=>{const[a,i]=st(),o=l.useMemo(()=>[{label:c.amenities,key:"name",component:e(tt,{placeholder:c.amenities}),visible:!0},{label:c.amenities_type,key:"type",component:P(_,{fluid:"true",placeholder:c.amenities_type,getPopupContainer:t=>t.parentNode,children:[e(_.Option,{value:"",children:c.all_type},"amenities_type_0"),Y.map(t=>e(_.Option,{value:t.key,children:t.label},t.key))]}),visible:!0}],[]);return e(f.FilterBox,{defaultFilter:i,filters:o,onSearch:a})},lt=()=>{const{getsStatus:a,setGetsStatus:i,tablePagination:o,setTablePagination:t,tableData:n,filter:r,idBuilding:m,amenityConfigPermissionWrite:g,history:u}=l.useContext(A),{layoutScrollRef:h}=l.useContext(L),d=V(),[s]=B(),T=async(S,R)=>{let{current:x,limit:b}=o;S!==x&&(x=S),R!==b&&(b=R,x=y),i({isFetching:!0}),t({current:x,limit:b}),await s({filter:r,limit:b,page:x,idBuilding:m}),i({isFetching:!1})},p={pageSize:o.limit,defaultCurrent:y,current:o.current,total:n.totalRecord,showQuickJumper:!0,showSizeChanger:!0,onChange:T},I={offsetScroll:d.offsetScrollX,getContainer:()=>h.current},G=S=>{u.push(`/buildings/${m}/configs-amenities/${S.id}/update`)},{isFetching:M}=a;return[I,n.records,p,M,G,g]},mt=()=>{const[a,i,o,t,n,r]=lt(),m=N(),[g]=J(),u=[{title:c.amenities_group,key:"amenitiesGroupName",dataIndex:"amenitiesGroupName",isFilter:!0,width:250,fixed:"left",align:"center"},{title:c.avatar,key:"amenitiesGroupLogo",dataIndex:"amenitiesGroupLogo",width:150,align:"center",render:(d,s,T)=>{const p=(s==null?void 0:s.coverPhoto)??"";return e("div",{style:{width:"100%",height:60,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:e(K,{src:p,style:{width:"auto",height:50}})})}},{title:c.amenities_type,key:"amenitiesGroupType",dataIndex:"amenitiesGroupType",isFilter:!0,width:150,align:"center"},{title:c.order_appear_in_resident_app,key:"amenitiesGroupViewAppear",dataIndex:"amenitiesGroupViewAppear",width:150,align:"center"},{title:c.status1,key:"amenitiesGroupStatus",dataIndex:"amenitiesGroupStatus",render:(d,s,T)=>{const p=s.amenitiesGroupStatus;return e(Z,{status:p===w?"success":"default",text:e("span",{style:{color:p===w?"#52c41a":"#a6a4a4"},children:z[p]})})},width:150,align:"center"},r?{title:c.actions,key:"amenitiesGroupAction",dataIndex:"amenitiesGroupAction",align:"center",render:(d,s,T)=>s.relationship!=="CHILDREN"?e(v,{title:c.update,onClick:()=>{m({action:H,label:k}),n(s)},name:"icon-edit-outlined",style:{fontSize:g.fontSizeLargeIcon}}):null,width:100,fixed:"right"}:null].filter(Boolean),h={x:u.reduce((d,s)=>s+d.width,0),scrollToFirstRowOnChange:!0};return e(f.Table,{sticky:a,scroll:h,columns:u,dataSource:i,loading:t,pagination:o})},pt=()=>{const{setTitlePage:a,setVisibleFilterBox:i,setVisibleSearchBox:o}=l.useContext(L),{idBuilding:t,setGetsStatus:n,filter:r}=l.useContext(A),[m]=B();return l.useEffect(()=>(a(c.configs_amenities),o(!0),(async()=>t&&(n({isFetching:!0}),await m({filter:r,idBuilding:t,limit:C,page:y}),n({isFetching:!1})))(),()=>{a(""),i(!1),o(!1)}),[]),[]},ut=()=>(pt(),e(D,{children:P(f.Wrapper,{children:[e(ct,{}),P(f.Container,{children:[e(f.Header,{children:e(nt,{})}),e(f.Content,{children:e(mt,{})})]})]})})),He=()=>e(ot,{children:e(ut,{})});export{He as default};
