import{j as t,c as ee,a,b as Ue,F as E}from"./@emotion-63839449.js";import{a as ce,b0 as ze,K as V,aw as He,a1 as qe,b1 as J,l as i,el as he,ev as ge,I as ye,et as Ce,ew as X,ex as _e,es as Ge,ep as j,ey as $,ez as Z,eq as re,eA as Ae,eB as we,d8 as Ke,eC as oe,eD as Y,eE as Je,eF as Qe,eG as Xe,eH as Ze,eI as et,a0 as q,c6 as se,S as G,eJ as tt,eK as nt,eL as ae,eM as it,eN as ot,eO as at,eP as rt}from"./index-c2ded735.js";import{r as f}from"./react-4fd50329.js";import{P as W}from"./prop-types-1172f4d5.js";import"./react-redux-896b353b.js";import"./lodash-88fe09e6.js";import{h as F}from"./moment-a468e1f9.js";import"./file-saver-40cf32a9.js";import"./@firebase-43527ee1.js";import{f as Se}from"./formula-46f71781.js";import{u as st}from"./react-router-a4308f7b.js";import{B as w}from"./index-881eef42.js";import{Q as te,T as ve,u as xe,r as lt,j as ct,D as dt,a as U}from"./index-b17d22e5.js";import{B as N,R as S,b as p,w as Be,j as k,a as B,S as ke,A as mt}from"./antd-f9eae174.js";import{I as Pe}from"./index-f7aef2cc.js";import{g as ut}from"./receipt-01489128.js";import{p as be}from"./printHtml-6274ec45.js";import{g as pt}from"./paySlip-ee1c95d4.js";import{F as P,u as K}from"./index-687ba9e6.js";import{S as H,I as Ie}from"./index-43183512.js";import{c as ht}from"./amenityBooking-f01c56ae.js";import{b as gt}from"./buildContentForCancelOrderPolicy-dc522742.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./@babel-b64fd0f9.js";import"./stylis-79144faa.js";import"./redux-10bbab4c.js";import"./react-router-dom-2a8f5f6d.js";import"./history-a1882333.js";import"./resolve-pathname-e210f2ac.js";import"./tiny-invariant-dd7d57d2.js";import"./react-dom-40621ea0.js";import"./classnames-4ba1ba1a.js";import"./scheduler-765c72db.js";import"./@redux-saga-8bafe09b.js";import"./redux-logger-e1c9ca90.js";import"./dompurify-8e338605.js";import"./query-string-f5cca1e7.js";import"./decode-uri-component-4138e85d.js";import"./split-on-first-4f1167c8.js";import"./filter-obj-2ed190f4.js";import"./oidc-client-7da0eaf7.js";import"./firebase-878887a2.js";import"./rc-pagination-c1e6a0ac.js";import"./rc-picker-2e3d5fe5.js";import"./rc-util-0bc219f3.js";import"./rc-trigger-570b13ec.js";import"./rc-motion-ae889c42.js";import"./rc-align-e5d7b12e.js";import"./dom-align-ecb06dd6.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-resize-observer-b9ad4e29.js";import"./@ant-design-cba9d434.js";import"./@ctrl-fb5a5473.js";import"./rc-tabs-dfd19a56.js";import"./rc-dropdown-5378dd0a.js";import"./rc-menu-b15ebfe9.js";import"./rc-overflow-6be96612.js";import"./rc-select-564caf01.js";import"./rc-virtual-list-8a7b82a6.js";import"./rc-collapse-11b7d3c4.js";import"./shallowequal-4542d6f7.js";import"./rc-drawer-317f0b4d.js";import"./@rc-component-5a112e55.js";import"./rc-field-form-ef5549aa.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./rc-image-e0357917.js";import"./rc-dialog-b1d1f07b.js";import"./rc-input-number-8bc068f7.js";import"./rc-rate-c64cf0d5.js";import"./rc-steps-2d1924c7.js";import"./rc-switch-b4e96de7.js";import"./rc-table-191ecc42.js";import"./rc-checkbox-018e8052.js";import"./rc-tree-67773537.js";import"./rc-tree-select-cb7eccc3.js";import"./copy-to-clipboard-64585c8c.js";import"./toggle-selection-93f4ad84.js";import"./rc-textarea-d01adcbb.js";import"./rc-input-02c2c2ba.js";import"./rc-upload-3ab0f08a.js";import"./rc-notification-d13dc43b.js";import"./rc-progress-4f1a7096.js";import"./rc-tooltip-08fa4217.js";import"./use-sync-external-store-5d1b6592.js";import"./idb-cdd1a92f.js";import"./path-to-regexp-ef8d5544.js";import"./account-86ffff50.js";import"./libphonenumber-js-0d5a9c92.js";import"./react-infinite-scroll-component-e33646cb.js";import"./convertNumberToDateTime-e1623b31.js";const x=f.createContext({idBuilding:0,idAmenityOrder:0,amenityBookingPermissionApprove:!1,getDetailAmenityOrderStatus:{isFetching:!1},setGetDetailAmenityOrderStatus:()=>{},amenityOrder:{},setAmenityOrder:()=>{},tabShow:{type:Se,data:{}},setTabShow:()=>{},previewReceiptRes:{isLoading:!1,data:""},setPreviewReceiptRes:()=>{},previewPaySlipRes:{isLoading:!1,data:""},setPreviewPaySlipRes:()=>{},modalConfirmPayment:{isShow:!1,data:{}},showModalConfirmPayment:()=>{},hideModalConfirmPayment:()=>{},modalConfirmApproveOrder:{isShow:!1,data:{}},showModalConfirmApproveOrder:()=>{},hideModalConfirmApproveOrder:()=>{},modalConfirmRejectOrder:{isShow:!1,data:{}},showModalConfirmRejectOrder:()=>{},hideModalConfirmRejectOrder:()=>{},modalConfirmCancelOrder:{isShow:!1,data:{}},showModalConfirmCancelOrder:()=>{},hideModalConfirmCancelOrder:()=>{},modalCancelOrderPolicy:{isShow:!1,data:{}},showModalCancelOrderPolicy:()=>{},hideModalCancelOrderPolicy:()=>{},modalConfirmRefund:{isShow:!1,data:{}},showModalConfirmRefund:()=>{},hideModalConfirmRefund:()=>{},modalConfirmRefundDeposit:{isShow:!1,data:{}},showModalConfirmRefundDeposit:()=>{},hideModalConfirmRefundDeposit:()=>{}}),de=({children:e})=>{const{currentUser:o}=f.useContext(ce),{getPermissionByModuleCode:n}=ze(),{idBuilding:r,idAmenityOrder:l}=st(),[d,m]=f.useState({isFetching:!1}),[s,h]=f.useState({}),[u,g]=f.useState({isLoading:!1,data:""}),[c,_]=f.useState({isLoading:!1,data:""}),[v,b]=f.useState({type:Se,data:{}}),[C,y,O]=V(),[A,I,R]=V(),[ne,ie,D]=V(),[T,L,M]=V(),[De,Te,Re]=V(),[Le,Me,Fe]=V(),[Oe,Ee,Ne]=V(),[Ve,je,We]=V(),$e=n(He).approve??!1,Ye={idBuilding:r,idAmenityOrder:l,currentUser:o,getDetailAmenityOrderStatus:d,setGetDetailAmenityOrderStatus:m,amenityOrder:s,setAmenityOrder:h,tabShow:v,setTabShow:b,previewReceiptRes:u,setPreviewReceiptRes:g,previewPaySlipRes:c,setPreviewPaySlipRes:_,modalConfirmPayment:C,showModalConfirmPayment:y,hideModalConfirmPayment:O,modalConfirmApproveOrder:A,showModalConfirmApproveOrder:I,hideModalConfirmApproveOrder:R,modalConfirmRejectOrder:ne,showModalConfirmRejectOrder:ie,hideModalConfirmRejectOrder:D,modalConfirmCancelOrder:T,showModalConfirmCancelOrder:L,hideModalConfirmCancelOrder:M,modalCancelOrderPolicy:De,showModalCancelOrderPolicy:Te,hideModalCancelOrderPolicy:Re,modalConfirm:Le,showModalConfirm:Me,hideModalConfirm:Fe,modalConfirmRefund:Oe,showModalConfirmRefund:Ee,hideModalConfirmRefund:Ne,modalConfirmRefundDeposit:Ve,showModalConfirmRefundDeposit:je,hideModalConfirmRefundDeposit:We,amenityBookingPermissionApprove:$e};return t(x.Provider,{value:Ye,children:e})};de.propTypes={children:W.node};de.defaultProps={children:t("div",{})};const ft=de,me=ee(te.Item,{target:"e1u06n6h3"})({name:"fcbioj",styles:"padding:5px 0px 5px!important"}),le=ee(N,{target:"e1u06n6h2"})({name:"1hcx8jb",styles:"padding:0"}),ue=ee(w.Header,{target:"e1u06n6h1"})("padding-bottom:0px;padding-top:",e=>e.theme.margin.sm,";"),pe=ee(w.Content,{target:"e1u06n6h0"})({name:"1i6so7v",styles:"padding-top:0px"}),yt=()=>{const{amenityOrder:e,amenityBookingPermissionApprove:o,showModalConfirmApproveOrder:n,showModalConfirmRejectOrder:r,showModalConfirmCancelOrder:l,showModalCancelOrderPolicy:d,getDetailAmenityOrderStatus:m}=f.useContext(x),{isUserCs:s}=qe();return{amenityOrder:e,amenityBookingPermissionApprove:o,isUserCs:s,onClickBtnApproveAmenitiesOrder:()=>{n({amenityOrder:e})},onClickBtnRejectAmenitiesOrder:()=>{r({amenityOrder:e})},onClickBtnCancelAmenitiesOrder:()=>{l({amenityOrder:e})},onClickBtnShowCancelOrderPolicy:()=>{d({orderPolicies:e==null?void 0:e.cancelBookingConditions})},loadingView:m.isFetching}};var Ct={name:"82a6rk",styles:"flex:1"},_t={name:"xaudpc",styles:"vertical-align:center"},At={name:"e8osiw",styles:"margin-left:20px;border-radius:15px;font-size:11px"},wt={name:"1kxp432",styles:"color:#f5222d"},St={name:"rrlyql",styles:"display:flex;flex-direction:row;align-items:center;justify-content:flex-end"},vt={name:"1oaeivz",styles:"margin-right:8px"},xt={name:"rrlyql",styles:"display:flex;flex-direction:row;align-items:center;justify-content:flex-end"},Bt={name:"fhxb3m",styles:"display:flex;flex-direction:row;align-items:center"},kt={name:"1xrefa4",styles:"width:100px;height:auto"},Pt={name:"5bno9i",styles:"margin-top:15px"},bt={name:"fhxb3m",styles:"display:flex;flex-direction:row;align-items:center"};const It=()=>{var s,h,u,g;const{amenityOrder:e,amenityBookingPermissionApprove:o,onClickBtnApproveAmenitiesOrder:n,onClickBtnRejectAmenitiesOrder:r,onClickBtnCancelAmenitiesOrder:l,onClickBtnShowCancelOrderPolicy:d,loadingView:m}=yt();return t(w,{css:Ct,children:m?t(J,{isLoading:!0}):a(E,{children:[a(w.Header,{children:[a(S,{gutter:[8,0],css:_t,children:[a(p,{span:12,children:[a("div",{css:Ue({display:"flex",alignItems:"center",height:e.isShowPaymentDueAlert?"unset":"100%"},"",""),children:[a("span",{css:c=>({fontWeight:c.fontWeight.bold}),children:[i.label.order_utility," ",e==null?void 0:e.code]}),t(Be,{css:At,color:e.statusColor??"default",children:e.statusFormat})]}),e.isShowPaymentDueAlert&&t("span",{css:wt,children:i.description.payment_order_has_expired})]}),(e==null?void 0:e.status)===he&&o?a(p,{span:12,css:St,children:[t(N,{type:"primary",css:vt,onClick:n,children:i.accept}),t(N,{onClick:r,children:i.reject})]}):null,(e==null?void 0:e.status)===ge&&o&&t(p,{span:12,css:xt,children:t(N,{onClick:l,children:i.cancel})})]}),t(k,{css:c=>({marginTop:c.margin.md,marginBottom:0})})]}),a(w.Content,{scrollY:!0,children:[a("div",{css:Bt,children:[t("img",{src:(e==null?void 0:e.coverPhoto)??void 0,css:kt,alt:"cover"}),a("div",{css:c=>({marginLeft:c.margin.sm}),children:[t("h4",{css:c=>({fontWeight:c.fontWeight.bold}),children:(e==null?void 0:e.amenityName)??""}),t(ye,{name:"icon-environment-outlined"}),e==null?void 0:e.location]})]}),t(k,{css:c=>({marginTop:c.margin.md,marginBottom:c.margin.md})}),a("div",{children:[t("h3",{children:t("b",{children:i.amenities_order_info})}),a(S,{gutter:[8,0],children:[a(p,{span:"10",children:[i.orderer,":"]}),t(p,{span:"14",children:a("b",{children:[e==null?void 0:e.residentName," - ",e==null?void 0:e.unitName]})}),a(p,{span:"10",children:[i.order_time,":"]}),t(p,{span:"14",children:e==null?void 0:e.createdAt}),a(p,{span:"10",children:[i.usage_time,":"]}),t(p,{span:"14",children:e==null?void 0:e.usageTime}),a(p,{span:"10",children:[i.note,":"]}),t(p,{span:"14",children:e.note})]})]}),t(k,{css:c=>({marginTop:c.margin.md,marginBottom:c.margin.md})}),a("div",{children:[t("h3",{children:t("b",{children:i.payment_info})}),a(S,{gutter:[8,0],children:[a(p,{span:"10",children:[i.price," ",e!=null&&e.utilityPrice?`(${e==null?void 0:e.totalTimeUsage} ${i.frame})`:"",":"]}),a(p,{span:"14",children:[(e==null?void 0:e.utilityPriceFormat)||0," VNĐ"]}),a(p,{span:"10",children:[i.deposit_amount,":"]}),a(p,{span:"14",children:[(e==null?void 0:e.depositsFormat)||0," VNĐ"]}),a(p,{span:"10",children:[i.total_payment,":"]}),t(p,{span:"14",children:a("b",{children:[e.totalPaymentFormat," VNĐ"]})})]})]}),t(k,{css:c=>({marginTop:c.margin.md,marginBottom:c.margin.md})}),a("div",{children:[t("h3",{children:t("b",{children:i.payment_method})}),a(S,{gutter:[8,0],children:[t(p,{span:"24",children:i.payment_at_the_counter_cash_or_transfer}),a(p,{span:"10",children:[i.payment_term,":"]}),t(p,{span:"14",children:t("b",{children:e==null?void 0:e.paymentDueDate})})]})]}),(s=e==null?void 0:e.surcharges)!=null&&s.length?a(E,{children:[t(k,{css:c=>({marginTop:c.margin.md,marginBottom:c.margin.md})}),a("div",{children:[t("h3",{className:"text-font-semi-bold",children:t("b",{children:i.surcharge_after_use})}),(h=e==null?void 0:e.surcharges)==null?void 0:h.map(c=>a(S,{gutter:[8,0],children:[a(p,{span:"10",children:[c==null?void 0:c.name,":"]}),a(p,{span:"14",children:[c==null?void 0:c.priceFormat," VNĐ"]})]},c.id))]})]}):null,[he,ge].includes(e==null?void 0:e.status)&&((u=e==null?void 0:e.cancelBookingConditions)!=null&&u.length)?t("div",{children:t(le,{type:"link",size:"small",onClick:d,css:Pt,children:i.cancel_order_policy})}):null,[Ce,X].includes(e.status)?a(E,{children:[t(k,{css:c=>({marginTop:c.margin.md,marginBottom:c.margin.md})}),a("div",{children:[a("div",{css:bt,children:[t("h3",{children:t("b",{children:i.cancel_detail})}),(g=e==null?void 0:e.cancelBookingConditions)!=null&&g.length?t(le,{type:"link",size:"small",css:c=>({marginLeft:c.margin.lg}),onClick:d,children:i.cancel_order_policy}):null]}),a(S,{gutter:[8,0],children:[a(p,{span:"10",children:[i.canceler,":"]}),t(p,{span:"14",children:e==null?void 0:e.rejectBy}),a(p,{span:"10",children:[i.cancel_time,":"]}),t(p,{span:"14",children:(e==null?void 0:e.cancelAt)||e.rejectAt}),a(p,{span:"10",children:[i.reason,":"]}),t(p,{span:"14",children:e==null?void 0:e.rejectReason})]})]})]}):null]})]})})},Dt=()=>{const{amenityOrder:e,setTabShow:o,getDetailAmenityOrderStatus:n}=f.useContext(x);return{amenityOrder:e,onClickTab:()=>{o({type:_e,data:{}})},loadingView:n.isFetching}},Tt=()=>{const{amenityOrder:e,onClickTab:o,loadingView:n}=Dt();return t(w,{children:n?t(J,{isLoading:!0}):t("div",{style:{height:"60px",display:"flex",alignItems:"center"},children:a("span",{className:"pointer",style:{fontSize:"13px",marginLeft:8},children:[`${i.information} ${i.label.order_utility}`," ",t(le,{onClick:o,type:"link",size:"small",children:e==null?void 0:e.code})]})})})},Rt=()=>{const{amenityOrder:e,setTabShow:o,amenityBookingPermissionApprove:n,showModalConfirmPayment:r,getDetailAmenityOrderStatus:l}=f.useContext(x),{status:d,deposits:m,billForUtilityBookingFee:s,billForUtilityBookingSurcharge:h,bills:u,depositsPaidAt:g}=e,{showBtnPayment:c,paymentLabel:_}=f.useMemo(()=>{if([Ce,Ge,X].includes(d))return{showBtnPayment:!1,paymentLabel:""};const C=[];return s&&s.status===j&&C.push(i.amenities_fee.toLowerCase()),m>0&&!g&&d!==$&&C.push(i.deposit_amount.toLowerCase()),h&&h.status===j&&d===$&&C.push(i.surcharge.toLowerCase()),{showBtnPayment:!!C.length,paymentLabel:`${i.payment} ${C.join(", ")}`}},[e]);return{onClickBtnPayment:()=>{r()},amenityBookingPermissionApprove:n,onClickBtnShowDetailBill:C=>()=>{o({type:Z,data:C})},showBtnPayment:c,paymentLabel:_,bills:u,loadingView:l.isFetching}},Lt=()=>{const{onClickBtnPayment:e,amenityBookingPermissionApprove:o,onClickBtnShowDetailBill:n,showBtnPayment:r,paymentLabel:l,bills:d,loadingView:m}=Rt();return a(w,{css:s=>({flex:1,marginTop:s.margin.sm}),children:[a(ue,{children:[t("span",{css:s=>({fontWeight:s.fontWeight.bold}),children:i.bill}),t(k,{css:s=>({marginTop:s.margin.xs,marginBottom:"0px"})})]}),t(pe,{scrollY:!0,children:t(te,{loading:m,itemLayout:"vertical",dataSource:d,renderItem:s=>t(me,{children:a(S,{gutter:[8,0],children:[t(p,{span:"16",children:a(B.Link,{onClick:n(s),children:[(s==null?void 0:s.code)||""," (",s.type===re?i.amenities_fee:i.surcharge,")"]})}),t(p,{span:"8",style:{textAlign:"right"},children:a(B.Text,{children:[s.totalPaymentFormat," VNĐ"]})}),t(p,{span:"24",children:a("h5",{children:["(",s.statusFormat,")"]})})]})})})}),o&&r?t(w.Footer,{children:t(N,{style:{width:"100%"},type:"primary",size:"small",onClick:e,children:l})}):null]})},Mt=()=>{const{amenityOrder:e,setTabShow:o,getDetailAmenityOrderStatus:n}=f.useContext(x);return{receipts:(e==null?void 0:e.receipts)??[],onClickBtnShowDetailReceipt:d=>()=>{o({type:Ae,data:d})},loadingView:n.isFetching}},Ft=()=>{const{receipts:e,onClickBtnShowDetailReceipt:o}=Mt();return a(w,{css:n=>({flex:1,marginTop:n.margin.xs}),children:[a(ue,{children:[t("span",{css:n=>({fontWeight:n.fontWeight.bold}),children:i.receipt}),t(k,{css:n=>({marginTop:n.margin.sm,marginBottom:"0px"})})]}),t(pe,{scrollY:!0,children:t(te,{itemLayout:"vertical",dataSource:e,renderItem:n=>t(me,{children:a(S,{gutter:[8,0],children:[t(p,{span:"16",children:t(B.Link,{onClick:o(n),children:n.code})}),t(p,{span:"8",style:{textAlign:"right"},children:a(B.Text,{children:[n.totalPaymentFormat," VNĐ"]})})]})})})})]})},Ot=()=>{const{amenityOrder:e,setTabShow:o,amenityBookingPermissionApprove:n,showModalConfirmRefund:r,showModalConfirmRefundDeposit:l,getDetailAmenityOrderStatus:d}=f.useContext(x),m=(e==null?void 0:e.paySlips)??[],{refundUtilityPriceAt:s,refundUtilityPrice:h,utilityPricePaidAt:u,status:g,deposits:c,refundDepositAt:_,depositsPaidAt:v}=e,b=f.useMemo(()=>!!(g===X&&!s&&h>0&&u),[e]),C=f.useMemo(()=>!!([X,$].includes(e==null?void 0:e.status)&&c>0&&v&&!_),[e]);return{paySlips:m,amenityBookingPermissionApprove:n,isShowBtnRefund:b,isShowBtnRefundDeposit:C,onClickBtnShowDetailPayslip:I=>()=>{o({type:we,data:I})},onClickBtnRefund:()=>{r()},onClickBtnRefundDeposit:()=>{l()},loadingView:d.isFetching}},Et=()=>{const{paySlips:e,amenityBookingPermissionApprove:o,isShowBtnRefund:n,isShowBtnRefundDeposit:r,onClickBtnShowDetailPayslip:l,onClickBtnRefund:d,onClickBtnRefundDeposit:m,loadingView:s}=Ot();return a(w,{css:h=>({flex:1,marginTop:h.margin.xs}),children:[a(ue,{children:[t("span",{css:h=>({fontWeight:h.fontWeight.bold}),children:i.payslip}),t(k,{css:h=>({marginTop:h.margin.xs,marginBottom:"0px"})})]}),t(pe,{scrollY:!0,children:t(te,{loading:s,itemLayout:"vertical",dataSource:e,renderItem:h=>t(me,{children:a(S,{gutter:[8,0],children:[t(p,{span:"16",children:t(B.Link,{onClick:l(h),children:h.code})}),t(p,{span:"8",style:{textAlign:"right"},children:a(B.Text,{children:[h.totalPaymentFormat," VNĐ"]})})]})})})}),t(w.Footer,{children:a(S,{gutter:[8,0],children:[n&&o?t(p,{span:r?12:24,children:t(N,{style:{width:"100%"},size:"small",type:"primary",onClick:d,children:i.refund})}):null,r&&o?t(p,{span:n?12:24,children:t(N,{style:{width:"100%"},type:"primary",size:"small",onClick:m,children:i.refund_deposit})}):null]})})]})},Nt=()=>{const{amenityOrder:e,tabShow:o,getDetailAmenityOrderStatus:n}=f.useContext(x),{formulas:r=[],surcharges:l=[],formulaType:d}=e,m=o==null?void 0:o.data;return{tableData:f.useMemo(()=>{var v,b;const h=m.type==="UTILITY",u=[],g={};r.length>1&&r.forEach(({from:C=0,to:y=0,priceFormat:O},A)=>{const I=`price-${A}`;g[I]=O;const R={title:"",dataIndex:I,key:I,align:"center"};A===0&&(R.title=y),A!==0&&C&&y&&(R.title=`${C} - ${y}`),A!==0&&C&&!y&&(R.title=i.more_than.replace("{value}",C)),u.push(R)}),r.length===1&&(g.price=((b=(v=e==null?void 0:e.formulas)==null?void 0:v[0])==null?void 0:b.priceFormat)||0);let c=[],_=[];return h&&(c=[{title:"",key:"coverPhoto",dataIndex:"coverPhoto",render:(C,y)=>t("img",{src:C,alt:"logo-utility",style:{width:50,height:"auto"}}),align:"center"},{title:i.amenities,key:"amenities",dataIndex:"amenities",align:"center"},{title:i.amount,key:"amount",dataIndex:"amount",align:"center"},{title:i.measure_unit,key:"unit",dataIndex:"unit",align:"center"},{title:i.label.price_list,key:"price",dataIndex:"price",align:"center",children:u},{title:`${i.total} (VND)`,key:"total",dataIndex:"total",align:"center"}],_=[{key:0,coverPhoto:e==null?void 0:e.coverPhoto,amenities:e==null?void 0:e.amenityName,amount:e==null?void 0:e.totalTimeUsage,unit:d===Ke?i.amenities_type_pre_order_by_period_time:i.frame,total:e==null?void 0:e.utilityPriceFormat,...g}]),h||(c=[{title:i.surcharge,key:"name",dataIndex:"name",align:"center"},{title:i.amenities,key:"amenities",dataIndex:"amenities",align:"center"},{title:i.amount,key:"amount",dataIndex:"amount",align:"center"},{title:i.measure_unit,key:"unit",dataIndex:"unit",align:"center"},{title:i.label.price_list,key:"price",dataIndex:"price",align:"center"},{title:`${i.total} (VND)`,key:"total",dataIndex:"total",align:"center"}],_=l.map(C=>({key:C.id,name:C.name,amenities:e==null?void 0:e.amenityName,price:C.priceFormat,unit:i.label.fee,amount:1,total:C.priceFormat}))),{columns:c,dataSource:_}},[m]),bill:m,amenityOrder:e,loadingView:n.isFetching}},Vt=()=>{const{tableData:e,bill:o,amenityOrder:n,loadingView:r}=Nt(),{columns:l,dataSource:d}=e;return t(w,{style:{flex:1},children:r?t(J,{isLoading:!0}):a(E,{children:[a(w.Header,{children:[t(S,{gutter:[8,0],style:{verticalAlign:"center",alignItems:"center"},children:t(p,{flex:"1 0 0",style:{width:"100%"},children:a("span",{children:[a("span",{style:{fontWeight:"bold",fontSize:"14px"},children:[i.label.bill," ",o==null?void 0:o.code]}),t(Be,{style:{marginLeft:"20px",borderRadius:"15px",fontSize:"11px"},color:"#3b5999",children:o.statusFormat})]})})}),t(k,{css:m=>({marginTop:m.margin.xs,marginBottom:"0px"})})]}),a(w.Content,{scrollY:!0,children:[a(S,{gutter:[8,8],children:[t(p,{span:12,children:a(S,{gutter:[8,8],children:[t(p,{span:8,children:a("span",{children:[i.label.target,": "]})}),t(p,{span:16,children:a("span",{css:m=>({textAlign:"right",fontWeight:m.fontWeight.bold}),children:[n==null?void 0:n.unitName," (",n==null?void 0:n.unitType,")"]})}),t(p,{span:8,children:a("span",{children:[i.label.head_of_households,": "]})}),t(p,{span:16,children:t("span",{css:m=>({textAlign:"right",fontWeight:m.fontWeight.bold}),children:n==null?void 0:n.residentName})})]})}),t(p,{span:12,children:a(S,{gutter:[8,8],children:[t(p,{span:10,children:a("span",{children:[i.label.order_code,": "]})}),t(p,{span:14,children:t("span",{css:m=>({textAlign:"right",fontWeight:m.fontWeight.bold}),children:n==null?void 0:n.code})}),t(p,{span:10,children:a("span",{children:[i.label.accrued_month,": "]})}),t(p,{span:14,children:t("span",{css:m=>({textAlign:"right",fontWeight:m.fontWeight.bold}),children:o.incurredCreatedFor})}),t(p,{span:10,children:a("span",{children:[i.payment_term,": "]})}),t(p,{span:14,children:t("span",{css:m=>({textAlign:"right",fontWeight:m.fontWeight.bold}),children:n==null?void 0:n.paymentDueDate})})]})})]}),t(ve,{bordered:!0,dataSource:d,columns:l,pagination:!1}),t("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",marginTop:40},children:a("div",{style:{width:"40%"},children:[o.type===re?a(E,{children:[a("div",{style:{display:"flex",justifyContent:"space-between"},children:[t(B.Text,{children:i.amenities_fee}),a(B.Text,{strong:!0,children:[n==null?void 0:n.utilityPriceFormat," VNĐ"]})]}),a("div",{style:{display:"flex",justifyContent:"space-between"},children:[t(B.Text,{children:i.total_money}),a(B.Text,{strong:!0,children:[o.totalPaymentFormat," VNĐ"]})]}),t(k,{style:{margin:"8px 0"}}),a("div",{style:{display:"flex",justifyContent:"space-between"},children:[t(B.Text,{children:i.label.still_have_to_pay}),a(B.Text,{strong:!0,children:[o.status===j?o.totalPaymentFormat:0," VNĐ"]})]})]}):null,o.type!==re?a(E,{children:[a("div",{style:{display:"flex",justifyContent:"space-between"},children:[t(B.Text,{children:i.total_money}),a(B.Text,{strong:!0,children:[o.totalPaymentFormat," VNĐ"]})]}),t(k,{style:{margin:"8px 0"}}),a("div",{style:{display:"flex",justifyContent:"space-between"},children:[t(B.Text,{children:i.label.still_have_to_pay}),a(B.Text,{strong:!0,children:[o.status===j?o.totalPaymentFormat:0," VNĐ"]})]})]}):null]})})]})]})})},jt=()=>{const{tabShow:e,previewReceiptRes:o,setPreviewReceiptRes:n,getDetailAmenityOrderStatus:r}=f.useContext(x),{currentBuilding:l}=xe(),{data:d,isLoading:m}=o,s=e==null?void 0:e.data;function h(){d&&be(d)}return f.useEffect(()=>{(async()=>{if(s.id){n({data:"",isLoading:!0});const u=await ut({idBuilding:l.id,idReceipt:s.id});n({data:u==null?void 0:u.data,isLoading:!1})}})()},[s.id]),{onPrint:h,isLoading:m,html:d,receipt:s,loadingView:r.isFetching}},Wt=()=>{const{onPrint:e,isLoading:o,html:n,receipt:r,loadingView:l}=jt();return t(w,{style:{flex:1},children:l?t(J,{isLoading:!0}):a(E,{children:[a(w.Header,{children:[a(S,{gutter:[8,0],style:{verticalAlign:"center",alignItems:"center"},children:[t(p,{span:12,children:t("span",{children:a("span",{style:{fontWeight:"bold",fontSize:"14px"},children:[i.label.receipt," ",r==null?void 0:r.code]})})}),t(p,{span:12,style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:t(N,{onClick:e,children:i.label.print})})]}),t(k,{css:d=>({marginTop:d.margin.xs,marginBottom:"0px"})})]}),t(w.Content,{scrollY:!0,children:o?t(ke,{}):t(Pe,{html:n})})]})})},$t=()=>{const{tabShow:e,previewPaySlipRes:o,setPreviewPaySlipRes:n,getDetailAmenityOrderStatus:r}=f.useContext(x),{currentBuilding:l}=xe(),{data:d,isLoading:m}=o,{data:s}=e;function h(){d&&be(d)}return f.useEffect(()=>{(async()=>{if(s.id){n({data:"",isLoading:!0});const u=await pt(l.id,s.id);n({data:u==null?void 0:u.data,isLoading:!1})}})()},[s.id]),{html:d,data:s,isLoading:m,onPrint:h,loadingView:r.isFetching}},Yt=()=>{const{data:e,isLoading:o,onPrint:n,html:r,loadingView:l}=$t();return t(w,{style:{flex:1},children:l?t(J,{isLoading:!0}):a(E,{children:[a(w.Header,{children:[a(S,{gutter:[8,0],style:{verticalAlign:"center",alignItems:"center"},children:[t(p,{span:12,children:t("span",{children:a("span",{style:{fontWeight:"bold",fontSize:"14px"},children:[i.label.pay_slip," ",e==null?void 0:e.code]})})}),t(p,{span:12,style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:t(N,{onClick:n,children:i.label.print})})]}),t(k,{css:d=>({marginTop:d.margin.sm,marginBottom:"0px"})})]}),t(w.Content,{scrollY:!0,children:o?t(ke,{}):t(Pe,{html:r})})]})})},Q=({dataSource:e,type:o,form:n})=>{const{fundData:r}=lt(),{labelData:l}=ct(),[d,m]=f.useState([]);f.useEffect(()=>{var u;if(r.length>0){const g=r.filter(c=>c.method===oe);m(g),g.length&&n.setFieldsValue({fundId:(u=g==null?void 0:g[0])==null?void 0:u.id})}},[r]);const s=[{title:i.fee,key:"fee",dataIndex:"fee"},{title:`${i.cost} (VND)`,key:"cost",dataIndex:"cost",align:"right"}];return a(E,{children:[a(P,{layout:"vertical",name:"formPaymentAmenitiesOrder",form:n,scrollToFirstError:!0,onValuesChange:(u,g)=>{var c;if(u.paymentMethod){const _=r.filter(v=>v.method===u.paymentMethod);m(_),n.setFieldsValue({fundId:((c=_==null?void 0:_[0])==null?void 0:c.id)??null})}},initialValues:{voucherDay:F(),paymentMethod:oe},children:[a(S,{gutter:[8,0],children:[t(p,{span:"12",children:t(P.Item,{rules:[{required:!0}],label:o===Y?i.refund_method:i.payment_method,name:"paymentMethod",children:t(H,{fluid:"true",placeholder:o===Y?i.refund_method:i.payment_method,children:Je.map(u=>t(H.Option,{value:u.id,children:u.name},u.id))})})}),t(p,{span:"12",children:t(P.Item,{rules:[{required:!0}],label:o===Y?i.refund_date:i.payment_date,name:"voucherDay",children:t(dt,{fluid:"true",format:"DD/MM/YYYY",placeholder:o===Y?i.refund_date:i.payment_date,disabled:n.getFieldValue("paymentMethod")===oe,disabledDate:n.getFieldValue("paymentMethod")===Qe?u=>!u||u.isAfter(F()):null})})})]}),a(S,{gutter:[8,8],children:[t(p,{span:"12",children:t(P.Item,{label:i.fund,name:"fundId",rules:[{required:!0}],children:t(H,{fluid:"true",placeholder:i.fund,children:d.map(u=>t(H.Option,{value:u.id,children:u.name},u.id))})})}),t(p,{span:"12",children:t(P.Item,{label:i.label1,name:"lableId",children:t(H,{fluid:"true",placeholder:i.label1,children:l.map(u=>t(H.Option,{value:u.id,children:u.title},u.id))})})})]})]}),t(ve,{bordered:!0,dataSource:e,columns:s,pagination:!1})]})};Q.propTypes={dataSource:W.arrayOf(W.object),form:W.shape({getFieldValue:W.func,setFieldsValue:W.func}),type:W.string};Q.defaultProps={dataSource:[],form:{getFieldValue:()=>{},setFieldsValue:()=>{}},type:Y};const fe=async({idAmenityOrder:e,data:o,idBuilding:n})=>{const{paymentMethod:r,fundId:l,billId:d,cashier:m,voucherDay:s,createdAt:h,labelId:u}=o,g={paymentMethod:r,fundId:l,billId:d,cashier:m,voucherDay:F(s).toISOString(),createdAt:F(h).toISOString(),labelId:u||null},c=await Xe({idAmenityBooking:e,body:g,idBuilding:n});return{data:o,code:c.code,codeLanguage:c.codeLanguage}},Ut=async({idAmenityOrder:e,data:o,idBuilding:n})=>{const{paymentMethod:r,fundId:l,billId:d,cashier:m,voucherDay:s,createdAt:h,labelId:u}=o,g={paymentMethod:r,fundId:l,billId:d,cashier:m,voucherDay:F(s).toISOString(),createdAt:F(h).toISOString(),labelId:u||null},c=await Ze({idAmenityBooking:e,body:g,idBuilding:n});return{data:o,code:c.code,codeLanguage:c.codeLanguage}},zt=async({id:e,idBuilding:o})=>{try{const{code:n,codeLanguage:r,data:l}=await et({idAmenityBooking:e,idBuilding:o});return{code:n,codeLanguage:r,data:ht(l)}}catch(n){return n}},z=()=>{const{setAmenityOrder:e,setGetDetailAmenityOrderStatus:o,idBuilding:n,idAmenityOrder:r,tabShow:l,setTabShow:d}=f.useContext(x);return[async()=>{var h;o({isFetching:!0});const s=await zt({id:r,idBuilding:n});if(e((s==null?void 0:s.data)??{}),o({isFetching:!1}),l.type===Z){const u=(h=s==null?void 0:s.data)==null?void 0:h.bills.find(g=>{var c;return(g==null?void 0:g.id)===((c=l==null?void 0:l.data)==null?void 0:c.id)});d({data:u,type:Z})}}]},Ht=()=>{const{idBuilding:e,idAmenityOrder:o,amenityOrder:n,hideModalConfirmPayment:r,modalConfirmPayment:l,currentUser:d,depositsPaidAt:m}=f.useContext(x),{getAmenitiesBookingBadges:s}=q(),[h]=z(),[u]=P.useForm(),[g,c]=f.useState({data:[],code:void 0,codeLanguage:void 0,isFetching:!1}),{code:_="",deposits:v=0,depositsFormat:b="0",surcharges:C=[],billForUtilityBookingFee:y,utilityPricePaidAt:O,billForUtilityBookingSurcharge:A,status:I}=n,R=(d==null?void 0:d.fullName)??"",ne=f.useMemo(()=>{const D=[];let T=0;return y&&y.status===j&&(T+=Number(y==null?void 0:y.totalPayment),D.push({key:"amenities_fee",fee:`${i.amenities_fee} ${y!=null&&y.code?`(${i.label.bill} ${y==null?void 0:y.code})`:""}`,cost:y.totalPaymentFormat})),v>0&&!m&&I!==$&&(T+=Number(v),D.push({key:"deposit_amount",fee:i.deposit_amount,cost:b})),A&&A.status===j&&I===$&&(T+=Number(A==null?void 0:A.totalPayment),C.forEach(L=>{D.push({key:L.id,fee:L.name,cost:L.priceFormat})})),D.push({key:"total_payment",fee:t("b",{children:i.total_payment}),cost:se(Number(T))}),D},[n]);K(g.code,g.codeLanguage,{message:i.label.success,description:i.status.payment_success},()=>{r()});async function ie(){const D=await u.validateFields();if(D){let T=null,L=null;if(c({code:void 0,codeLanguage:void 0,isFetching:!0}),y&&y.status===j&&!O){const M=await fe({idAmenityOrder:o,data:{...D,billId:y.id,cashier:R},idBuilding:e});T=M.code,L=M.codeLanguage}if(!y&&v>0&&!m&&I!==$){const M=await fe({idAmenityOrder:o,data:{...D,billId:null,cashier:R},idBuilding:e});T=M.code,L=M.codeLanguage}if(A&&A.status===j&&I===$){const M=await Ut({idAmenityOrder:o,data:{...D,billId:A.id,cashier:R},idBuilding:e});T=M.code,L=M.codeLanguage}c({code:T,codeLanguage:L,isFetching:!1}),G.includes(T)&&(await h(),s(e))}}return{form:u,codeOrder:_,hideModalConfirmPayment:r,onFinish:ie,isLoading:g==null?void 0:g.isFetching,dataSource:ne,isShowModalConfirmPayment:l.isShow}},qt=()=>{const{form:e,codeOrder:o,hideModalConfirmPayment:n,onFinish:r,isLoading:l,dataSource:d}=Ht();return t(U,{open:!0,title:a("span",{children:[i.payment," ",i.amenities_order,": ",t("b",{children:o})]}),onCancel:n,onOk:r,confirmLoading:l,width:"50%",children:t(Q,{type:tt,dataSource:d,form:e})})},Gt=async({idAmenityOrder:e,data:o,idBuilding:n})=>{const{paymentMethod:r,fundId:l,cashier:d,voucherDay:m,createdAt:s,labelId:h}=o,u={paymentMethod:r,fundId:l,cashier:d,voucherDay:F(m).toISOString(),createdAt:F(s).toISOString(),labelId:h||null};return nt({idAmenityBooking:e,body:u,idBuilding:n})},Kt=()=>{const{amenityOrder:e,hideModalConfirmRefund:o,idBuilding:n,currentUser:r,idAmenityOrder:l}=f.useContext(x),{getAmenitiesBookingBadges:d}=q(),[m]=z(),[s,h]=f.useState({data:[],code:void 0,codeLanguage:void 0,isFetching:!1}),{code:u="",refundUtilityPriceFormat:g=0,refundUtility:c={refundType:ae,refundValue:0},utilityPrice:_=0}=e,[v]=P.useForm(),b=(r==null?void 0:r.fullName)??"",C=f.useMemo(()=>[c.refundType!==ae?{key:"amenities_fee",fee:i.amenities_fee,cost:se(_)}:null,{key:"refund_level",fee:i.refund_level,cost:c.refundType===ae?se((c==null?void 0:c.refundValue)||0):`${(c==null?void 0:c.refundValue)||0} %`},{key:"total_refund",fee:t("b",{children:i.total_refund}),cost:g}].filter(Boolean),[e]),y=async()=>{const O=await v.validateFields();if(O){h({code:void 0,codeLanguage:void 0,isFetching:!0});const A=await Gt({idAmenityOrder:l,data:{...O,cashier:b},idBuilding:n});h({code:A.code,codeLanguage:A.codeLanguage,isFetching:!1}),G.includes(A.code)&&(m(),d(n))}};return K(s.code,s.codeLanguage,{message:i.label.success,description:i.status.payment_success},()=>{o()}),{form:v,onFinish:y,dataSource:C,isLoading:s==null?void 0:s.isFetching,codeOrder:u,hideModalConfirmRefund:o}},Jt=()=>{const{form:e,onFinish:o,dataSource:n,isLoading:r,codeOrder:l,hideModalConfirmRefund:d}=Kt();return t(U,{open:!0,title:a("span",{children:[i.refund," ",i.amenities_order,": ",t("b",{children:l})]}),okText:i.payment,onCancel:d,onOk:o,confirmLoading:r,width:"50%",children:t(Q,{type:Y,dataSource:n,form:e})})},Qt=async({idAmenityOrder:e,data:o,idBuilding:n})=>{const{paymentMethod:r,fundId:l,cashier:d,voucherDay:m,createdAt:s,labelId:h}=o,u={paymentMethod:r,fundId:l,cashier:d,voucherDay:F(m).toISOString(),createdAt:F(s).toISOString(),labelId:h||null},g=await it({idAmenityBooking:e,body:u,idBuilding:n});return{data:o,code:g.code,codeLanguage:g.codeLanguage}},Xt=()=>{const{currentUser:e}=f.useContext(ce),{amenityOrder:o,hideModalConfirmRefundDeposit:n,idAmenityOrder:r,idBuilding:l}=f.useContext(x),{getAmenitiesBookingBadges:d}=q(),[m]=z(),[s,h]=f.useState({data:[],code:void 0,codeLanguage:void 0,isFetching:!1}),{code:u="",depositsFormat:g="0"}=o,[c]=P.useForm(),_=(e==null?void 0:e.fullName)??"",v=[{key:"deposit_amount",fee:i.deposit_amount,cost:g},{key:"total_refund",fee:t("b",{children:i.total_refund}),cost:g}],b=async()=>{const C=await c.validateFields();if(C){h({code:void 0,codeLanguage:void 0,isFetching:!0});const y=await Qt({idAmenityOrder:r,data:{...C,cashier:_},idBuilding:l});h({code:y.code,codeLanguage:y.codeLanguage,isFetching:!1}),G.includes(y.code)&&(m(),d(l))}};return K(s.code,s.codeLanguage,{message:i.label.success,description:i.status.refund_of_deposit_successfully},()=>{n()}),{dataSource:v,form:c,onFinish:b,isLoading:s==null?void 0:s.isFetching,codeOrder:u,hideModalConfirmRefundDeposit:n}},Zt=()=>{const{dataSource:e,form:o,onFinish:n,isLoading:r,codeOrder:l,hideModalConfirmRefundDeposit:d}=Xt();return t(U,{open:!0,title:a("span",{children:[i.refund_deposit," ",i.amenities_order,": ",t("b",{children:l})]}),okText:i.payment,onCancel:d,onOk:n,confirmLoading:r,width:"50%",children:t(Q,{type:Y,dataSource:e,form:o})})},en=()=>{const{modalCancelOrderPolicy:e,hideModalCancelOrderPolicy:o}=f.useContext(x),{orderPolicies:n}=e==null?void 0:e.data;return{dataCancelOrderPolicy:f.useMemo(()=>n&&n.length?gt(n):[],[n]),hideModalCancelOrderPolicy:o}},tn=()=>{var n;const{dataCancelOrderPolicy:e,hideModalCancelOrderPolicy:o}=en();return t(U,{title:i.cancel_order_policy,footer:null,open:!0,onCancel:o,width:"50%",children:(n=e==null?void 0:e.map)==null?void 0:n.call(e,(r,l)=>a("div",{style:{display:"flex",justifyContent:"row",alignItems:"center",marginTop:"10px"},children:[t(ye,{name:"check",style:{marginRight:4}})," ",t("h4",{children:r})]},l))})},nn=async({idAmenityBooking:e,idBuilding:o})=>{try{const{code:n,codeLanguage:r,data:l}=await ot({idAmenityBooking:e,idBuilding:o});return{code:n,codeLanguage:r,data:l}}catch(n){return n}},on=()=>{const{amenityOrder:e,hideModalConfirmApproveOrder:o,idBuilding:n}=f.useContext(x),{getAmenitiesBookingBadges:r}=q(),[l]=z(),[d,m]=f.useState({code:void 0,codeLanguage:void 0,isFetching:!1});return K(d.code,d.codeLanguage,{message:i.success,description:i.approve_amenities_order_success}),{hideModalConfirmApproveOrder:o,onClickBtnOk:async()=>{m({code:void 0,codeLanguage:void 0,isFetching:!0});const h=await nn({idAmenityBooking:e.id,idBuilding:n});m({code:h.code,codeLanguage:h.codeLanguage,isFetching:!1}),G.includes(h.code)&&(l(),o(),r(n))},isLoading:d.isFetching,amenityOrder:e}},an=()=>{const{hideModalConfirmApproveOrder:e,onClickBtnOk:o,isLoading:n,amenityOrder:r}=on(),{depositsPaidAt:l,deposits:d,utilityPrice:m,utilityPricePaidAt:s}=r;return a(U,{open:!0,title:i.confirm_approve_order,onCancel:e,onOk:o,confirmLoading:n,width:"50%",children:[a("h4",{children:[i.you_are_approving_order," ",t("b",{children:r==null?void 0:r.code}),"?"]}),!s&&m>0||d>0&&!l?t(mt,{message:i.the_order_has_not_been_collected_yet,type:"warning",showIcon:!0,closable:!0}):null]})},rn=async({idAmenityBooking:e,idBuilding:o,values:n})=>{try{const{code:r,codeLanguage:l,data:d}=await at({idAmenityBooking:e,idBuilding:o,body:n});return{code:r,codeLanguage:l,data:d}}catch(r){return r}},sn=()=>{const[e]=P.useForm(),{amenityOrder:o,hideModalConfirmRejectOrder:n,idBuilding:r}=f.useContext(x),{getAmenitiesBookingBadges:l}=q(),[d]=z(),[m,s]=f.useState({code:void 0,codeLanguage:void 0,isFetching:!1});return K(m.code,m.codeLanguage,{message:i.success,description:i.reject_amenities_order_success.replace("{orderCode}",o.code)}),{hideModalConfirmRejectOrder:n,onClickBtnOk:async()=>{if(await e.validateFields()){const g=e.getFieldsValue();s({code:void 0,codeLanguage:void 0,isFetching:!0});const c=await rn({idAmenityBooking:o.id,idBuilding:r,values:g});s({code:c.code,codeLanguage:c.codeLanguage,isFetching:!1}),G.includes(c.code)&&(d(),n(),l())}},isLoading:m.isFetching,amenityOrder:o,form:e}},ln=()=>{const{hideModalConfirmRejectOrder:e,onClickBtnOk:o,isLoading:n,amenityOrder:r,form:l}=sn();return a(U,{open:!0,title:i.confirm_reject_order,onCancel:e,onOk:o,confirmLoading:n,width:"50%",children:[a("h4",{children:[i.you_are_rejecting_order," ",t("b",{children:r==null?void 0:r.code}),"?"]}),t(P,{layout:"vertical",style:{marginTop:"10px"},form:l,name:"formConfirm",children:t(P.Item,{rules:[{required:!0,max:1055}],label:i.please_input_reject_reason,name:"rejectReason",children:t(Ie.TextArea,{rows:4})})})]})},cn=async({idAmenityBooking:e,idBuilding:o,values:n})=>{try{const{code:r,codeLanguage:l,data:d}=await rt({idAmenityBooking:e,idBuilding:o,body:n});return{code:r,codeLanguage:l,data:d}}catch(r){return r}},dn=()=>{const[e]=P.useForm(),{amenityOrder:o,hideModalConfirmCancelOrder:n,idBuilding:r}=f.useContext(x),{getAmenitiesBookingBadges:l}=q(),[d]=z(),[m,s]=f.useState({code:void 0,codeLanguage:void 0,isFetching:!1});return K(m.code,m.codeLanguage,{message:i.success,description:i.cancel_amenities_order_success.replace("{orderCode}",o.code)}),{hideModalConfirmCancelOrder:n,onClickBtnOk:async()=>{if(await e.validateFields()){const g=e.getFieldsValue();s({code:void 0,codeLanguage:void 0,isFetching:!0});const c=await cn({idAmenityBooking:o.id,idBuilding:r,values:g});s({code:c.code,codeLanguage:c.codeLanguage,isFetching:!1}),G.includes(c.code)&&(d(),n(),l(r))}},isLoading:m.isFetching,amenityOrder:o,form:e}},mn=()=>{const{hideModalConfirmCancelOrder:e,onClickBtnOk:o,isLoading:n,amenityOrder:r,form:l}=dn();return a(U,{open:!0,title:i.confirm_cancel_order,onCancel:e,onOk:o,confirmLoading:n,width:"50%",children:[a("h4",{children:[i.you_are_cancelling_order," ",t("b",{children:r==null?void 0:r.code}),"?"]}),t(P,{layout:"vertical",style:{marginTop:"10px"},form:l,name:"formConfirm",children:t(P.Item,{rules:[{required:!0,max:1055}],label:i.please_input_cancel_reason,name:"rejectReason",children:t(Ie.TextArea,{rows:4})})})]})},un=()=>{const{setTitlePage:e}=f.useContext(ce),{tabShow:o,modalConfirmPayment:n,modalConfirmRefund:r,modalCancelOrderPolicy:l,modalConfirmRefundDeposit:d,modalConfirmApproveOrder:m,modalConfirmRejectOrder:s,modalConfirmCancelOrder:h}=f.useContext(x),[u]=z();return f.useEffect(()=>(e(i.amenities_order_detail),(async()=>await u())(),()=>{e("")}),[]),{tabShow:o,isShowModalConfirmRefund:r.isShow,isShowModalConfirmPayment:n.isShow,isShowModalCancelOrderPolicy:l.isShow,isShowModalConfirmRefundDeposit:d.isShow,isShowModalConfirmApproveOrder:m.isShow,isShowModalConfirmRejectOrder:s.isShow,isShowModalConfirmCancelOrder:h.isShow}},pn=()=>{const{tabShow:e,isShowModalConfirmPayment:o,isShowModalConfirmRefund:n,isShowModalConfirmRefundDeposit:r,isShowModalCancelOrderPolicy:l,isShowModalConfirmApproveOrder:d,isShowModalConfirmRejectOrder:m,isShowModalConfirmCancelOrder:s}=un();return a("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[a(S,{gutter:[8,0],style:{flex:1},children:[a(p,{style:{display:"flex",flexDirection:"column",flex:1,paddingLeft:0},span:16,children:[e.type===_e&&t(It,{}),e.type===Z&&t(Vt,{}),e.type===Ae&&t(Wt,{}),e.type===we&&t(Yt,{})]}),a(p,{style:{display:"flex",flexDirection:"column",flex:1},span:8,children:[t(Tt,{}),t(Lt,{}),t(Ft,{}),t(Et,{})]})]}),n?t(Jt,{}):null,o?t(qt,{}):null,l?t(tn,{}):null,r?t(Zt,{}):null,d?t(an,{}):null,m?t(ln,{}):null,s?t(mn,{}):null]})},Zi=()=>t(ft,{children:t(pn,{})});export{Zi as default};
