import{h as Me,i as xe,j as be,k as Oe,_ as le,c as N,a as f,d as T,l as ge,b as Te,e as Be}from"./@babel-b64fd0f9.js";import{c as Ge}from"./classnames-4ba1ba1a.js";import{c as me,e as ke,k as te,H as Je,s as Xe,I as Ye}from"./rc-util-0bc219f3.js";import{r as s}from"./react-4fd50329.js";var Ze=s.createContext({}),et=function(t){Me(n,t);var e=xe(n);function n(){return be(this,n),e.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){return this.props.children}}]),n}(s.Component),K="none",X="appear",Y="enter",Z="leave",Ce="none",P="prepare",H="start",W="active",pe="end",De="prepared";function Re(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function tt(t,e){var n={animationend:Re("Animation","AnimationEnd"),transitionend:Re("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var nt=tt(me(),typeof window<"u"?window:{}),Ne={};if(me()){var rt=document.createElement("div");Ne=rt.style}var ee={};function Ue(t){if(ee[t])return ee[t];var e=nt[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var u=n[i];if(Object.prototype.hasOwnProperty.call(e,u)&&u in Ne)return ee[t]=e[u],ee[t]}return""}var Ve=Ue("animationend"),we=Ue("transitionend"),Ie=!!(Ve&&we),Le=Ve||"animationend",_e=we||"transitionend";function Pe(t,e){if(!t)return null;if(le(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const at=function(t){var e=s.useRef(),n=s.useRef(t);n.current=t;var r=s.useCallback(function(a){n.current(a)},[]);function i(a){a&&(a.removeEventListener(_e,r),a.removeEventListener(Le,r))}function u(a){e.current&&e.current!==a&&i(e.current),a&&a!==e.current&&(a.addEventListener(_e,r),a.addEventListener(Le,r),e.current=a)}return s.useEffect(function(){return function(){i(e.current)}},[]),[u,i]};var Fe=me()?s.useLayoutEffect:s.useEffect;const it=function(){var t=s.useRef(null);function e(){ke.cancel(t.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var u=ke(function(){i<=1?r({isCanceled:function(){return u!==t.current}}):n(r,i-1)});t.current=u}return s.useEffect(function(){return function(){e()}},[]),[n,e]};var ot=[P,H,W,pe],ut=[P,De],je=!1,st=!0;function Ke(t){return t===W||t===pe}const ct=function(t,e,n){var r=te(Ce),i=N(r,2),u=i[0],a=i[1],m=it(),E=N(m,2),o=E[0],c=E[1];function v(){a(P,!0)}var d=e?ut:ot;return Fe(function(){if(u!==Ce&&u!==pe){var l=d.indexOf(u),S=d[l+1],R=n(u);R===je?a(S,!0):S&&o(function(M){function k(){M.isCanceled()||a(S,!0)}R===!0?k():Promise.resolve(R).then(k)})}},[t,u]),s.useEffect(function(){return function(){c()}},[]),[v,u]};function vt(t,e,n,r){var i=r.motionEnter,u=i===void 0?!0:i,a=r.motionAppear,m=a===void 0?!0:a,E=r.motionLeave,o=E===void 0?!0:E,c=r.motionDeadline,v=r.motionLeaveImmediately,d=r.onAppearPrepare,l=r.onEnterPrepare,S=r.onLeavePrepare,R=r.onAppearStart,M=r.onEnterStart,k=r.onLeaveStart,U=r.onAppearActive,V=r.onEnterActive,D=r.onLeaveActive,w=r.onAppearEnd,L=r.onEnterEnd,C=r.onLeaveEnd,O=r.onVisibleChanged,ne=te(),Q=N(ne,2),_=Q[0],I=Q[1],h=te(K),F=N(h,2),p=F[0],x=F[1],B=te(null),G=N(B,2),re=G[0],$=G[1],ae=s.useRef(!1),ie=s.useRef(null);function J(){return n()}var Ee=s.useRef(!1);function Se(){x(K,!0),$(null,!0)}function ye(g){var y=J();if(!(g&&!g.deadline&&g.target!==y)){var A=Ee.current,b;p===X&&A?b=w==null?void 0:w(y,g):p===Y&&A?b=L==null?void 0:L(y,g):p===Z&&A&&(b=C==null?void 0:C(y,g)),p!==K&&A&&b!==!1&&Se()}}var Qe=at(ye),$e=N(Qe,1),He=$e[0],Ae=function(y){var A,b,q;switch(y){case X:return A={},T(A,P,d),T(A,H,R),T(A,W,U),A;case Y:return b={},T(b,P,l),T(b,H,M),T(b,W,V),b;case Z:return q={},T(q,P,S),T(q,H,k),T(q,W,D),q;default:return{}}},z=s.useMemo(function(){return Ae(p)},[p]),We=ct(p,!t,function(g){if(g===P){var y=z[P];return y?y(J()):je}if(j in z){var A;$(((A=z[j])===null||A===void 0?void 0:A.call(z,J(),null))||null)}return j===W&&(He(J()),c>0&&(clearTimeout(ie.current),ie.current=setTimeout(function(){ye({deadline:!0})},c))),j===De&&Se(),st}),he=N(We,2),ze=he[0],j=he[1],qe=Ke(j);Ee.current=qe,Fe(function(){I(e);var g=ae.current;ae.current=!0;var y;!g&&e&&m&&(y=X),g&&e&&u&&(y=Y),(g&&!e&&o||!g&&v&&!e&&o)&&(y=Z);var A=Ae(y);y&&(t||A[P])?(x(y),ze()):x(K)},[e]),s.useEffect(function(){(p===X&&!m||p===Y&&!u||p===Z&&!o)&&x(K)},[m,u,o]),s.useEffect(function(){return function(){ae.current=!1,clearTimeout(ie.current)}},[]);var oe=s.useRef(!1);s.useEffect(function(){_&&(oe.current=!0),_!==void 0&&p===K&&((oe.current||_)&&(O==null||O(_)),oe.current=!0)},[_,p]);var ue=re;return z[P]&&j===H&&(ue=f({transition:"none"},ue)),[p,j,ue,_??e]}function ft(t){var e=t;le(t)==="object"&&(e=t.transitionSupport);function n(i,u){return!!(i.motionName&&e&&u!==!1)}var r=s.forwardRef(function(i,u){var a=i.visible,m=a===void 0?!0:a,E=i.removeOnLeave,o=E===void 0?!0:E,c=i.forceRender,v=i.children,d=i.motionName,l=i.leavedClassName,S=i.eventProps,R=s.useContext(Ze),M=R.motion,k=n(i,M),U=s.useRef(),V=s.useRef();function D(){try{return U.current instanceof HTMLElement?U.current:Ye(V.current)}catch{return null}}var w=vt(k,m,D,i),L=N(w,4),C=L[0],O=L[1],ne=L[2],Q=L[3],_=s.useRef(Q);Q&&(_.current=!0);var I=s.useCallback(function($){U.current=$,Je(u,$)},[u]),h,F=f(f({},S),{},{visible:m});if(!v)h=null;else if(C===K)Q?h=v(f({},F),I):!o&&_.current&&l?h=v(f(f({},F),{},{className:l}),I):c||!o&&!l?h=v(f(f({},F),{},{style:{display:"none"}}),I):h=null;else{var p,x;O===P?x="prepare":Ke(O)?x="active":O===H&&(x="start");var B=Pe(d,"".concat(C,"-").concat(x));h=v(f(f({},F),{},{className:Ge(Pe(d,C),(p={},T(p,B,B&&x),T(p,d,typeof d=="string"),p)),style:ne}),I)}if(s.isValidElement(h)&&Xe(h)){var G=h,re=G.ref;re||(h=s.cloneElement(h,{ref:I}))}return s.createElement(et,{ref:V},h)});return r.displayName="CSSMotion",r}const dt=ft(Ie);var ce="add",ve="keep",fe="remove",se="removed";function lt(t){var e;return t&&le(t)==="object"&&"key"in t?e=t:e={key:t},f(f({},e),{},{key:String(e.key)})}function de(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(lt)}function mt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=e.length,u=de(t),a=de(e);u.forEach(function(o){for(var c=!1,v=r;v<i;v+=1){var d=a[v];if(d.key===o.key){r<v&&(n=n.concat(a.slice(r,v).map(function(l){return f(f({},l),{},{status:ce})})),r=v),n.push(f(f({},d),{},{status:ve})),r+=1,c=!0;break}}c||n.push(f(f({},o),{},{status:fe}))}),r<i&&(n=n.concat(a.slice(r).map(function(o){return f(f({},o),{},{status:ce})})));var m={};n.forEach(function(o){var c=o.key;m[c]=(m[c]||0)+1});var E=Object.keys(m).filter(function(o){return m[o]>1});return E.forEach(function(o){n=n.filter(function(c){var v=c.key,d=c.status;return v!==o||d!==fe}),n.forEach(function(c){c.key===o&&(c.status=ve)})}),n}var pt=["component","children","onVisibleChanged","onAllRemoved"],Et=["status"],St=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function yt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dt,n=function(r){Me(u,r);var i=xe(u);function u(){var a;be(this,u);for(var m=arguments.length,E=new Array(m),o=0;o<m;o++)E[o]=arguments[o];return a=i.call.apply(i,[this].concat(E)),T(ge(a),"state",{keyEntities:[]}),T(ge(a),"removeKey",function(c){var v=a.state.keyEntities,d=v.map(function(l){return l.key!==c?l:f(f({},l),{},{status:se})});return a.setState({keyEntities:d}),d.filter(function(l){var S=l.status;return S!==se}).length}),a}return Oe(u,[{key:"render",value:function(){var m=this,E=this.state.keyEntities,o=this.props,c=o.component,v=o.children,d=o.onVisibleChanged,l=o.onAllRemoved,S=Te(o,pt),R=c||s.Fragment,M={};return St.forEach(function(k){M[k]=S[k],delete S[k]}),delete S.keys,s.createElement(R,S,E.map(function(k,U){var V=k.status,D=Te(k,Et),w=V===ce||V===ve;return s.createElement(e,Be({},M,{key:D.key,visible:w,eventProps:D,onVisibleChanged:function(C){if(d==null||d(C,{key:D.key}),!C){var O=m.removeKey(D.key);O===0&&l&&l()}}}),function(L,C){return v(f(f({},L),{},{index:U}),C)})}))}}],[{key:"getDerivedStateFromProps",value:function(m,E){var o=m.keys,c=E.keyEntities,v=de(o),d=mt(c,v);return{keyEntities:d.filter(function(l){var S=c.find(function(R){var M=R.key;return l.key===M});return!(S&&S.status===se&&l.status===fe)})}}}]),u}(s.Component);return T(n,"defaultProps",{component:"div"}),n}const kt=yt(Ie);export{dt as C,kt as a};
