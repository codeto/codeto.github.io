import{j as t,a as T,u as Ee,b as E,F as ue,c as mt}from"./@emotion-63839449.js";import{j as Ge,D as ht,P as D,o as gt,a as Te,b as ye,w as Ie,T as $e,n as He}from"./index-b17d22e5.js";import{r as f}from"./react-4fd50329.js";import"./lodash-88fe09e6.js";import{h as me}from"./moment-a468e1f9.js";import{l as n,a9 as I,s as M,b0 as pt,K as ce,aO as Ae,at as ft,i as X,A as J,M as K,j as Z,X as ee,a3 as We,I as F,bG as St,a5 as te,a as Re,S as qe,ce as Ye,gu as At,gm as _t,bI as Et,gv as Tt,dk as yt}from"./index-c2ded735.js";import"./file-saver-40cf32a9.js";import{I as _e,S as W}from"./index-43183512.js";import"./react-redux-896b353b.js";import"./@firebase-43527ee1.js";import{P as wt}from"./prop-types-1172f4d5.js";import{F as P,u as Fe}from"./index-687ba9e6.js";import{u as xt}from"./react-router-a4308f7b.js";import{B as Me,T as q,w as je,S as Qe,R as we,b as z,I as bt,c as $,n as de,A as vt}from"./antd-f9eae174.js";import{I as Xe}from"./index-f7aef2cc.js";import{P as Je}from"./index-d2c5b7c0.js";import{T as Nt}from"./index-dac0556c.js";import{u as Ct}from"./useTableCheckbox-753d19b2.js";import{u as Lt}from"./useFloor-e6fe641c.js";import{D as It}from"./document-96ae7510.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./@babel-b64fd0f9.js";import"./stylis-79144faa.js";import"./react-router-dom-2a8f5f6d.js";import"./history-a1882333.js";import"./resolve-pathname-e210f2ac.js";import"./tiny-invariant-dd7d57d2.js";import"./account-86ffff50.js";import"./index-881eef42.js";import"./libphonenumber-js-0d5a9c92.js";import"./react-infinite-scroll-component-e33646cb.js";import"./classnames-4ba1ba1a.js";import"./redux-10bbab4c.js";import"./react-dom-40621ea0.js";import"./scheduler-765c72db.js";import"./@redux-saga-8bafe09b.js";import"./redux-logger-e1c9ca90.js";import"./dompurify-8e338605.js";import"./query-string-f5cca1e7.js";import"./decode-uri-component-4138e85d.js";import"./split-on-first-4f1167c8.js";import"./filter-obj-2ed190f4.js";import"./oidc-client-7da0eaf7.js";import"./firebase-878887a2.js";import"./rc-pagination-c1e6a0ac.js";import"./rc-picker-2e3d5fe5.js";import"./rc-util-0bc219f3.js";import"./rc-trigger-570b13ec.js";import"./rc-motion-ae889c42.js";import"./rc-align-e5d7b12e.js";import"./dom-align-ecb06dd6.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-resize-observer-b9ad4e29.js";import"./@ant-design-cba9d434.js";import"./@ctrl-fb5a5473.js";import"./rc-tabs-dfd19a56.js";import"./rc-dropdown-5378dd0a.js";import"./rc-menu-b15ebfe9.js";import"./rc-overflow-6be96612.js";import"./rc-select-564caf01.js";import"./rc-virtual-list-8a7b82a6.js";import"./rc-collapse-11b7d3c4.js";import"./shallowequal-4542d6f7.js";import"./rc-drawer-317f0b4d.js";import"./@rc-component-5a112e55.js";import"./rc-field-form-ef5549aa.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./rc-image-e0357917.js";import"./rc-dialog-b1d1f07b.js";import"./rc-input-number-8bc068f7.js";import"./rc-rate-c64cf0d5.js";import"./rc-steps-2d1924c7.js";import"./rc-switch-b4e96de7.js";import"./rc-table-191ecc42.js";import"./rc-checkbox-018e8052.js";import"./rc-tree-67773537.js";import"./rc-tree-select-cb7eccc3.js";import"./copy-to-clipboard-64585c8c.js";import"./toggle-selection-93f4ad84.js";import"./rc-textarea-d01adcbb.js";import"./rc-input-02c2c2ba.js";import"./rc-upload-3ab0f08a.js";import"./rc-notification-d13dc43b.js";import"./rc-progress-4f1a7096.js";import"./rc-tooltip-08fa4217.js";import"./use-sync-external-store-5d1b6592.js";import"./idb-cdd1a92f.js";import"./path-to-regexp-ef8d5544.js";import"./@tinymce-4731cc9d.js";const ne={title:void 0,sendDate:[me().startOf("month").startOf("day"),me().endOf("month").endOf("day")],label:""},xe={apartment:void 0,status:""},Se={floors:[],apartment:void 0},be="SEND_EMAIL",Ke="SEND_APP",ve="Tôi đồng ý",Ne="Tôi không đồng ý",Ce="Ý kiến khác",Ze="RESIDENT",Rt="HOUSEHOLDER",Ft=["UNIT_NOT_EXISTS_RESIDENT_EMAIL","UNIT_NOT_EXISTS_RESIDENT _EMAIL","UNIT_NOT_EXISTS_HOUSEHOLDER_EMAIL","UNIT_NOT_EXISTS_HOUSEHOLDER_RESIDENT_EMAIL"],Mt=[{label:n.success,value:"SUCCESS"},{label:n.fail,value:"FAILURE"}],kt="CAPACITY_SEND_EMAIL_INVALID",j=f.createContext({announcementPermissionWrite:!1,idBuilding:0,formFilter:void 0,getListAnnouncementStatus:{isFetching:!1},setGetListAnnouncementStatus:()=>{},filter:{...ne},setFilter:()=>{},tableData:{records:[],totalRecord:0},setTableData:()=>{},tablePagination:{current:I,limit:M},setTablePagination:()=>{},announcementDetail:{},setAnnouncementDetail:()=>{},modalSendAnnouncement:void 0,showModalSendAnnouncement:()=>{},hideModalSendAnnouncement:()=>{},modalViewAnnouncement:void 0,showModalViewAnnouncement:()=>{},hideModalViewAnnouncement:()=>{},modalViewAnnouncementContent:void 0,showModalViewAnnouncementContent:()=>{},hideModalViewAnnouncementContent:()=>{},modalStatisticsAnnouncement:void 0,showModalStatisticsAnnouncement:()=>{},hideModalStatisticsAnnouncement:()=>{}}),ke=({children:e})=>{var V;const{idBuilding:s}=xt(),{getPermissionByModuleCode:i}=pt(),[o,l]=f.useState({isFetching:!1}),[a,h]=f.useState({}),[g,u]=f.useState(ne),[m,y]=f.useState({records:[],totalRecord:0}),[b,_]=f.useState({current:I,limit:M}),[S]=P.useForm(),[r,L,C]=ce(),[x,c,A]=ce(),[v,w,N]=ce(),[d,Y,Q]=ce(),[ie,oe,se]=ce(),H={announcementPermissionWrite:((V=i(Ae))==null?void 0:V[ft])??!1,idBuilding:s,formFilter:S,getListAnnouncementStatus:o,setGetListAnnouncementStatus:l,filter:g,setFilter:u,tableData:m,setTableData:y,tablePagination:b,setTablePagination:_,announcementDetail:a,setAnnouncementDetail:h,modalSendAnnouncement:r,showModalSendAnnouncement:L,hideModalSendAnnouncement:C,modalResendAnnouncement:x,showModalResendAnnouncement:c,hideModalResendAnnouncement:A,modalViewAnnouncement:v,showModalViewAnnouncement:w,hideModalViewAnnouncement:N,modalViewAnnouncementContent:d,showModalViewAnnouncementContent:Y,hideModalViewAnnouncementContent:Q,modalStatisticsAnnouncement:ie,showModalStatisticsAnnouncement:oe,hideModalStatisticsAnnouncement:se};return t(j.Provider,{value:H,children:e})};ke.propTypes={children:wt.node};ke.defaultProps={children:t("div",{})};const Ot=ke,Ut=`${Z}/announcement/list`,Pt=`${Z}/announcement`,Dt=e=>`${Z}/announcement/${e}`,Vt=e=>`${Z}/announcement/${e}/resend-emails`,Bt=e=>`${Z}/announcement/${e}`,zt=e=>`${Z}/announcement/${e}/units`,Ht=e=>`${Z}/announcement/${e}/send-by-mail`;async function Yt({idBuilding:e,filter:s,page:i,limit:o}){const l={[ee]:e},a={...s,page:i,limit:o};return X({type:J,payload:{apiUrl:Ut,method:K.GET,options:{params:a,headers:l}}})}async function Gt(e,s){const i={[ee]:e},o={...s};return X({type:J,payload:{apiUrl:Pt,method:K.POST,body:o,options:{headers:i}}})}async function $t(e,s,i){const o={[ee]:e};return X({type:J,payload:{apiUrl:Vt(s),method:K.POST,body:{unitId:i},options:{headers:o}}})}async function Wt(e,s){const i={[ee]:e};return X({type:J,payload:{apiUrl:Bt(s),method:K.DELETE,options:{headers:i}}})}async function qt({idBuilding:e,idAnnouncement:s,filter:i,page:o,limit:l}){const a={[ee]:e};return X({type:J,payload:{apiUrl:zt(s),method:K.GET,options:{headers:a,params:{...i,page:o,limit:l}}}})}async function jt({idBuilding:e,idAnnouncement:s,filter:i,page:o,limit:l}){const a={[ee]:e};return X({type:J,payload:{apiUrl:Ht(s),method:K.GET,options:{headers:a,params:{...i,page:o,limit:l}}}})}async function Qt({idBuilding:e,idAnnouncement:s}){const i={[ee]:e};return X({type:J,payload:{apiUrl:Dt(s),method:K.GET,options:{headers:i}}})}const et=({id:e,title:s,content:i,creator:o,createdAt:l,numOfUnits:a,numOfViews:h,sendTypes:g,attachFiles:u,announcementPolls:m,receiver:y,statistics:b,status:_,deletedAt:S,thumbnail:r,labels:L})=>{var C,x,c,A,v,w,N;return{key:e,id:e,title:s,content:i,sender:{id:o==null?void 0:o.id,name:(o==null?void 0:o.fullName)??""},senderName:(o==null?void 0:o.fullName)??"",sendDate:l,statisticsAnnouncement:{totalApartment:a,totalSeen:h,totalSendEmailSuccess:((C=b==null?void 0:b[be])==null?void 0:C.success)??0},statisticsVote:{totalAgree:((x=m==null?void 0:m.find(d=>d.question===ve))==null?void 0:x.votes)??0,totalDisagree:((c=m==null?void 0:m.find(d=>d.question===Ne))==null?void 0:c.votes)??0,totalOther:((A=m==null?void 0:m.find(d=>d.question===Ce))==null?void 0:A.votes)??0},isHavePoll:m.length>0,polls:[{label:n.agree,value:(v=m==null?void 0:m.find(d=>d.question===ve))==null?void 0:v.id},{label:n.disagree,value:(w=m==null?void 0:m.find(d=>d.question===Ne))==null?void 0:w.id},{label:n.other,value:(N=m==null?void 0:m.find(d=>d.question===Ce))==null?void 0:N.id}],isSendEmail:g.includes(be),isSendApp:g.includes(Ke),labels:(L==null?void 0:L.map(d=>({id:d.id,title:d.title})))??[],attachments:u,thumbnail:r,iSendHouseHolder:!0,isSendResident:y===Ze,status:_,deletedAt:S}},he=async({idBuilding:e,filter:s,page:i,limit:o})=>{try{const{title:l,sendDate:a,label:h}=s,g=a==null?void 0:a[0],u=a==null?void 0:a[1],m=await Yt({filter:{title:l,labelIds:h?[h]:[],startDate:g?me(g).startOf("day").toDate():void 0,endDate:u?me(u).endOf("day").toDate():void 0},idBuilding:e,limit:o,page:i});return{code:m.code,codeLanguage:m.codeLanguage,data:m.data.map(y=>et(y)),totalRecord:m.totalRecord}}catch(l){return{code:l.code,codeLanguage:l.codeLanguage,data:[],totalRecord:0}}},Xt=()=>{const{idBuilding:e,setFilter:s,setTablePagination:i,setTableData:o,setGetListAnnouncementStatus:l,formFilter:a}=f.useContext(j),{labelsAccountingData:h}=Ge();return[async u=>{l({isFetching:!0}),s({...u}),i({current:I,limit:M});const m=await he({filter:{...u},idBuilding:e,limit:M,page:I});o({records:m.data,totalRecord:m.totalRecord}),l({isFetching:!1})},a,h]},Jt=()=>{const[e,s,i]=Xt(),o=f.useMemo(()=>[{label:n.title,key:"title",component:t(_e,{placeholder:n.title,fluid:"true"}),visible:!0},{label:n.send_date,key:"sendDate",component:t(ht.RangePicker,{placeholder:["DD/MM/YYYY","DD/MM/YYYY"],format:["DD/MM/YYYY","DD/MM/YYYY"],fluid:"true",getPopupContainer:l=>l.parentNode}),visible:!0},{label:n.label1,key:"label",component:T(W,{showSearch:!0,filterOption:(l,a)=>a.children.toLowerCase().includes(l.toLowerCase()),placeholder:n.label1,fluid:"true",getPopupContainer:l=>l.parentNode,children:[t(W.Option,{value:"",children:n.all_label},"label_0"),i.map(({id:l,title:a})=>t(W.Option,{value:l,children:a},l))]}),visible:!0}],[]);return t(D.FilterBox,{defaultFilter:ne,filters:o,formData:s,onSearch:e})},Kt=()=>{const{announcementPermissionWrite:e,tableData:s,showModalSendAnnouncement:i}=f.useContext(j),o=()=>{i()},{totalRecord:l}=s;return[e,l,o]};function Zt(){const e=We(),[s,i,o]=Kt(),l=[s?t(Me,{type:"primary",icon:t(F,{name:"icon-plus-circle-outlined"}),onClick:()=>{e({action:St,label:te}),o()},children:n.add},"add"):null].filter(Boolean);return t(D.ActionBox,{actions:l,total:i})}const en=async(e,s)=>{try{const i=await Wt(e,s);return{code:i.code,codeLanguage:i.codeLanguage}}catch(i){return{code:i.code,codeLanguage:i.codeLanguage}}},tn=()=>{const{layoutScrollRef:e}=f.useContext(Re),{idBuilding:s,filter:i,tablePagination:o,setTablePagination:l,tableData:a,setTableData:h,getListAnnouncementStatus:g,setGetListAnnouncementStatus:u,showModalViewAnnouncementContent:m,showModalViewAnnouncement:y,showModalSendAnnouncement:b,showModalStatisticsAnnouncement:_,announcementPermissionWrite:S}=f.useContext(j),r=Ee(),[L,C]=f.useState({isFetching:!1,code:void 0,codeLanguage:void 0});Fe(L.code,L.codeLanguage,{message:n.success,description:n.delete_data_success});const x=async(k,H)=>{let{current:V,limit:G}=o;k!==V?V=k:H!==G&&(G=H,V=I),l({current:V,limit:G}),u({isFetching:!0});const ge=await he({filter:{...i},idBuilding:s,limit:G,page:V});h({records:ge.data,totalRecord:ge.totalRecord}),u({isFetching:!1})},c=g.isFetching,A=a.records,v={current:o.current,pageSize:o.limit,defaultCurrent:I,total:a.totalRecord,showQuickJumper:!0,showSizeChanger:!0,onChange:x},w={scrollToFirstRowOnChange:!0},N={offsetScroll:r.offsetScrollX,getContainer:()=>e.current},d=k=>{m(k)},Y=k=>{y({...k})},Q=k=>{b({...k})},ie=k=>{_({...k})},oe=async k=>{C({isFetching:!0,code:void 0,codeLanguage:void 0});const H=await en(s,k.id);if(C({isFetching:!1,code:H.code,codeLanguage:H.codeLanguage}),qe.includes(H.code)){u({isFetching:!0});const V=await he({filter:{...i},idBuilding:s,limit:o.limit,page:o.current});return h({records:V.data,totalRecord:V.totalRecord}),u({isFetching:!1}),Promise.resolve()}return Promise.reject()},se=()=>{C({isFetching:!1,code:void 0,codeLanguage:void 0})};return[c,L.isFetching,N,w,v,A,d,Q,oe,se,Y,ie,S]};var nn={name:"s5xdrg",styles:"display:flex;align-items:center"},on={name:"s5xdrg",styles:"display:flex;align-items:center"},sn={name:"s5xdrg",styles:"display:flex;align-items:center"},an={name:"q91mxi",styles:"padding:0;display:flex;align-items:center"},ln={name:"s5xdrg",styles:"display:flex;align-items:center"};function rn(){const[e,s,i,o,l,a,h,g,u,m,y,b,_]=tn(),S=We(),r=Ee(),L=x=>{gt({questionText:T("div",{children:[T("span",{children:[n.do_you_want_to_delete_this_announcement," ?"]}),t("br",{}),t("span",{css:E({color:r.color.warning},"",""),children:T("i",{children:["(",n.announcement_will_disappear_in_resident_app,")"]})})]}),isAll:!1,totalItem:1,delayTime:0,onOk:async()=>{await u(x)},onCancel:m,loading:s})},C=[{title:n.title,key:"title",dataIndex:"title",width:250,fixed:"left",ellipsis:{showTitle:!1},render:(x,c)=>T(ue,{children:[t(q,{placement:"topLeft",title:x,children:x}),T("div",{css:nn,children:[t(F,{css:E({marginRight:r.margin.xss},"",""),name:"icon-attachment-outlined",title:n.attachments}),t("span",{children:c.attachments.length})]})]})},{title:n.content,key:"content",dataIndex:"content",width:100,align:"center",render:(x,c)=>t(F,{name:"icon-eye-outlined",css:E({fontSize:r.iconSize},"",""),onClick:()=>{S({action:Ye,label:te}),h(c)},title:n.content})},{title:n.sender,key:"senderName",dataIndex:"senderName",width:150},{title:n.send_date,key:"sendDate",dataIndex:"sendDate",width:150,render:x=>x?me(x).format("DD/MM/YYYY"):""},{title:n.send_to,key:"sendTo",dataIndex:"sendTo",width:100,render:(x,c)=>T(ue,{children:[c.isSendApp?t(q,{placement:"topLeft",title:n.mail,children:t(F,{css:E({fontSize:r.iconSize,marginRight:c.isSendApp?r.margin.xs:0},"",""),name:"icon-mobile-outlined",title:n.send_to_app})}):null,c.isSendEmail?t(q,{placement:"topLeft",title:n.app,children:t(F,{css:E({fontSize:r.iconSize},"",""),name:"icon-mail-outlined",title:n.send_to_mail})}):null]})},{title:n.statistics,key:"statistics",dataIndex:"statistics",width:250,render:(x,c)=>T("a",{onClick:()=>{S({action:At,label:te}),b(c)},css:on,children:[T(q,{css:E({display:"flex",alignItems:"center",marginRight:r.margin.xss},"",""),placement:"topLeft",title:n.seen,children:[t(F,{css:E({fontSize:r.iconSize,marginRight:r.margin.xss},"",""),name:"icon-eye-outlined"}),t("span",{css:E({marginRight:r.margin.xss},"",""),children:c.statisticsAnnouncement.totalSeen})]}),c.isSendEmail?T(q,{css:E({display:"flex",alignItems:"center",marginRight:r.margin.xss},"",""),placement:"topLeft",title:n.email_sent,children:[t(F,{css:E({fontSize:r.iconSize,marginRight:r.margin.xss},"",""),name:"icon-mail-outlined"}),t("span",{children:c.statisticsAnnouncement.totalSendEmailSuccess})]}):null,T(q,{css:sn,placement:"topLeft",title:n.apartment_sent,children:[t(F,{css:E({fontSize:r.iconSize,marginRight:r.margin.xss},"",""),name:"icon-apartment-outlined"}),t("span",{children:c.statisticsAnnouncement.totalApartment})]})]})},{title:n.vote,key:"vote",dataIndex:"vote",width:150,render:(x,c)=>c.isHavePoll?T("div",{css:an,children:[T(q,{css:E({display:"flex",alignItems:"center",marginRight:r.margin.xss},"",""),placement:"topLeft",title:n.agree,children:[t(F,{css:E({fontSize:r.iconSize,marginRight:r.margin.xss},"",""),name:"icon-check-circle-outlined"}),t("span",{children:c.statisticsVote.totalAgree})]}),T(q,{css:E({display:"flex",alignItems:"center",marginRight:r.margin.xss},"",""),placement:"topLeft",title:n.disagree,children:[t(F,{css:E({fontSize:r.iconSize,marginRight:r.margin.xss},"",""),name:"icon-close-circle-outlined"}),t("span",{children:c.statisticsVote.totalDisagree})]}),T(q,{css:ln,placement:"topLeft",title:n.other,children:[t(F,{css:E({fontSize:r.iconSize,marginRight:r.margin.xss},"",""),name:"icon-exclamation-circle-outlined"}),t("span",{children:c.statisticsVote.totalOther})]})]}):null},{title:n.label1,key:"label",dataIndex:"label",width:200,render:(x,c)=>c.labels.map((A,v)=>t("div",{css:E({marginTop:v!==0?r.margin.xss:0},"",""),children:t(je,{color:"blue",children:A.title})},v))},{title:n.actions,key:"",dataIndex:"",width:100,fixed:"right",align:"center",render:(x,c)=>T(ue,{children:[t(F,{name:"icon-eye-outlined",css:E({fontSize:r.iconSize,marginRight:r.margin.xs},"",""),onClick:()=>{S({action:Ye,label:te}),y(c)},title:n.detail}),_?T(ue,{children:[t(F,{name:"icon-copy-outlined",css:E({fontSize:r.iconSize,marginRight:r.margin.xs},"",""),onClick:()=>{S({action:_t,label:te}),g(c)},title:n.label.duplicate}),t(F,{name:"icon-minus-circle-outlined",css:E({fontSize:r.iconSize},"",""),onClick:()=>{S({action:Et,label:te}),L(c)},title:n.delete})]}):null]})}].filter(Boolean);return t(D.Table,{columns:C,dataSource:a,loading:e,pagination:l,scroll:{...o,x:C.reduce((x,c)=>x+c.width,0)},sticky:i})}const Oe=async({idBuilding:e,idAnnouncement:s})=>{try{const i=await Qt({idBuilding:e,idAnnouncement:s});return{code:i.code,codeLanguage:i.codeLanguage,data:i!=null&&i.data?et(i==null?void 0:i.data):{}}}catch(i){return{code:i.code,codeLanguage:i.codeLanguage,data:[],totalRecord:0}}},cn=()=>{const{idBuilding:e,modalViewAnnouncementContent:s,hideModalViewAnnouncementContent:i,setAnnouncementDetail:o,announcementDetail:l}=f.useContext(j),[a,h]=f.useState({isFetching:!1}),{data:g}=s,u=()=>i();return f.useEffect(()=>{(async()=>{h({isFetching:!0});const m=await Oe({idBuilding:e,idAnnouncement:g.id});o((m==null?void 0:m.data)??{}),h({isFetching:!1})})()},[]),[(l==null?void 0:l.content)??"",u,a==null?void 0:a.isFetching]},dn=()=>{const[e,s,i]=cn();return t(Te,{title:n.detail,open:!0,onCancel:s,footer:null,width:"calc(100% - 20%)",zIndex:"2",children:i?t("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:t(Qe,{})}):t("div",{style:{height:"calc(100vh - 200px)"},children:t(Xe,{html:e,isUseIframe:!0})})})},tt=e=>{var i,o,l,a,h,g,u,m,y,b,_,S;let s=n.success;return e.errorMsg&&(s=Ft.includes(e.errorMsg)?n.unit_seen_no_email:n.server_mail_problem),{key:(i=e==null?void 0:e.unit)==null?void 0:i.id,id:(o=e==null?void 0:e.unit)==null?void 0:o.id,name:((l=e==null?void 0:e.unit)==null?void 0:l.name)??"",floorId:(a=e==null?void 0:e.unit)==null?void 0:a.floorId,floorName:((g=(h=e==null?void 0:e.unit)==null?void 0:h.floor)==null?void 0:g.name)??"",isRead:(e==null?void 0:e.isRead)??!1,isSentMail:(e==null?void 0:e.isSentMail)??!1,mailSendResult:s,appSendResult:(e==null?void 0:e.errorMsg)??"",totalMailSendFail:(e==null?void 0:e.numOfFailureMails)??0,totalMailSendSuccess:(e==null?void 0:e.numOfSuccessMails)??0,totalSent:(e==null?void 0:e.numOfSent)??0,totalAgree:((m=(u=e==null?void 0:e.polls)==null?void 0:u.filter(r=>r.question===ve))==null?void 0:m.length)??0,totalDisagree:((b=(y=e==null?void 0:e.polls)==null?void 0:y.filter(r=>r.question===Ne))==null?void 0:b.length)??0,totalOther:((S=(_=e==null?void 0:e.polls)==null?void 0:_.filter(r=>r.question===Ce))==null?void 0:S.length)??0}},Le=async({idBuilding:e,idAnnouncement:s,filter:i,page:o,limit:l})=>{try{const a=await qt({idBuilding:e,idAnnouncement:s,filter:{keyword:i==null?void 0:i.apartment},page:o,limit:l});return{code:a.code,codeLanguage:a.codeLanguage,data:a.data.map(h=>tt(h)),totalRecord:a.totalRecord}}catch(a){return{code:a.code,codeLanguage:a.codeLanguage,data:[],totalRecord:0}}},un=()=>{var c;const{modalViewAnnouncement:e,idBuilding:s,hideModalViewAnnouncement:i,setAnnouncementDetail:o,announcementDetail:l}=f.useContext(j),{data:a}=e,[h,g]=f.useState({isFetching:!1}),[u,m]=f.useState({current:I,limit:M}),[y,b]=f.useState({records:[],totalRecord:0});f.useEffect(()=>{(async()=>{g({isFetching:!0});const[A,v]=await Promise.all([Oe({idBuilding:s,idAnnouncement:a.id}),Le({idBuilding:s,idAnnouncement:a.id,limit:M,page:I})]);o((A==null?void 0:A.data)??{}),b({records:v.data,totalRecord:v.totalRecord}),g({isFetching:!1})})()},[]);const _=async(A,v)=>{let{current:w,limit:N}=u;w!==A&&(w=A),N!==v&&(N=v,w=I),g({isFetching:!0});const d=await Le({idBuilding:s,idAnnouncement:a.id,limit:N,page:w});m({current:w,limit:N}),b({records:d.data,totalRecord:d.totalRecord}),g({isFetching:!1})},S=A=>{Je.open({url:A.url})},r=h.isFetching,L={current:u.current,pageSize:u.limit,total:y.totalRecord,showQuickJumper:!0,showSizeChanger:!0,onChange:_},C=y.records,x=(c=l==null?void 0:l.attachments)==null?void 0:c.map((A,v)=>({uid:v,thumbUrl:A,url:A,name:A.substring(A.lastIndexOf("."),A.length),status:"done"}));return[l,x,y.totalRecord,C,r,L,i,S]};var mn={name:"1d3w5wq",styles:"width:100%"};const hn=()=>{var y,b;const[e,s,i,o,l,a,h,g]=un(),u=Ee(),m=[{title:n.floor,key:"floorName",dataIndex:"floorName",width:100},{title:n.unit,key:"name",dataIndex:"name",width:150}];return t(Te,{title:n.detail,open:!0,onCancel:h,footer:null,width:"calc(100% - 20%)",zIndex:"2",children:l?t("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:t(Qe,{})}):T(ue,{children:[t(ye,{children:(e==null?void 0:e.title)||"-"}),T(we,{style:{flex:1},gutter:[u.margin.lg,0],children:[t(z,{flex:"1 0 0",css:mn,children:t("div",{css:E({height:"100%",border:`1px solid ${u.borderColor}`,borderRadius:u.borderRadius},"",""),children:t(Xe,{html:(e==null?void 0:e.content)??"",isUseIframe:!0})})}),T(z,{children:[t(bt,{width:"270px",height:"270px",css:E({objectFit:"contain",borderRadius:u.borderRadius,border:`1px solid ${u.borderColor}`},"",""),src:e!=null&&e.thumbnail?e.thumbnail:Tt}),T("div",{css:E({marginTop:u.margin.md,marginBottom:u.margin.md},"",""),children:[t($,{checked:e==null?void 0:e.isSendEmail,children:n.send_to_mail}),t($,{checked:e==null?void 0:e.isSendApp,children:n.send_to_app})]}),T("div",{css:E({marginBottom:u.margin.md},"",""),children:[t($,{checked:e==null?void 0:e.iSendHouseHolder,children:n.householder}),t($,{checked:e==null?void 0:e.isSendResident,children:n.resident})]}),t("div",{css:E({marginBottom:u.margin.md},"",""),children:t($,{checked:e==null?void 0:e.isHavePoll,children:n.poll})}),((y=e==null?void 0:e.labels)==null?void 0:y.length)>0?T("div",{css:E({marginBottom:u.margin.md},"",""),children:[t(ye,{children:n.label1}),(b=e==null?void 0:e.labels)==null?void 0:b.map(({id:_,title:S})=>t("div",{css:E({marginBottom:u.margin.xs},"",""),children:t(je,{color:"blue",children:S})},_))]}):null]})]}),(s==null?void 0:s.length)>0?T("div",{css:E({marginTop:u.margin.xs,marginBottom:u.margin.xs},"",""),children:[t(ye,{css:E({marginBottom:u.margin.xs},"",""),children:n.attachments}),t(Ie,{onPreview:g,showUploadList:{showRemoveIcon:!1},listType:"picture-card",fileList:s,module:Ae})]}):null,T("div",{css:E({marginTop:u.margin.xs,marginBottom:u.margin.xs},"",""),children:[t("span",{css:E({fontWeight:u.fontWeight.normal,color:u.labelColor},"",""),children:n.total}),t("span",{css:E({fontWeight:u.fontWeight.bold,marginLeft:u.margin.xs},"",""),children:i})]}),t($e,{bordered:!0,columns:m,dataSource:o,loading:l,pagination:a})]})})},gn=async({idBuilding:e,idAnnouncement:s,filter:i,page:o,limit:l})=>{try{const a=await jt({idBuilding:e,idAnnouncement:s,filter:{keyword:i==null?void 0:i.apartment,emailStatus:i==null?void 0:i.status,isRead:!0},page:o,limit:l});return{code:a.code,codeLanguage:a.codeLanguage,data:a.data.map(h=>tt(h)),totalRecord:a.totalRecord}}catch(a){return{code:a.code,codeLanguage:a.codeLanguage,data:[],totalRecord:0}}},pn=(e,s,i)=>{try{const o=$t(e,s,i);return{code:o.code,codeLanguage:o.codeLanguage}}catch(o){return{code:o.code,codeLanguage:o.codeLanguage}}},pe=({limit:e,page:s,announcement:i,idBuilding:o,filter:l})=>i.isSendEmail?gn({idBuilding:o,idAnnouncement:i.id,limit:e,page:s,filter:l}):Le({idBuilding:o,idAnnouncement:i.id,limit:e,page:s,filter:l}),fn=()=>{const{modalStatisticsAnnouncement:e,idBuilding:s,hideModalStatisticsAnnouncement:i}=f.useContext(j),{data:o}=e,[l,a]=f.useState({isFetching:!1}),[h,g]=f.useState({isFetching:!1,code:void 0,codeLanguage:void 0}),[u,m]=f.useState({...xe}),[y,b]=f.useState({current:I,limit:M}),[_,S]=f.useState({records:[],totalRecord:0});Fe(h.code,h.codeLanguage,{message:n.success,description:n.resend_email_success}),f.useEffect(()=>{(async()=>{a({isFetching:!0});const w=await pe({announcement:o,idBuilding:s,limit:M,page:I,filter:{...xe}});S({records:w.data,totalRecord:w.totalRecord}),a({isFetching:!1})})()},[]);const r=async(w,N)=>{let{current:d,limit:Y}=y;d!==w&&(d=w),Y!==N&&(Y=N,d=I),a({isFetching:!0});const Q=await pe({announcement:o,idBuilding:s,limit:Y,page:w,filter:u});b({current:d,limit:Y}),S({records:Q.data,totalRecord:Q.totalRecord}),a({isFetching:!1})},L=async w=>{g({isFetching:!0,code:void 0,codeLanguage:void 0});const N=await pn(s,o.id,(w==null?void 0:w.id)??"");g({isFetching:!1,code:N.code,codeLanguage:N.codeLanguage}),a({isFetching:!0});const d=await pe({announcement:o,idBuilding:s,limit:y.limit,page:y.current,filter:{...u}});S({records:d.data,totalRecord:d.totalRecord}),a({isFetching:!1})},C=async w=>{m({...w}),a({isFetching:!0});const N=await pe({announcement:o,idBuilding:s,filter:{...w},limit:M,page:I});b({current:I,limit:M}),S({records:N.data,totalRecord:N.totalRecord}),a({isFetching:!1})},x=l.isFetching,c=h.isFetching,A={current:y.current,pageSize:y.limit,total:_.totalRecord,showQuickJumper:!0,showSizeChanger:!0,onChange:r},v=_.records;return[o,_.totalRecord,x,c,A,v,L,i,C]},Sn=()=>{const[e,s,i,o,l,a,h,g,u]=fn(),m=[{title:n.floor,key:"floorName",dataIndex:"floorName",width:100},{title:n.unit,key:"name",dataIndex:"name"},e.isSendEmail?{title:n.send_to_mail,key:"mailSendResult",dataIndex:"mailSendResult",width:200}:null,e.isSendApp?{title:n.seen,key:"isRead",dataIndex:"isRead",width:60,align:"center",render:(_,S)=>S.isRead?t(F,{name:"icon-check-outlined"}):null}:null,e.isSendEmail?{title:n.resend,key:"",dataIndex:"",width:60,align:"center",render:(_,S)=>S.totalMailSendFail?t(F,{name:"icon-sync2-outlined",onClick:()=>h(S)}):null}:null].filter(Boolean),y=f.useMemo(()=>[{label:n.unit,key:"apartment",component:t(_e,{placeholder:n.unit,fluid:!0}),visible:!0},{label:n.status1,key:"status",component:T(W,{placeholder:n.status1,fluid:!0,children:[t(W.Option,{value:"",children:n.all_status},"status_0"),Mt.map(({value:_,label:S})=>t(W.Option,{value:_,children:S},_))]}),visible:!0}],[]),b=[t(Me,{type:"primary",icon:t(F,{name:"icon-sync2-outlined"}),onClick:h,loading:o,children:n.resend},"resend")];return T(Te,{title:n.unit,open:!0,onCancel:g,footer:null,width:"calc(100% - 20%)",zIndex:"2",children:[t(D.FilterBox,{defaultFilter:xe,filters:y,onSearch:u}),T(D.Container,{children:[t(D.Header,{children:t(D.ActionBox,{actions:b,total:s})}),t(D.Content,{children:t(D.Table,{bordered:!0,columns:m,dataSource:a,loading:i,pagination:l})})]})]})},An=e=>{var s,i;return{id:e==null?void 0:e.id,key:e==null?void 0:e.id,name:(e==null?void 0:e.name)??"",floorId:(s=e==null?void 0:e.floor)==null?void 0:s.id,floorName:((i=e==null?void 0:e.floor)==null?void 0:i.name)??""}},fe=async({idBuilding:e,filter:s,page:i,limit:o})=>{try{const{floors:l,apartment:a}=s,h=await yt({idBuilding:e,filter:{floorIds:l||[],name:a||void 0},page:i,limit:o});return{code:h.code,codeLanguage:h.codeLanguage,data:h.data.map(g=>An(g)),totalRecord:h.totalRecord}}catch(l){return{code:l.code,codeLanguage:l.codeLanguage,data:[],totalRecord:0}}},_n=async(e,s)=>{var i,o,l,a,h;try{const{title:g,content:u,sendToMail:m,sendToApp:y,sendToResident:b,labels:_,thumbnail:S,attachments:r,apartments:L,filter:C,isAll:x,isHavePoll:c}=s,A=await Gt(e,{announcementType:c,attachFiles:r.map(v=>{var w,N;return((N=(w=v==null?void 0:v.response)==null?void 0:w.data)==null?void 0:N.url)||(v==null?void 0:v.url)||null}).filter(Boolean),content:u,labelIds:_,receiver:b?Ze:Rt,sendTypes:[m?be:null,y?Ke:null].filter(Boolean),thumbnail:((l=(o=(i=S==null?void 0:S[0])==null?void 0:i.response)==null?void 0:o.data)==null?void 0:l.url)||((a=S==null?void 0:S[0])==null?void 0:a.url)||void 0,title:g,unitIds:L,filterValue:{floorIds:!C.floors||!C.floors.length?void 0:C.floors,name:C.apartment||void 0},isAll:x,floorIds:[]});return{code:A.code,codeLanguage:A.codeLanguage}}catch(g){return{code:g.code,codeLanguage:g.codeLanguage,capacityDiff:(h=g==null?void 0:g.data)==null?void 0:h.capacityDiff}}},En=()=>{const{idBuilding:e,hideModalSendAnnouncement:s,setGetListAnnouncementStatus:i,setTableData:o,setFilter:l,setTablePagination:a,formFilter:h,modalSendAnnouncement:g}=f.useContext(j),{setVisibleFilterBox:u}=f.useContext(Re),{labelData:m}=Ge(),{floors:y,getFloors:b}=Lt(),{data:_}=g,[S,r]=f.useState({isFetching:!1}),[L,C]=f.useState({isFetching:!1,code:void 0,codeLanguage:void 0}),[x,c]=f.useState({...Se}),[A,v]=f.useState({current:I,limit:M}),[w,N]=f.useState({records:[],totalRecord:0}),[d,Y]=f.useState({}),[Q,,ie,oe,se]=Ct({dataRows:w.records,rowKey:"id",totalRows:w.totalRecord}),{isSelectAllItem:k,selectedRowKeysCache:H,selectedRowKeys:V}=Q,[G]=P.useForm();Fe(L.code,L.codeLanguage,{message:n.success,description:n.send_announcement_success},()=>{s()}),f.useEffect(()=>(u(!0),(async()=>{var U,O,R,B,ae,Ue,Pe,De,Ve,Be,ze;if(r({isFetching:!0}),_!=null&&_.id){const[le,p]=await Promise.all([fe({idBuilding:e,filter:{...Se},limit:M,page:I}),Oe({idBuilding:e,idAnnouncement:_.id})]);Y((p==null?void 0:p.data)??{}),G.setFieldsValue({title:((U=p==null?void 0:p.data)==null?void 0:U.title)??"",content:((O=p==null?void 0:p.data)==null?void 0:O.content)??"<p></p>",thumbnail:p!=null&&p.data&&(p!=null&&p.data.thumbnail)?[{uid:0,thumbUrl:p==null?void 0:p.data.thumbnail,url:p==null?void 0:p.data.thumbnail,status:"done"}]:[],sendToMail:((R=p==null?void 0:p.data)==null?void 0:R.isSendEmail)??!1,sendToApp:((B=p==null?void 0:p.data)==null?void 0:B.isSendApp)??!0,sendToHouseholder:((ae=p==null?void 0:p.data)==null?void 0:ae.iSendHouseHolder)??!0,sendToResident:((Ue=p==null?void 0:p.data)==null?void 0:Ue.isSendResident)??!1,isHavePoll:((Pe=p==null?void 0:p.data)==null?void 0:Pe.isHavePoll)??!1,labels:(Ve=(De=p==null?void 0:p.data)==null?void 0:De.labels)==null?void 0:Ve.map(re=>re.id),attachments:((ze=(Be=p==null?void 0:p.data)==null?void 0:Be.attachments)==null?void 0:ze.map((re,ut)=>({uid:ut,thumbUrl:re,url:re,name:re,status:"done"})))??[]}),N({records:le.data,totalRecord:le.totalRecord})}if(!(_!=null&&_.id)){const le=await fe({idBuilding:e,filter:{...Se},limit:M,page:I});N({records:le.data,totalRecord:le.totalRecord})}r({isFetching:!1})})(),(async()=>await b({idBuilding:e}))(),()=>{u(!1)}),[]);const ge=async(U,O)=>{let{current:R,limit:B}=A;R!==U&&(R=U),B!==O&&(B=O,R=I),r({isFetching:!0});const ae=await fe({filter:{...x},idBuilding:e,limit:B,page:R});v({current:R,limit:B}),N({records:ae.data,totalRecord:ae.totalRecord}),r({isFetching:!1})},nt=async U=>{r({isFetching:!0}),c({...U}),v({current:I,limit:M});const O=await fe({idBuilding:e,filter:{...U},limit:M,page:I});N({records:O.data,totalRecord:O.totalRecord}),r({isFetching:!1})},it=U=>{Je.open({url:U.url})},ot=async()=>{if(!await G.validateFields())de.error({message:n.error1,description:n.data_invalid});else if(H.length===0&&!k)de.error({message:n.error1,description:n.have_not_selected_apartment_yet});else{const O=G.getFieldsValue();if(!O.sendToMail&&!O.sendToApp)de.error({message:n.error1,description:n.have_not_selected_platform_send_announcement});else if(!O.sendToHouseholder&&!O.sendToResident)de.error({message:n.error1,description:n.have_not_selected_target_send_announcement});else{C({isFetching:!0,code:void 0,codeLanguage:void 0});const R=await _n(e,{...G.getFieldsValue(),apartments:H,isAll:k,filter:x});if((R==null?void 0:R.codeLanguage)===kt){de.error({message:n.error1,description:n.the_message_after_encryption_has_exceeded_the_capacity_limit_please_reduce_the_size_of_attachments}),C({isFetching:!1,code:void 0,codeLanguage:void 0});return}if(qe.includes(R.code)){i({isFetching:!0}),l({...ne}),h.resetFields(),a({current:I,limit:M});const B=await he({filter:{...ne},idBuilding:e,limit:M,page:I});o({records:B.data,totalRecord:B.totalRecord}),i({isFetching:!1})}C({isFetching:!1,code:R.code,codeLanguage:R.codeLanguage})}}},st=S.isFetching,at=L.isFetching,lt={current:A.current,pageSize:A.limit,total:w.totalRecord,showQuickJumper:!0,showSizeChanger:!0,onChange:ge},rt={selectedRowKeys:V,onSelect:ie,onSelectAll:oe},ct=w.records,dt=f.useMemo(()=>{var U,O;return{title:(d==null?void 0:d.title)??"",content:(d==null?void 0:d.content)??"",thumbnail:d&&d.thumbnail?[{uid:0,thumbUrl:d.thumbnail,url:d.thumbnail,status:"done"}]:[],sendToMail:(d==null?void 0:d.isSendEmail)??!1,sendToApp:(d==null?void 0:d.isSendApp)??!0,sendToHouseholder:(d==null?void 0:d.iSendHouseHolder)??!0,sendToResident:(d==null?void 0:d.isSendResident)??!1,isHavePoll:(d==null?void 0:d.isHavePoll)??!1,labels:(U=d==null?void 0:d.labels)==null?void 0:U.map(R=>R.id),attachments:((O=d==null?void 0:d.attachments)==null?void 0:O.map((R,B)=>({uid:B,thumbUrl:R,url:R,name:R,status:"done"})))??[]}},[d]);return[st,at,G,dt,m,y,rt,lt,ct,se,ot,s,it,nt,_==null?void 0:_.isCopy]},Tn=mt(Ie,{target:"e13ztn1u0"})({name:"igtiwn",styles:"width:100%;height:274px;& .ant-upload-select-picture-card,.ant-upload-list-picture-card-container,.ant-upload-list-item{width:100%;height:274px;}"});var yn={name:"1iwxa4p",styles:"height:100%;width:100%;display:flex;flex-direction:column;vertical-align:center;justify-content:center"};const wn=()=>T("div",{css:yn,children:[t(F,{name:"icon-plus-circle-outlined",css:e=>({fontSize:e.iconSize})}),t("div",{css:e=>({marginTop:e.margin.xs}),children:n.upload})]});var xn={name:"1kevbid",styles:"& .ant-upload{width:100%;}"},bn={name:"14ximr4",styles:"& .ant-modal-content{display:flex;flex-direction:column;height:calc(100vh - 150px);}"},vn={name:"1d3w5wq",styles:"width:100%"},Nn={name:"rofmx9",styles:"width:400px;height:400px"};const Cn=()=>{const[e,s,i,o,l,a,h,g,u,m,y,b,_,S]=En(),r=Ee(),L=c=>Array.isArray(c)?c:c&&c.fileList,C=[{title:n.floor,key:"floorName",dataIndex:"floorName",width:100},{title:n.unit,key:"name",dataIndex:"name"}],x=f.useMemo(()=>[{label:n.floor,key:"floors",component:t(W,{maxTagCount:"responsive",fluid:"true",placeholder:n.floor,mode:"multiple",filterOption:(c,A)=>He(A.children).indexOf(He(c))>=0,getPopupContainer:c=>c.parentNode,children:a.map(c=>t(W.Option,{value:c.id,children:c.name},c.id))}),visible:!0},{label:n.unit,key:"apartment",component:t(_e,{fluid:"true",placeholder:n.unit}),visible:!0}],[a]);return T(Te,{title:n.send_announcement,open:!0,onOk:y,okText:n.send,onCancel:b,cancelText:n.cancel,width:"calc(100% - 5%)",zIndex:"2",okButtonProps:{disabled:s,loading:s},css:bn,bodyStyle:{flex:1,overflowY:"auto"},children:[T(P,{initialValues:o,layout:"vertical",form:i,name:"form_send_announcement",children:[t(P.Item,{rules:[{required:!0}],name:"title",label:n.title,children:t(_e,{placeholder:n.title,fluid:"true"})}),T(we,{style:{flex:1},gutter:[r.margin.lg,0],children:[t(z,{flex:"1 0 0",css:vn,children:t(P.Item,{name:"content",label:n.content,rules:[{required:!0},{validator:async(c,A)=>A==="<p></p>"?Promise.reject(n.data_require):Promise.resolve()}],children:t(Nt,{height:"700",placeholder:n.content,initialContent:o==null?void 0:o.content})})}),T(z,{css:Nn,children:[t(P.Item,{shouldUpdate:(c,A)=>c!==A,noStyle:!0,children:({getFieldValue:c})=>{var A;return t(P.Item,{name:"thumbnail",label:n.thumbnail,valuePropName:"fileList",getValueFromEvent:L,children:t(Tn,{maxCount:"1",onPreview:_,listType:"picture-card",accept:"image/*",module:Ae,children:((A=c("thumbnail"))==null?void 0:A.length)>0?null:t(wn,{})})})}}),T(we,{css:E({marginTop:r.margin.md,marginBottom:r.margin.md},"",""),gutter:[0,r.margin.xs],children:[t(z,{span:"12",children:t(P.Item,{noStyle:!0,name:"sendToApp",valuePropName:"checked",children:t($,{children:n.send_to_app})})}),t(z,{span:"12",children:t(P.Item,{noStyle:!0,name:"sendToMail",valuePropName:"checked",children:t($,{children:n.send_to_mail})})}),t(z,{span:"12",children:t(P.Item,{noStyle:!0,name:"sendToHouseholder",valuePropName:"checked",children:t($,{children:n.householder})})}),t(z,{span:"12",children:t(P.Item,{noStyle:!0,name:"sendToResident",valuePropName:"checked",children:t($,{children:n.resident})})}),t(z,{span:"12",children:t(P.Item,{noStyle:!0,name:"isHavePoll",valuePropName:"checked",children:t($,{children:n.poll})})}),t(z,{span:"24",children:t(P.Item,{name:"labels",label:n.label1,children:t(W,{maxTagCount:"responsive",fluid:"true",mode:"multiple",placeholder:n.label1,children:l.map(c=>t(W.Option,{value:c.id,children:c.title},c.id))})})}),t(z,{span:"24",children:t(P.Item,{name:"attachments",valuePropName:"fileList",getValueFromEvent:L,children:t(Ie,{multiple:!0,maxCount:"10",css:xn,onPreview:_,limitSizeFile:It,module:Ae,children:t(Me,{icon:t(F,{name:"icon-attachment-outlined",css:E({fontsize:r.iconSize},"","")}),type:"primary",ghost:!0,block:!0,size:"large",children:n.attachments})})})}),t(z,{span:"24",children:t(vt,{message:n.the_total_size_of_attached_files_must_not_exceed_7MB,type:"warning",showIcon:!0,closable:!0})})]})]})]})]}),t(D.FilterBox,{defaultFilter:Se,filters:x,onSearch:S,size:"small"}),T("div",{css:E({marginTop:r.margin.xs,marginBottom:r.margin.xs,display:"flex"},"",""),children:[t("span",{css:E({fontWeight:r.fontWeight.normal,color:r.labelColor},"",""),children:n.total}),t("span",{css:E({fontWeight:r.fontWeight.bold,marginLeft:r.margin.xs},"",""),children:m()})]}),t($e,{bordered:!0,columns:C,dataSource:u,loading:e,pagination:g,rowSelection:h})]})},Ln=()=>{const{setTitlePage:e,setVisibleFilterBox:s,setVisibleSearchBox:i}=f.useContext(Re),{idBuilding:o,setTableData:l,setGetListAnnouncementStatus:a,modalSendAnnouncement:h,modalViewAnnouncement:g,modalViewAnnouncementContent:u,modalStatisticsAnnouncement:m}=f.useContext(j);return f.useEffect(()=>(e(n.announcement),i(!0),(async()=>{a({isFetching:!0});const y=await he({filter:{...ne},idBuilding:o,limit:M,page:I});l({records:y.data,totalRecord:y.totalRecord}),a({isFetching:!1})})(),()=>{e(""),i(!1),s(!1)}),[]),[h,g.isShow,u.isShow,m.isShow]},In=()=>{const[e,s,i,o]=Ln();return T(D.Wrapper,{children:[t(Jt,{}),T(D.Container,{children:[t(D.Header,{children:t(Zt,{})}),t(D.Content,{children:t(rn,{})})]}),i?t(dn,{}):null,s?t(hn,{}):null,o?t(Sn,{}):null,e.isShow?t(Cn,{}):null]})},fo=()=>t(Ot,{children:t(In,{})});export{fo as default};
