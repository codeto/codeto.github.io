import{r as t}from"./react-4fd50329.js";import{L as at,h as rt,z as ln,K as y,w as it,F as ut,b as lt,i as pn,a as ct,c as st,t as dt,d as ft,o as vt}from"./rc-util-0bc219f3.js";import{c as He}from"./classnames-4ba1ba1a.js";import{c as oe,a as Q,_ as bn,d as te,e as Ue,b as Je,m as mt,f as De}from"./@babel-b64fd0f9.js";import{F as pt}from"./rc-overflow-6be96612.js";import{T as gt}from"./rc-trigger-570b13ec.js";import{L as ht}from"./rc-virtual-list-8a7b82a6.js";var An=t.createContext(null);function bt(){return t.useContext(An)}function St(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),a=oe(e,2),o=a[0],i=a[1],r=t.useRef(null),l=function(){window.clearTimeout(r.current)};t.useEffect(function(){return l},[]);var m=function(h,S){l(),r.current=window.setTimeout(function(){i(h),S&&S()},n)};return[o,m,l]}function Fn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),a=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(a.current)}},[]);function o(i){(i||e.current===null)&&(e.current=i),window.clearTimeout(a.current),a.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},o]}function wt(n,e,a,o){var i=t.useRef(null);i.current={open:e,triggerOpen:a,customizedTrigger:o},t.useEffect(function(){function r(l){var m;if(!((m=i.current)!==null&&m!==void 0&&m.customizedTrigger)){var c=l.target;c.shadowRoot&&l.composed&&(c=l.composedPath()[0]||c),i.current.open&&n().filter(function(h){return h}).every(function(h){return!h.contains(c)&&h!==c})&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",r),function(){return window.removeEventListener("mousedown",r)}},[])}var cn=function(e){var a=e.className,o=e.customizeIcon,i=e.customizeIconProps,r=e.onMouseDown,l=e.onClick,m=e.children,c;return typeof o=="function"?c=o(i):c=o,t.createElement("span",{className:a,onMouseDown:function(S){S.preventDefault(),r&&r(S)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:l,"aria-hidden":!0},c!==void 0?c:t.createElement("span",{className:He(a.split(/\s+/).map(function(h){return"".concat(h,"-icon")}))},m))},Ct=function(e,a){var o,i,r=e.prefixCls,l=e.id,m=e.inputElement,c=e.disabled,h=e.tabIndex,S=e.autoFocus,u=e.autoComplete,p=e.editable,s=e.activeDescendantId,w=e.value,N=e.maxLength,U=e.onKeyDown,M=e.onMouseDown,_=e.onChange,F=e.onPaste,q=e.onCompositionStart,Y=e.onCompositionEnd,j=e.open,le=e.attrs,V=m||t.createElement("input",null),K=V,G=K.ref,H=K.props,X=H.onKeyDown,$=H.onChange,Z=H.onMouseDown,J=H.onCompositionStart,R=H.onCompositionEnd,x=H.style;return at(!("maxLength"in V.props)),V=t.cloneElement(V,Q(Q(Q({type:"search"},H),{},{id:l,ref:rt(a,G),disabled:c,tabIndex:h,autoComplete:u||"off",autoFocus:S,className:He("".concat(r,"-selection-search-input"),(o=V)===null||o===void 0||(i=o.props)===null||i===void 0?void 0:i.className),role:"combobox","aria-expanded":j,"aria-haspopup":"listbox","aria-owns":"".concat(l,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(l,"_list"),"aria-activedescendant":s},le),{},{value:p?w:"",maxLength:N,readOnly:!p,unselectable:p?null:"on",style:Q(Q({},x),{},{opacity:p?null:0}),onKeyDown:function(P){U(P),X&&X(P)},onMouseDown:function(P){M(P),Z&&Z(P)},onChange:function(P){_(P),$&&$(P)},onCompositionStart:function(P){q(P),J&&J(P)},onCompositionEnd:function(P){Y(P),R&&R(P)},onPaste:F})),V},Sn=t.forwardRef(Ct);Sn.displayName="Input";function Ln(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var yt=typeof window<"u"&&window.document&&window.document.documentElement,It=yt;function Et(n){return n!=null}function xn(n){return["string","number"].includes(bn(n))}function kn(n){var e=void 0;return n&&(xn(n.title)?e=n.title.toString():xn(n.label)&&(e=n.label.toString())),e}function Dt(n,e){It?t.useLayoutEffect(n,e):t.useEffect(n,e)}function Rt(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var Pn=function(e){e.preventDefault(),e.stopPropagation()},Ot=function(e){var a=e.id,o=e.prefixCls,i=e.values,r=e.open,l=e.searchValue,m=e.autoClearSearchValue,c=e.inputRef,h=e.placeholder,S=e.disabled,u=e.mode,p=e.showSearch,s=e.autoFocus,w=e.autoComplete,N=e.activeDescendantId,U=e.tabIndex,M=e.removeIcon,_=e.maxTagCount,F=e.maxTagTextLength,q=e.maxTagPlaceholder,Y=q===void 0?function(B){return"+ ".concat(B.length," ...")}:q,j=e.tagRender,le=e.onToggleOpen,V=e.onRemove,K=e.onInputChange,G=e.onInputPaste,H=e.onInputKeyDown,X=e.onInputMouseDown,$=e.onInputCompositionStart,Z=e.onInputCompositionEnd,J=t.useRef(null),R=t.useState(0),x=oe(R,2),O=x[0],P=x[1],me=t.useState(!1),ce=oe(me,2),Le=ce[0],ee=ce[1],E="".concat(o,"-selection"),f=r||u==="multiple"&&m===!1||u==="tags"?l:"",D=u==="tags"||u==="multiple"&&m===!1||p&&(r||Le);Dt(function(){P(J.current.scrollWidth)},[f]);function L(B,ue,re,pe,ge){return t.createElement("span",{className:He("".concat(E,"-item"),te({},"".concat(E,"-item-disabled"),re)),title:kn(B)},t.createElement("span",{className:"".concat(E,"-item-content")},ue),pe&&t.createElement(cn,{className:"".concat(E,"-item-remove"),onMouseDown:Pn,onClick:ge,customizeIcon:M},"×"))}function T(B,ue,re,pe,ge){var Ce=function(k){Pn(k),le(!r)};return t.createElement("span",{onMouseDown:Ce},j({label:ue,value:B,disabled:re,closable:pe,onClose:ge}))}function A(B){var ue=B.disabled,re=B.label,pe=B.value,ge=!S&&!ue,Ce=re;if(typeof F=="number"&&(typeof re=="string"||typeof re=="number")){var de=String(Ce);de.length>F&&(Ce="".concat(de.slice(0,F),"..."))}var k=function(Se){Se&&Se.stopPropagation(),V(B)};return typeof j=="function"?T(pe,Ce,ue,ge,k):L(B,Ce,ue,ge,k)}function ae(B){var ue=typeof Y=="function"?Y(B):Y;return L({title:ue},ue,!1)}var se=t.createElement("div",{className:"".concat(E,"-search"),style:{width:O},onFocus:function(){ee(!0)},onBlur:function(){ee(!1)}},t.createElement(Sn,{ref:c,open:r,prefixCls:o,id:a,inputElement:null,disabled:S,autoFocus:s,autoComplete:w,editable:D,activeDescendantId:N,value:f,onKeyDown:H,onMouseDown:X,onChange:K,onPaste:G,onCompositionStart:$,onCompositionEnd:Z,tabIndex:U,attrs:ln(e,!0)}),t.createElement("span",{ref:J,className:"".concat(E,"-search-mirror"),"aria-hidden":!0},f," ")),Re=t.createElement(pt,{prefixCls:"".concat(E,"-overflow"),data:i,renderItem:A,renderRest:ae,suffix:se,itemKey:Rt,maxCount:_});return t.createElement(t.Fragment,null,Re,!i.length&&!f&&t.createElement("span",{className:"".concat(E,"-placeholder")},h))},Mt=function(e){var a=e.inputElement,o=e.prefixCls,i=e.id,r=e.inputRef,l=e.disabled,m=e.autoFocus,c=e.autoComplete,h=e.activeDescendantId,S=e.mode,u=e.open,p=e.values,s=e.placeholder,w=e.tabIndex,N=e.showSearch,U=e.searchValue,M=e.activeValue,_=e.maxLength,F=e.onInputKeyDown,q=e.onInputMouseDown,Y=e.onInputChange,j=e.onInputPaste,le=e.onInputCompositionStart,V=e.onInputCompositionEnd,K=t.useState(!1),G=oe(K,2),H=G[0],X=G[1],$=S==="combobox",Z=$||N,J=p[0],R=U||"";$&&M&&!H&&(R=M),t.useEffect(function(){$&&X(!1)},[$,M]);var x=S!=="combobox"&&!u&&!N?!1:!!R,O=kn(J),P=function(){if(J)return null;var ce=x?{visibility:"hidden"}:void 0;return t.createElement("span",{className:"".concat(o,"-selection-placeholder"),style:ce},s)};return t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(o,"-selection-search")},t.createElement(Sn,{ref:r,prefixCls:o,id:i,open:u,inputElement:a,disabled:l,autoFocus:m,autoComplete:c,editable:Z,activeDescendantId:h,value:R,onKeyDown:F,onMouseDown:q,onChange:function(ce){X(!0),Y(ce)},onPaste:j,onCompositionStart:le,onCompositionEnd:V,tabIndex:w,attrs:ln(e,!0),maxLength:$?_:void 0})),!$&&J?t.createElement("span",{className:"".concat(o,"-selection-item"),title:O,style:x?{visibility:"hidden"}:void 0},J.label):null,P())};function xt(n){return![y.ESC,y.SHIFT,y.BACKSPACE,y.TAB,y.WIN_KEY,y.ALT,y.META,y.WIN_KEY_RIGHT,y.CTRL,y.SEMICOLON,y.EQUALS,y.CAPS_LOCK,y.CONTEXT_MENU,y.F1,y.F2,y.F3,y.F4,y.F5,y.F6,y.F7,y.F8,y.F9,y.F10,y.F11,y.F12].includes(n)}var Pt=function(e,a){var o=t.useRef(null),i=t.useRef(!1),r=e.prefixCls,l=e.open,m=e.mode,c=e.showSearch,h=e.tokenWithEnter,S=e.autoClearSearchValue,u=e.onSearch,p=e.onSearchSubmit,s=e.onToggleOpen,w=e.onInputKeyDown,N=e.domRef;t.useImperativeHandle(a,function(){return{focus:function(){o.current.focus()},blur:function(){o.current.blur()}}});var U=Fn(0),M=oe(U,2),_=M[0],F=M[1],q=function(x){var O=x.which;(O===y.UP||O===y.DOWN)&&x.preventDefault(),w&&w(x),O===y.ENTER&&m==="tags"&&!i.current&&!l&&(p==null||p(x.target.value)),xt(O)&&s(!0)},Y=function(){F(!0)},j=t.useRef(null),le=function(x){u(x,!0,i.current)!==!1&&s(!0)},V=function(){i.current=!0},K=function(x){i.current=!1,m!=="combobox"&&le(x.target.value)},G=function(x){var O=x.target.value;if(h&&j.current&&/[\r\n]/.test(j.current)){var P=j.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");O=O.replace(P,j.current)}j.current=null,le(O)},H=function(x){var O=x.clipboardData,P=O.getData("text");j.current=P},X=function(x){var O=x.target;if(O!==o.current){var P=document.body.style.msTouchAction!==void 0;P?setTimeout(function(){o.current.focus()}):o.current.focus()}},$=function(x){var O=_();x.target!==o.current&&!O&&m!=="combobox"&&x.preventDefault(),(m!=="combobox"&&(!c||!O)||!l)&&(l&&S!==!1&&u("",!0,!1),s())},Z={inputRef:o,onInputKeyDown:q,onInputMouseDown:Y,onInputChange:G,onInputPaste:H,onInputCompositionStart:V,onInputCompositionEnd:K},J=m==="multiple"||m==="tags"?t.createElement(Ot,Ue({},e,Z)):t.createElement(Mt,Ue({},e,Z));return t.createElement("div",{ref:N,className:"".concat(r,"-selector"),onClick:X,onMouseDown:$},J)},Kn=t.forwardRef(Pt);Kn.displayName="Selector";var Nt=["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Vt=function(e){var a=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:a,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:a,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:a,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:a,adjustY:1}}}},Tt=function(e,a){var o=e.prefixCls;e.disabled;var i=e.visible,r=e.children,l=e.popupElement,m=e.containerWidth,c=e.animation,h=e.transitionName,S=e.dropdownStyle,u=e.dropdownClassName,p=e.direction,s=p===void 0?"ltr":p,w=e.placement,N=e.dropdownMatchSelectWidth,U=e.dropdownRender,M=e.dropdownAlign,_=e.getPopupContainer,F=e.empty,q=e.getTriggerDOMNode,Y=e.onPopupVisibleChange,j=e.onPopupMouseEnter,le=Je(e,Nt),V="".concat(o,"-dropdown"),K=l;U&&(K=U(l));var G=t.useMemo(function(){return Vt(N)},[N]),H=c?"".concat(V,"-").concat(c):h,X=t.useRef(null);t.useImperativeHandle(a,function(){return{getPopupElement:function(){return X.current}}});var $=Q({minWidth:m},S);return typeof N=="number"?$.width=N:N&&($.width=m),t.createElement(gt,Ue({},le,{showAction:Y?["click"]:[],hideAction:Y?["click"]:[],popupPlacement:w||(s==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:G,prefixCls:V,popupTransitionName:H,popup:t.createElement("div",{ref:X,onMouseEnter:j},K),popupAlign:M,popupVisible:i,getPopupContainer:_,popupClassName:He(u,te({},"".concat(V,"-empty"),F)),popupStyle:$,getTriggerDOMNode:q,onPopupVisibleChange:Y}),r)},$n=t.forwardRef(Tt);$n.displayName="SelectTrigger";function Nn(n,e){var a=n.key,o;return"value"in n&&(o=n.value),a??(o!==void 0?o:"rc-index-key-".concat(e))}function Wn(n,e){var a=n||{},o=a.label,i=a.value,r=a.options;return{label:o||(e?"children":"label"),value:i||"value",options:r||"options"}}function _t(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.fieldNames,o=e.childrenAsData,i=[],r=Wn(a,!1),l=r.label,m=r.value,c=r.options;function h(S,u){S.forEach(function(p){var s=p[l];if(u||!(c in p)){var w=p[m];i.push({key:Nn(p,i.length),groupOption:u,data:p,label:s,value:w})}else{var N=s;N===void 0&&o&&(N=p.label),i.push({key:Nn(p,i.length),group:!0,data:p,label:N}),h(p[c],!0)}})}return h(n,!1),i}function gn(n){var e=Q({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return it(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}function At(n,e){if(!e||!e.length)return null;var a=!1;function o(r,l){var m=mt(l),c=m[0],h=m.slice(1);if(!c)return[r];var S=r.split(c);return a=a||S.length>1,S.reduce(function(u,p){return[].concat(De(u),De(o(p,h)))},[]).filter(function(u){return u})}var i=o(n,e);return a?i:null}var Ft=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","showArrow","inputIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Lt=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function hn(n){return n==="tags"||n==="multiple"}var kt=t.forwardRef(function(n,e){var a,o,i=n.id,r=n.prefixCls,l=n.className,m=n.showSearch,c=n.tagRender,h=n.direction,S=n.omitDomProps,u=n.displayValues,p=n.onDisplayValuesChange,s=n.emptyOptions,w=n.notFoundContent,N=w===void 0?"Not Found":w,U=n.onClear,M=n.mode,_=n.disabled,F=n.loading,q=n.getInputElement,Y=n.getRawInputElement,j=n.open,le=n.defaultOpen,V=n.onDropdownVisibleChange,K=n.activeValue,G=n.onActiveValueChange,H=n.activeDescendantId,X=n.searchValue,$=n.autoClearSearchValue,Z=n.onSearch,J=n.onSearchSplit,R=n.tokenSeparators,x=n.allowClear,O=n.showArrow,P=n.inputIcon,me=n.clearIcon,ce=n.OptionList,Le=n.animation,ee=n.transitionName,E=n.dropdownStyle,f=n.dropdownClassName,D=n.dropdownMatchSelectWidth,L=n.dropdownRender,T=n.dropdownAlign,A=n.placement,ae=n.getPopupContainer,se=n.showAction,Re=se===void 0?[]:se,B=n.onFocus,ue=n.onBlur,re=n.onKeyUp,pe=n.onKeyDown,ge=n.onMouseDown,Ce=Je(n,Ft),de=hn(M),k=(m!==void 0?m:de)||M==="combobox",he=Q({},Ce);Lt.forEach(function(C){delete he[C]}),S==null||S.forEach(function(C){delete he[C]});var Se=t.useState(!1),Te=oe(Se,2),Me=Te[0],Qe=Te[1];t.useEffect(function(){Qe(ut())},[]);var ye=t.useRef(null),xe=t.useRef(null),ke=t.useRef(null),_e=t.useRef(null),Ie=t.useRef(null),sn=St(),Xe=oe(sn,3),qe=Xe[0],Ke=Xe[1],dn=Xe[2];t.useImperativeHandle(e,function(){var C,g;return{focus:(C=_e.current)===null||C===void 0?void 0:C.focus,blur:(g=_e.current)===null||g===void 0?void 0:g.blur,scrollTo:function(be){var ne;return(ne=Ie.current)===null||ne===void 0?void 0:ne.scrollTo(be)}}});var Ee=t.useMemo(function(){var C;if(M!=="combobox")return X;var g=(C=u[0])===null||C===void 0?void 0:C.value;return typeof g=="string"||typeof g=="number"?String(g):""},[X,M,u]),on=M==="combobox"&&typeof q=="function"&&q()||null,Pe=typeof Y=="function"&&Y(),an=lt(xe,Pe==null||(a=Pe.props)===null||a===void 0?void 0:a.ref),rn=pn(void 0,{defaultValue:le,value:j}),je=oe(rn,2),Ze=je[0],en=je[1],ie=Ze,un=!N&&s;(_||un&&ie&&M==="combobox")&&(ie=!1);var $e=un?!1:ie,d=t.useCallback(function(C){var g=C!==void 0?C:!ie;_||(en(g),ie!==g&&(V==null||V(g)))},[_,ie,en,V]),b=t.useMemo(function(){return(R||[]).some(function(C){return[`
`,`\r
`].includes(C)})},[R]),v=function(g,ve,be){var ne=!0,we=g;G==null||G(null);var Oe=be?null:At(g,R);return M!=="combobox"&&Oe&&(we="",J==null||J(Oe),d(!1),ne=!1),Z&&Ee!==we&&Z(we,{source:ve?"typing":"effect"}),ne},I=function(g){!g||!g.trim()||Z(g,{source:"submit"})};t.useEffect(function(){!ie&&!de&&M!=="combobox"&&v("",!1,!1)},[ie]),t.useEffect(function(){Ze&&_&&en(!1),_&&Ke(!1)},[_]);var W=Fn(),z=oe(W,2),Ae=z[0],Ne=z[1],Ge=function(g){var ve=Ae(),be=g.which;if(be===y.ENTER&&(M!=="combobox"&&g.preventDefault(),ie||d(!0)),Ne(!!Ee),be===y.BACKSPACE&&!ve&&de&&!Ee&&u.length){for(var ne=De(u),we=null,Oe=ne.length-1;Oe>=0;Oe-=1){var tn=ne[Oe];if(!tn.disabled){ne.splice(Oe,1),we=tn;break}}we&&p(ne,{type:"remove",values:[we]})}for(var Be=arguments.length,Ye=new Array(Be>1?Be-1:0),ze=1;ze<Be;ze++)Ye[ze-1]=arguments[ze];if(ie&&Ie.current){var Mn;(Mn=Ie.current).onKeyDown.apply(Mn,[g].concat(Ye))}pe==null||pe.apply(void 0,[g].concat(Ye))},fe=function(g){for(var ve=arguments.length,be=new Array(ve>1?ve-1:0),ne=1;ne<ve;ne++)be[ne-1]=arguments[ne];if(ie&&Ie.current){var we;(we=Ie.current).onKeyUp.apply(we,[g].concat(be))}re==null||re.apply(void 0,[g].concat(be))},We=function(g){var ve=u.filter(function(be){return be!==g});p(ve,{type:"remove",values:[g]})},nn=t.useRef(!1),fn=function(){Ke(!0),_||(B&&!nn.current&&B.apply(void 0,arguments),Re.includes("focus")&&d(!0)),nn.current=!0},wn=function(){Ke(!1,function(){nn.current=!1,d(!1)}),!_&&(Ee&&(M==="tags"?Z(Ee,{source:"submit"}):M==="multiple"&&Z("",{source:"blur"})),ue&&ue.apply(void 0,arguments))},Ve=[];t.useEffect(function(){return function(){Ve.forEach(function(C){return clearTimeout(C)}),Ve.splice(0,Ve.length)}},[]);var Fe=function(g){var ve,be=g.target,ne=(ve=ke.current)===null||ve===void 0?void 0:ve.getPopupElement();if(ne&&ne.contains(be)){var we=setTimeout(function(){var Ye=Ve.indexOf(we);if(Ye!==-1&&Ve.splice(Ye,1),dn(),!Me&&!ne.contains(document.activeElement)){var ze;(ze=_e.current)===null||ze===void 0||ze.focus()}});Ve.push(we)}for(var Oe=arguments.length,tn=new Array(Oe>1?Oe-1:0),Be=1;Be<Oe;Be++)tn[Be-1]=arguments[Be];ge==null||ge.apply(void 0,[g].concat(tn))},Xn=t.useState(null),Cn=oe(Xn,2),yn=Cn[0],Yn=Cn[1],Jn=t.useState({}),Qn=oe(Jn,2),qn=Qn[1];function Zn(){qn({})}ct(function(){if($e){var C,g=Math.ceil((C=ye.current)===null||C===void 0?void 0:C.offsetWidth);yn!==g&&!Number.isNaN(g)&&Yn(g)}},[$e]);var In;Pe&&(In=function(g){d(g)}),wt(function(){var C;return[ye.current,(C=ke.current)===null||C===void 0?void 0:C.getPopupElement()]},$e,d,!!Pe);var et=t.useMemo(function(){return Q(Q({},n),{},{notFoundContent:N,open:ie,triggerOpen:$e,id:i,showSearch:k,multiple:de,toggleOpen:d})},[n,N,$e,ie,i,k,de,d]),En=O!==void 0?O:F||!de&&M!=="combobox",Dn;En&&(Dn=t.createElement(cn,{className:He("".concat(r,"-arrow"),te({},"".concat(r,"-arrow-loading"),F)),customizeIcon:P,customizeIconProps:{loading:F,searchValue:Ee,open:ie,focused:qe,showSearch:k}}));var Rn,nt=function(){var g;U==null||U(),(g=_e.current)===null||g===void 0||g.focus(),p([],{type:"clear",values:u}),v("",!1,!1)};!_&&x&&(u.length||Ee)&&!(M==="combobox"&&Ee==="")&&(Rn=t.createElement(cn,{className:"".concat(r,"-clear"),onMouseDown:nt,customizeIcon:me},"×"));var tt=t.createElement(ce,{ref:Ie}),ot=He(r,l,(o={},te(o,"".concat(r,"-focused"),qe),te(o,"".concat(r,"-multiple"),de),te(o,"".concat(r,"-single"),!de),te(o,"".concat(r,"-allow-clear"),x),te(o,"".concat(r,"-show-arrow"),En),te(o,"".concat(r,"-disabled"),_),te(o,"".concat(r,"-loading"),F),te(o,"".concat(r,"-open"),ie),te(o,"".concat(r,"-customize-input"),on),te(o,"".concat(r,"-show-search"),k),o)),On=t.createElement($n,{ref:ke,disabled:_,prefixCls:r,visible:$e,popupElement:tt,containerWidth:yn,animation:Le,transitionName:ee,dropdownStyle:E,dropdownClassName:f,direction:h,dropdownMatchSelectWidth:D,dropdownRender:L,dropdownAlign:T,placement:A,getPopupContainer:ae,empty:s,getTriggerDOMNode:function(){return xe.current},onPopupVisibleChange:In,onPopupMouseEnter:Zn},Pe?t.cloneElement(Pe,{ref:an}):t.createElement(Kn,Ue({},n,{domRef:xe,prefixCls:r,inputElement:on,ref:_e,id:i,showSearch:k,autoClearSearchValue:$,mode:M,activeDescendantId:H,tagRender:c,values:u,open:ie,onToggleOpen:d,activeValue:K,searchValue:Ee,onSearch:v,onSearchSubmit:I,onRemove:We,tokenWithEnter:b}))),vn;return Pe?vn=On:vn=t.createElement("div",Ue({className:ot},he,{ref:ye,onMouseDown:Fe,onKeyDown:Ge,onKeyUp:fe,onFocus:fn,onBlur:wn}),qe&&!ie&&t.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(u.map(function(C){var g=C.label,ve=C.value;return["number","string"].includes(bn(g))?g:ve}).join(", "))),On,Dn,Rn),t.createElement(An.Provider,{value:et},vn)});const Kt=function(n,e){var a=t.useRef({values:new Map,options:new Map}),o=t.useMemo(function(){var r=a.current,l=r.values,m=r.options,c=n.map(function(u){if(u.label===void 0){var p;return Q(Q({},u),{},{label:(p=l.get(u.value))===null||p===void 0?void 0:p.label})}return u}),h=new Map,S=new Map;return c.forEach(function(u){h.set(u.value,u),S.set(u.value,e.get(u.value)||m.get(u.value))}),a.current.values=h,a.current.options=S,c},[n,e]),i=t.useCallback(function(r){return e.get(r)||a.current.options.get(r)},[e]);return[o,i]};function mn(n,e){return Ln(n).join("").toUpperCase().includes(e)}const $t=function(n,e,a,o,i){return t.useMemo(function(){if(!a||o===!1)return n;var r=e.options,l=e.label,m=e.value,c=[],h=typeof o=="function",S=a.toUpperCase(),u=h?o:function(s,w){return i?mn(w[i],S):w[r]?mn(w[l!=="children"?l:"label"],S):mn(w[m],S)},p=h?function(s){return gn(s)}:function(s){return s};return n.forEach(function(s){if(s[r]){var w=u(a,p(s));if(w)c.push(s);else{var N=s[r].filter(function(U){return u(a,p(U))});N.length&&c.push(Q(Q({},s),{},te({},r,N)))}return}u(a,p(s))&&c.push(s)}),c},[n,o,i,a,e])};var Vn=0,Wt=st();function Bt(){var n;return Wt?(n=Vn,Vn+=1):n="TEST_OR_SSR",n}function zt(n){var e=t.useState(),a=oe(e,2),o=a[0],i=a[1];return t.useEffect(function(){i("rc_select_".concat(Bt()))},[]),n||o}var Ht=["children","value"],Ut=["children"];function jt(n){var e=n,a=e.key,o=e.props,i=o.children,r=o.value,l=Je(o,Ht);return Q({key:a,value:r!==void 0?r:a,children:i},l)}function Bn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return dt(n).map(function(a,o){if(!t.isValidElement(a)||!a.type)return null;var i=a,r=i.type.isSelectOptGroup,l=i.key,m=i.props,c=m.children,h=Je(m,Ut);return e||!r?jt(a):Q(Q({key:"__RC_SELECT_GRP__".concat(l===null?o:l,"__"),label:l},h),{},{options:Bn(c)})}).filter(function(a){return a})}function Gt(n,e,a,o,i){return t.useMemo(function(){var r=n,l=!n;l&&(r=Bn(e));var m=new Map,c=new Map,h=function(p,s,w){w&&typeof w=="string"&&p.set(s[w],s)};function S(u){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=0;s<u.length;s+=1){var w=u[s];!w[a.options]||p?(m.set(w[a.value],w),h(c,w,a.label),h(c,w,o),h(c,w,i)):S(w[a.options],!0)}}return S(r),{options:r,valueOptions:m,labelOptions:c}},[n,e,a,o,i])}function Tn(n){var e=t.useRef();e.current=n;var a=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return a}var zn=function(){return null};zn.isSelectOptGroup=!0;var Hn=function(){return null};Hn.isSelectOption=!0;function Xt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Un=t.createContext(null),Yt=["disabled","title","children","style","className"];function _n(n){return typeof n=="string"||typeof n=="number"}var Jt=function(e,a){var o=bt(),i=o.prefixCls,r=o.id,l=o.open,m=o.multiple,c=o.mode,h=o.searchValue,S=o.toggleOpen,u=o.notFoundContent,p=o.onPopupScroll,s=t.useContext(Un),w=s.flattenOptions,N=s.onActiveValue,U=s.defaultActiveFirstOption,M=s.onSelect,_=s.menuItemSelectedIcon,F=s.rawValues,q=s.fieldNames,Y=s.virtual,j=s.listHeight,le=s.listItemHeight,V="".concat(i,"-item"),K=ft(function(){return w},[l,w],function(E,f){return f[0]&&E[1]!==f[1]}),G=t.useRef(null),H=function(f){f.preventDefault()},X=function(f){G.current&&G.current.scrollTo(typeof f=="number"?{index:f}:f)},$=function(f){for(var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,L=K.length,T=0;T<L;T+=1){var A=(f+T*D+L)%L,ae=K[A],se=ae.group,Re=ae.data;if(!se&&!Re.disabled)return A}return-1},Z=t.useState(function(){return $(0)}),J=oe(Z,2),R=J[0],x=J[1],O=function(f){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;x(f);var L={source:D?"keyboard":"mouse"},T=K[f];if(!T){N(null,-1,L);return}N(T.value,f,L)};t.useEffect(function(){O(U!==!1?$(0):-1)},[K.length,h]);var P=t.useCallback(function(E){return F.has(E)&&c!=="combobox"},[c,De(F).toString(),F.size]);t.useEffect(function(){var E=setTimeout(function(){if(!m&&l&&F.size===1){var D=Array.from(F)[0],L=K.findIndex(function(T){var A=T.data;return A.value===D});L!==-1&&(O(L),X(L))}});if(l){var f;(f=G.current)===null||f===void 0||f.scrollTo(void 0)}return function(){return clearTimeout(E)}},[l,h]);var me=function(f){f!==void 0&&M(f,{selected:!F.has(f)}),m||S(!1)};if(t.useImperativeHandle(a,function(){return{onKeyDown:function(f){var D=f.which,L=f.ctrlKey;switch(D){case y.N:case y.P:case y.UP:case y.DOWN:{var T=0;if(D===y.UP?T=-1:D===y.DOWN?T=1:Xt()&&L&&(D===y.N?T=1:D===y.P&&(T=-1)),T!==0){var A=$(R+T,T);X(A),O(A,!0)}break}case y.ENTER:{var ae=K[R];ae&&!ae.data.disabled?me(ae.value):me(void 0),l&&f.preventDefault();break}case y.ESC:S(!1),l&&f.stopPropagation()}},onKeyUp:function(){},scrollTo:function(f){X(f)}}}),K.length===0)return t.createElement("div",{role:"listbox",id:"".concat(r,"_list"),className:"".concat(V,"-empty"),onMouseDown:H},u);var ce=Object.keys(q).map(function(E){return q[E]}),Le=function(f){return f.label},ee=function(f){var D=K[f];if(!D)return null;var L=D.data||{},T=L.value,A=D.group,ae=ln(L,!0),se=Le(D);return D?t.createElement("div",Ue({"aria-label":typeof se=="string"&&!A?se:null},ae,{key:f,role:A?"presentation":"option",id:"".concat(r,"_list_").concat(f),"aria-selected":P(T)}),T):null};return t.createElement(t.Fragment,null,t.createElement("div",{role:"listbox",id:"".concat(r,"_list"),style:{height:0,width:0,overflow:"hidden"}},ee(R-1),ee(R),ee(R+1)),t.createElement(ht,{itemKey:"key",ref:G,data:K,height:j,itemHeight:le,fullHeight:!1,onMouseDown:H,onScroll:p,virtual:Y},function(E,f){var D,L=E.group,T=E.groupOption,A=E.data,ae=E.label,se=E.value,Re=A.key;if(L){var B,ue=(B=A.title)!==null&&B!==void 0?B:_n(ae)?ae.toString():void 0;return t.createElement("div",{className:He(V,"".concat(V,"-group")),title:ue},ae!==void 0?ae:Re)}var re=A.disabled,pe=A.title;A.children;var ge=A.style,Ce=A.className,de=Je(A,Yt),k=vt(de,ce),he=P(se),Se="".concat(V,"-option"),Te=He(V,Se,Ce,(D={},te(D,"".concat(Se,"-grouped"),T),te(D,"".concat(Se,"-active"),R===f&&!re),te(D,"".concat(Se,"-disabled"),re),te(D,"".concat(Se,"-selected"),he),D)),Me=Le(E),Qe=!_||typeof _=="function"||he,ye=typeof Me=="number"?Me:Me||se,xe=_n(ye)?ye.toString():void 0;return pe!==void 0&&(xe=pe),t.createElement("div",Ue({},ln(k),{"aria-selected":he,className:Te,title:xe,onMouseMove:function(){R===f||re||O(f)},onClick:function(){re||me(se)},style:ge}),t.createElement("div",{className:"".concat(Se,"-content")},ye),t.isValidElement(_)||he,Qe&&t.createElement(cn,{className:"".concat(V,"-option-state"),customizeIcon:_,customizeIconProps:{isSelected:he}},he?"✓":null))}))},jn=t.forwardRef(Jt);jn.displayName="OptionList";var Qt=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],qt=["inputValue"];function Zt(n){return!n||bn(n)!=="object"}var eo=t.forwardRef(function(n,e){var a=n.id,o=n.mode,i=n.prefixCls,r=i===void 0?"rc-select":i,l=n.backfill,m=n.fieldNames,c=n.inputValue,h=n.searchValue,S=n.onSearch,u=n.autoClearSearchValue,p=u===void 0?!0:u,s=n.onSelect,w=n.onDeselect,N=n.dropdownMatchSelectWidth,U=N===void 0?!0:N,M=n.filterOption,_=n.filterSort,F=n.optionFilterProp,q=n.optionLabelProp,Y=n.options,j=n.children,le=n.defaultActiveFirstOption,V=n.menuItemSelectedIcon,K=n.virtual,G=n.listHeight,H=G===void 0?200:G,X=n.listItemHeight,$=X===void 0?20:X,Z=n.value,J=n.defaultValue,R=n.labelInValue,x=n.onChange,O=Je(n,Qt),P=zt(a),me=hn(o),ce=!!(!Y&&j),Le=t.useMemo(function(){return M===void 0&&o==="combobox"?!1:M},[M,o]),ee=t.useMemo(function(){return Wn(m,ce)},[JSON.stringify(m),ce]),E=pn("",{value:h!==void 0?h:c,postState:function(b){return b||""}}),f=oe(E,2),D=f[0],L=f[1],T=Gt(Y,j,ee,F,q),A=T.valueOptions,ae=T.labelOptions,se=T.options,Re=t.useCallback(function(d){var b=Ln(d);return b.map(function(v){var I,W,z,Ae,Ne;if(Zt(v))I=v;else{var Ge;z=v.key,W=v.label,I=(Ge=v.value)!==null&&Ge!==void 0?Ge:z}var fe=A.get(I);if(fe){var We;W===void 0&&(W=fe==null?void 0:fe[q||ee.label]),z===void 0&&(z=(We=fe==null?void 0:fe.key)!==null&&We!==void 0?We:I),Ae=fe==null?void 0:fe.disabled,Ne=fe==null?void 0:fe.title}return{label:W,value:I,key:z,disabled:Ae,title:Ne}})},[ee,q,A]),B=pn(J,{value:Z}),ue=oe(B,2),re=ue[0],pe=ue[1],ge=t.useMemo(function(){var d,b=Re(re);return o==="combobox"&&!((d=b[0])!==null&&d!==void 0&&d.value)?[]:b},[re,Re,o]),Ce=Kt(ge,A),de=oe(Ce,2),k=de[0],he=de[1],Se=t.useMemo(function(){if(!o&&k.length===1){var d=k[0];if(d.value===null&&(d.label===null||d.label===void 0))return[]}return k.map(function(b){var v;return Q(Q({},b),{},{label:(v=b.label)!==null&&v!==void 0?v:b.value})})},[o,k]),Te=t.useMemo(function(){return new Set(k.map(function(d){return d.value}))},[k]);t.useEffect(function(){if(o==="combobox"){var d,b=(d=k[0])===null||d===void 0?void 0:d.value;L(Et(b)?String(b):"")}},[k]);var Me=Tn(function(d,b){var v,I=b??d;return v={},te(v,ee.value,d),te(v,ee.label,I),v}),Qe=t.useMemo(function(){if(o!=="tags")return se;var d=De(se),b=function(I){return A.has(I)};return De(k).sort(function(v,I){return v.value<I.value?-1:1}).forEach(function(v){var I=v.value;b(I)||d.push(Me(I,v.label))}),d},[Me,se,A,k,o]),ye=$t(Qe,ee,D,Le,F),xe=t.useMemo(function(){return o!=="tags"||!D||ye.some(function(d){return d[F||"value"]===D})?ye:[Me(D)].concat(De(ye))},[Me,F,o,ye,D]),ke=t.useMemo(function(){return _?De(xe).sort(function(d,b){return _(d,b)}):xe},[xe,_]),_e=t.useMemo(function(){return _t(ke,{fieldNames:ee,childrenAsData:ce})},[ke,ee,ce]),Ie=function(b){var v=Re(b);if(pe(v),x&&(v.length!==k.length||v.some(function(z,Ae){var Ne;return((Ne=k[Ae])===null||Ne===void 0?void 0:Ne.value)!==(z==null?void 0:z.value)}))){var I=R?v:v.map(function(z){return z.value}),W=v.map(function(z){return gn(he(z.value))});x(me?I:I[0],me?W:W[0])}},sn=t.useState(null),Xe=oe(sn,2),qe=Xe[0],Ke=Xe[1],dn=t.useState(0),Ee=oe(dn,2),on=Ee[0],Pe=Ee[1],an=le!==void 0?le:o!=="combobox",rn=t.useCallback(function(d,b){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},I=v.source,W=I===void 0?"keyboard":I;Pe(b),l&&o==="combobox"&&d!==null&&W==="keyboard"&&Ke(String(d))},[l,o]),je=function(b,v,I){var W=function(){var Ve,Fe=he(b);return[R?{label:Fe==null?void 0:Fe[ee.label],value:b,key:(Ve=Fe==null?void 0:Fe.key)!==null&&Ve!==void 0?Ve:b}:b,gn(Fe)]};if(v&&s){var z=W(),Ae=oe(z,2),Ne=Ae[0],Ge=Ae[1];s(Ne,Ge)}else if(!v&&w&&I!=="clear"){var fe=W(),We=oe(fe,2),nn=We[0],fn=We[1];w(nn,fn)}},Ze=Tn(function(d,b){var v,I=me?b.selected:!0;I?v=me?[].concat(De(k),[d]):[d]:v=k.filter(function(W){return W.value!==d}),Ie(v),je(d,I),o==="combobox"?Ke(""):(!hn||p)&&(L(""),Ke(""))}),en=function(b,v){Ie(b);var I=v.type,W=v.values;(I==="remove"||I==="clear")&&W.forEach(function(z){je(z.value,!1,I)})},ie=function(b,v){if(L(b),Ke(null),v.source==="submit"){var I=(b||"").trim();if(I){var W=Array.from(new Set([].concat(De(Te),[I])));Ie(W),je(I,!0),L("")}return}v.source!=="blur"&&(o==="combobox"&&Ie(b),S==null||S(b))},un=function(b){var v=b;o!=="tags"&&(v=b.map(function(W){var z=ae.get(W);return z==null?void 0:z.value}).filter(function(W){return W!==void 0}));var I=Array.from(new Set([].concat(De(Te),De(v))));Ie(I),I.forEach(function(W){je(W,!0)})},$e=t.useMemo(function(){var d=K!==!1&&U!==!1;return Q(Q({},T),{},{flattenOptions:_e,onActiveValue:rn,defaultActiveFirstOption:an,onSelect:Ze,menuItemSelectedIcon:V,rawValues:Te,fieldNames:ee,virtual:d,listHeight:H,listItemHeight:$,childrenAsData:ce})},[T,_e,rn,an,Ze,V,Te,ee,K,U,H,$,ce]);return t.createElement(Un.Provider,{value:$e},t.createElement(kt,Ue({},O,{id:P,prefixCls:r,ref:e,omitDomProps:qt,mode:o,displayValues:Se,onDisplayValuesChange:en,searchValue:D,onSearch:ie,autoClearSearchValue:p,onSearchSplit:un,dropdownMatchSelectWidth:U,OptionList:jn,emptyOptions:!_e.length,activeValue:qe,activeDescendantId:"".concat(P,"_list_").concat(on)})))}),Gn=eo;Gn.Option=Hn;Gn.OptGroup=zn;export{kt as B,Hn as O,Gn as T,zn as a,zt as b,bt as u};
